{"version":3,"sources":["webpack://JSMpeg/webpack/universalModuleDefinition","webpack://JSMpeg/webpack/bootstrap","webpack://JSMpeg/./static/theme/style.scss","webpack://JSMpeg/./node_modules/css-loader/lib/css-base.js","webpack://JSMpeg/./node_modules/pug-runtime/index.js","webpack://JSMpeg/./node_modules/style-loader/lib/addStyles.js","webpack://JSMpeg/./node_modules/style-loader/lib/urls.js","webpack://JSMpeg/./src/index.js","webpack://JSMpeg/./src/lib/ajax-progressive.js","webpack://JSMpeg/./src/lib/ajax.js","webpack://JSMpeg/./src/lib/buffer.js","webpack://JSMpeg/./src/lib/canvas2d.js","webpack://JSMpeg/./src/lib/decoder.js","webpack://JSMpeg/./src/lib/mp2.js","webpack://JSMpeg/./src/lib/mpeg1.js","webpack://JSMpeg/./src/lib/player.js","webpack://JSMpeg/./src/lib/ts.js","webpack://JSMpeg/./src/lib/video-element.js","webpack://JSMpeg/./src/lib/webaudio.js","webpack://JSMpeg/./src/lib/webgl.js","webpack://JSMpeg/./src/lib/websocket.js","webpack://JSMpeg/./static/theme/style.scss?83a2","webpack://JSMpeg/./static/view/playButton.pug","webpack://JSMpeg/./static/view/unmuteButton.pug","webpack://JSMpeg/fs (ignored)"],"names":["JSMpeg","Player","VideoElement","BitBuffer","Source","Ajax","AjaxProgressive","WebSocket","WSSource","Demuxer","TS","Decoder","Base","MPEG1Video","MP2Audio","MP2","Renderer","WebGL","Canvas2D","CanvasRenderer","AudioOutput","WebAudio","WebAudioOut","Now","window","performance","now","Date","CreateVideoElements","elements","document","querySelectorAll","i","length","Fill","array","value","fill","AjaxProgressiveSource","url","options","destination","request","completed","established","progress","fileSize","loadedSize","chunkSize","isLoading","loadStartTime","throttled","aborted","prototype","connect","start","XMLHttpRequest","onreadystatechange","readyState","DONE","parseInt","getResponseHeader","loadNextChunk","bind","onprogress","onProgress","open","send","resume","secondsHeadroom","worstCaseLoadingTime","loadTime","destroy","abort","end","Math","min","status","onChunkLoad","response","loadFails","setRequestHeader","responseType","ev","loaded","total","data","byteLength","write","AjaxSource","onLoad","bufferOrLength","mode","bytes","Uint8Array","MODE","EXPAND","index","resize","size","newBytes","set","evict","sizeNeeded","bytePos","available","copyWithin","subarray","buffers","isArrayOfBuffers","totalLength","newSize","max","appendSingleBuffer","buffer","findNextStartCode","findStartCode","code","current","nextBytesAreStartCode","peek","count","offset","currentByte","remaining","read","shift","mask","skip","rewind","has","EVICT","canvas","createElement","width","height","enabled","context","getContext","imageData","getImageData","renderProgress","w","h","ctx","fillStyle","fillRect","render","y","cb","cr","YCbCrToRGBA","putImageData","rgba","w2","yIndex1","yIndex2","yNext2Lines","cIndex","cNextLine","rgbaIndex1","rgbaIndex2","rgbaNext2Lines","cols","rows","ccb","ccr","r","g","b","row","col","y1","y2","y3","y4","BaseDecoder","canPlay","collectTimestamps","streaming","timestamps","timestampIndex","startTime","decodedTime","Object","defineProperty","get","getCurrentTime","pts","push","bits","time","seek","ts","decode","advanceDecodedTime","seconds","newTimestampIndex","call","bufferSize","audioBufferSize","bufferMode","left","Float32Array","right","sampleRate","D","SYNTHESIS_WINDOW","V","U","Int32Array","VPos","allocation","Array","scaleFactorInfo","scaleFactor","sample","j","create","constructor","pos","decoded","decodeFrame","play","enqueuedTime","sync","version","layer","hasCRC","FRAME_SYNC","VERSION","MPEG_1","LAYER","II","bitrateIndex","sampleRateIndex","SAMPLE_RATE","MPEG_2","padding","privat","bound","JOINT_STEREO","MONO","bitrate","BIT_RATE","frameSize","tab3","sblimit","tab1","tab2","QUANT_LUT_STEP_1","QUANT_LUT_STEP_2","sb","readAllocation","channels","ch","sf","outPos","part","granule","readSamples","p","MatrixTransform","dIndex","vIndex","outChannel","tab4","QUANT_LUT_STEP_3","qtab","QUANT_LUT_STEP4","QUANT_TAB","q","val","SCALEFACTOR_BASE","adj","levels","group","scale","s","ss","d","dp","t01","t02","t03","t04","t05","t06","t07","t08","t09","t10","t11","t12","t13","t14","t15","t16","t17","t18","t19","t20","t21","t22","t23","t24","t25","t26","t27","t28","t29","t30","t31","t32","t33","MPEG_2_5","III","I","STEREO","DUAL_CHANNEL","Uint16Array","Uint32Array","A","B","C","MPEG1","videoBufferSize","customIntraQuantMatrix","customNonIntraQuantMatrix","blockData","currentFrame","decodeFirstFrame","hasSequenceHeader","START","SEQUENCE","decodeSequenceHeader","PICTURE","bufferedBytes","decodePicture","frameRate","readHuffman","codeTable","state","newWidth","newHeight","PICTURE_RATE","initBuffers","ZIG_ZAG","intraQuantMatrix","idx","nonIntraQuantMatrix","DEFAULT_INTRA_QUANT_MATRIX","DEFAULT_NON_INTRA_QUANT_MATRIX","mbWidth","mbHeight","mbSize","codedWidth","codedHeight","codedSize","halfWidth","halfHeight","currentY","Uint8ClampedArray","currentY32","currentCr","currentCr32","currentCb","currentCb32","forwardY","forwardY32","forwardCr","forwardCr32","forwardCb","forwardCb32","pictureType","fullPelForward","forwardFCode","forwardRSize","forwardF","skipOutput","PICTURE_TYPE","PREDICTIVE","EXTENSION","USER_DATA","SLICE_FIRST","SLICE_LAST","decodeSlice","INTRA","tmpY","tmpY32","tmpCr","tmpCr32","tmpCb","tmpCb32","quantizerScale","sliceBegin","slice","macroblockAddress","motionFwH","motionFwHPrev","motionFwV","motionFwVPrev","dcPredictorY","dcPredictorCr","dcPredictorCb","decodeMacroblock","mbRow","mbCol","macroblockType","macroblockIntra","macroblockMotFw","increment","t","MACROBLOCK_ADDRESS_INCREMENT","copyMacroblock","mbTable","MACROBLOCK_TYPE","decodeMotionVectors","cbp","CODE_BLOCK_PATTERN","block","decodeBlock","MOTION","abs","motionH","motionV","sY","sCr","sCb","scan","H","oddH","oddV","src","dest","last","dY","dCb","dCr","x","cr1","cr2","cb1","cb2","n","quantMatrix","predictor","dctSize","DCT_DC_SIZE_LUMINANCE","DCT_DC_SIZE_CHROMINANCE","differential","level","run","coeff","DCT_COEFF","dezigZagged","PREMULTIPLIER_MATRIX","destArray","destIndex","CopyValueToDestination","IDCT","CopyBlockToDestination","AddValueToDestination","AddBlockToDestination","b1","b3","b4","b6","b7","tmp1","tmp2","m0","x0","x1","x2","x3","x4","y5","y6","y7","Int16Array","MACROBLOCK_TYPE_INTRA","Int8Array","MACROBLOCK_TYPE_PREDICTIVE","MACROBLOCK_TYPE_B","cbUI","source","match","progressive","maxAudioLag","loop","autoplay","demuxer","video","renderer","disableGl","IsSupported","STREAM","VIDEO_1","audio","audioOut","AUDIO_1","setCurrentTime","getVolume","setVolume","unpauseOnShow","pauseWhenHidden","addEventListener","showHide","visibilityState","wantsToPlay","pause","animationId","requestAnimationFrame","update","cancelAnimationFrame","isPlaying","stop","currentTime","volume","startOffset","updateForStreaming","updateForStaticFile","resetEnqueuedTime","notEnoughData","headroom","targetTime","lateTime","frameTime","leftoverBytes","guessVideoFrameEnd","pidsToStreamIds","pesPacketInfo","streamId","currentLength","parsePacket","leftoverCount","resync","transportError","payloadStart","transportPriority","pid","transportScrambling","adaptationField","continuityCounter","pi","packetComplete","adaptationFieldLength","packetLength","ptsDtsFlag","headerLength","payloadBeginIndex","p32_30","p29_15","p14_0","payloadLength","packetStart","complete","packetAddData","hasPadding","byteIndex","foundSync","console","warn","PACK_HEADER","SYSTEM_HEADER","PROGRAM_MAP","PRIVATE_1","PADDING","PRIVATE_2","DIRECTORY","wrapper","videoUrl","assign","poster","aspectPercent","picMode","hookInPlay","hookInPause","hookInStop","isString","querySelector","container","player","playButton","containerInit","canvasInit","playButtonInit","playerInit","setWrapperHeight","classList","add","_style","addStyles","paddingBottom","appendChild","style","display","playerInstance","Image","onClick","unlocked","unlockAudioElement","unmuteButton","innerHTML","unmuteButtonTemplate","unlockAudioBound","onUnlockAudio","playButtonTemplate","visibility","element","preventDefault","stopPropagation","unlock","removeEventListener","offsetHeight","styles","name","str","String","CachedContext","AudioContext","webkitAudioContext","gain","createGain","_connections","wallclockStartTime","NeedsUnlocking","getEnqueuedTime","disconnect","close","createBuffer","getChannelData","createBufferSource","duration","callback","unlockCallback","noteOn","setTimeout","checkIfUnlocked","attempt","playbackState","PLAYING_STATE","FINISHED_STATE","test","navigator","userAgent","WebGLRenderer","contextCreateOptions","preserveDrawingBuffer","alpha","depth","stencil","antialias","gl","Error","vertexAttr","vertexBuffer","vertexCoords","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","program","createProgram","SHADER","VERTEX_IDENTITY","FRAGMENT_YCRCB_TO_RGBA","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","textureY","createTexture","textureCb","textureCr","loadingProgram","FRAGMENT_LOADING","shouldCreateUnclampedViews","allowsClampedTextureData","deleteTexture","deleteProgram","deleteBuffer","useProgram","viewport","texture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","uniform1i","getUniformLocation","vsh","fsh","attachShader","compileShader","VERTEX_SHADER","FRAGMENT_SHADER","linkProgram","type","shader","createShader","shaderSource","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","texImage2D","LUMINANCE","UNSIGNED_BYTE","getError","loc","uniform1f","drawArrays","TRIANGLE_STRIP","h2","updateTexture","TEXTURE0","TEXTURE1","TEXTURE2","unit","activeTexture","WebGLRenderingContext","err","join","socket","callbacks","reconnectInterval","undefined","shouldAttemptReconnect","reconnectTimeoutId","clearTimeout","protocols","binaryType","onmessage","onMessage","onopen","onOpen","onerror","onClose","onclose"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA;;;AAGA;AACA,8LAA+L,uBAAuB,eAAe,GAAG,kGAAkG,YAAY,WAAW,gBAAgB,iBAAiB,GAAG,qCAAqC,YAAY,WAAW,aAAa,cAAc,iBAAiB,GAAG,oCAAoC,uBAAuB,gBAAgB,oBAAoB,cAAc,GAAG,+DAA+D,mBAAmB,GAAG,wEAAwE,gBAAgB,oBAAoB,GAAG,yEAAyE,oBAAoB,qBAAqB,GAAG,qCAAqC,eAAe,GAAG,wCAAwC,eAAe,GAAG,uCAAuC,eAAe,GAAG,0CAA0C,iBAAiB,gBAAgB,gBAAgB,iBAAiB,eAAe,GAAG;;AAEjsC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;;;;;;;AC3EA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,cAAc;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,iDAAiD,aAAa;AAC9D;AACA,iDAAiD,aAAa;AAC9D;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,iDAAiD;AAC5D,WAAW,gBAAgB;AAC3B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,iCAAiC;AAC5C,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C,iBAAiB;AAC7D;AACA,+BAA+B,EAAE;AACjC,8BAA8B,EAAE;AAChC,6BAA6B,EAAE;AAC/B,6BAA6B,EAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC5PA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA,cAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;;;;;;AC5YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACxFA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAIA,SAAS;AACX;AACA;AACA;AACA;AACAC,UAAA,mDALW;;AAOX;AACA;AACA;AACAC,gBAAA,0DAVW;;AAYX;AACA;AACA;AACAC,aAAA,mDAfW;;AAiBX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,UAAQ;AACNC,UAAM,iDADA;AAENC,qBAAiB,6DAFX;AAGNC,eAAW,sDAAAC;AAHL,GA1BG;;AAgCX;AACA;AACA;AACA;AACA;AACA;AACAC,WAAS;AACPC,QAAI,+CAAAA;AADG,GAtCE;;AA0CX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,WAAS;AACPC,UAAM,oDADC;AAEPC,gBAAY,kDAFL;AAGPC,cAAU,gDAAAC;AAHH,GArDE;;AA2DX;AACA;AACA;AACA;AACA;AACA;AACAC,YAAU;AACRC,WAAO,mDADC;AAERC,cAAU,s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","file":"JSMpeg.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"JSMpeg\"] = factory();\n\telse\n\t\troot[\"JSMpeg\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".static-theme-style__canvas,\\n.static-theme-style__poster, .static-theme-style__unmuteButton, .static-theme-style__playButton, .static-theme-style__unmuteButtonSvg {\\n  position: absolute;\\n  z-index: 1;\\n}\\n\\n.static-theme-style__canvas,\\n.static-theme-style__poster, .static-theme-style__unmuteButton {\\n  left: 0;\\n  top: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.static-theme-style__playButton {\\n  left: 0;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  margin: auto;\\n}\\n\\n.static-theme-style__container {\\n  position: relative;\\n  width: 100%;\\n  min-width: 80px;\\n  height: 0;\\n}\\n\\n.static-theme-style__canvas,\\n.static-theme-style__poster {\\n  display: block;\\n}\\n\\n.static-theme-style__playButton, .static-theme-style__unmuteButton {\\n  opacity: .7;\\n  cursor: pointer;\\n}\\n\\n.static-theme-style__playButton, .static-theme-style__playButtonSvg {\\n  max-width: 60px;\\n  max-height: 60px;\\n}\\n\\n.static-theme-style__playButton {\\n  z-index: 2;\\n}\\n\\n.static-theme-style__playButtonSvg {\\n  fill: #fff;\\n}\\n\\n.static-theme-style__unmuteButton {\\n  z-index: 2;\\n}\\n\\n.static-theme-style__unmuteButtonSvg {\\n  bottom: 15px;\\n  right: 15px;\\n  width: 40px;\\n  height: 40px;\\n  fill: #fff;\\n}\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"canvas\": \"static-theme-style__canvas\",\n\t\"poster\": \"static-theme-style__poster\",\n\t\"unmuteButton\": \"static-theme-style__unmuteButton\",\n\t\"playButton\": \"static-theme-style__playButton\",\n\t\"unmuteButtonSvg\": \"static-theme-style__unmuteButtonSvg\",\n\t\"container\": \"static-theme-style__container\",\n\t\"playButtonSvg\": \"static-theme-style__playButtonSvg\"\n};","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","'use strict';\n\nvar pug_has_own_property = Object.prototype.hasOwnProperty;\n\n/**\n * Merge two attribute objects giving precedence\n * to values in object `b`. Classes are special-cased\n * allowing for arrays and merging/joining appropriately\n * resulting in a string.\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Object} a\n * @api private\n */\n\nexports.merge = pug_merge;\nfunction pug_merge(a, b) {\n  if (arguments.length === 1) {\n    var attrs = a[0];\n    for (var i = 1; i < a.length; i++) {\n      attrs = pug_merge(attrs, a[i]);\n    }\n    return attrs;\n  }\n\n  for (var key in b) {\n    if (key === 'class') {\n      var valA = a[key] || [];\n      a[key] = (Array.isArray(valA) ? valA : [valA]).concat(b[key] || []);\n    } else if (key === 'style') {\n      var valA = pug_style(a[key]);\n      valA = valA && valA[valA.length - 1] !== ';' ? valA + ';' : valA;\n      var valB = pug_style(b[key]);\n      valB = valB && valB[valB.length - 1] !== ';' ? valB + ';' : valB;\n      a[key] = valA + valB;\n    } else {\n      a[key] = b[key];\n    }\n  }\n\n  return a;\n};\n\n/**\n * Process array, object, or string as a string of classes delimited by a space.\n *\n * If `val` is an array, all members of it and its subarrays are counted as\n * classes. If `escaping` is an array, then whether or not the item in `val` is\n * escaped depends on the corresponding item in `escaping`. If `escaping` is\n * not an array, no escaping is done.\n *\n * If `val` is an object, all the keys whose value is truthy are counted as\n * classes. No escaping is done.\n *\n * If `val` is a string, it is counted as a class. No escaping is done.\n *\n * @param {(Array.<string>|Object.<string, boolean>|string)} val\n * @param {?Array.<string>} escaping\n * @return {String}\n */\nexports.classes = pug_classes;\nfunction pug_classes_array(val, escaping) {\n  var classString = '', className, padding = '', escapeEnabled = Array.isArray(escaping);\n  for (var i = 0; i < val.length; i++) {\n    className = pug_classes(val[i]);\n    if (!className) continue;\n    escapeEnabled && escaping[i] && (className = pug_escape(className));\n    classString = classString + padding + className;\n    padding = ' ';\n  }\n  return classString;\n}\nfunction pug_classes_object(val) {\n  var classString = '', padding = '';\n  for (var key in val) {\n    if (key && val[key] && pug_has_own_property.call(val, key)) {\n      classString = classString + padding + key;\n      padding = ' ';\n    }\n  }\n  return classString;\n}\nfunction pug_classes(val, escaping) {\n  if (Array.isArray(val)) {\n    return pug_classes_array(val, escaping);\n  } else if (val && typeof val === 'object') {\n    return pug_classes_object(val);\n  } else {\n    return val || '';\n  }\n}\n\n/**\n * Convert object or string to a string of CSS styles delimited by a semicolon.\n *\n * @param {(Object.<string, string>|string)} val\n * @return {String}\n */\n\nexports.style = pug_style;\nfunction pug_style(val) {\n  if (!val) return '';\n  if (typeof val === 'object') {\n    var out = '';\n    for (var style in val) {\n      /* istanbul ignore else */\n      if (pug_has_own_property.call(val, style)) {\n        out = out + style + ':' + val[style] + ';';\n      }\n    }\n    return out;\n  } else {\n    return val + '';\n  }\n};\n\n/**\n * Render the given attribute.\n *\n * @param {String} key\n * @param {String} val\n * @param {Boolean} escaped\n * @param {Boolean} terse\n * @return {String}\n */\nexports.attr = pug_attr;\nfunction pug_attr(key, val, escaped, terse) {\n  if (val === false || val == null || !val && (key === 'class' || key === 'style')) {\n    return '';\n  }\n  if (val === true) {\n    return ' ' + (terse ? key : key + '=\"' + key + '\"');\n  }\n  if (typeof val.toJSON === 'function') {\n    val = val.toJSON();\n  }\n  if (typeof val !== 'string') {\n    val = JSON.stringify(val);\n    if (!escaped && val.indexOf('\"') !== -1) {\n      return ' ' + key + '=\\'' + val.replace(/'/g, '&#39;') + '\\'';\n    }\n  }\n  if (escaped) val = pug_escape(val);\n  return ' ' + key + '=\"' + val + '\"';\n};\n\n/**\n * Render the given attributes object.\n *\n * @param {Object} obj\n * @param {Object} terse whether to use HTML5 terse boolean attributes\n * @return {String}\n */\nexports.attrs = pug_attrs;\nfunction pug_attrs(obj, terse){\n  var attrs = '';\n\n  for (var key in obj) {\n    if (pug_has_own_property.call(obj, key)) {\n      var val = obj[key];\n\n      if ('class' === key) {\n        val = pug_classes(val);\n        attrs = pug_attr(key, val, false, terse) + attrs;\n        continue;\n      }\n      if ('style' === key) {\n        val = pug_style(val);\n      }\n      attrs += pug_attr(key, val, false, terse);\n    }\n  }\n\n  return attrs;\n};\n\n/**\n * Escape the given string of `html`.\n *\n * @param {String} html\n * @return {String}\n * @api private\n */\n\nvar pug_match_html = /[\"&<>]/;\nexports.escape = pug_escape;\nfunction pug_escape(_html){\n  var html = '' + _html;\n  var regexResult = pug_match_html.exec(html);\n  if (!regexResult) return _html;\n\n  var result = '';\n  var i, lastIndex, escape;\n  for (i = regexResult.index, lastIndex = 0; i < html.length; i++) {\n    switch (html.charCodeAt(i)) {\n      case 34: escape = '&quot;'; break;\n      case 38: escape = '&amp;'; break;\n      case 60: escape = '&lt;'; break;\n      case 62: escape = '&gt;'; break;\n      default: continue;\n    }\n    if (lastIndex !== i) result += html.substring(lastIndex, i);\n    lastIndex = i + 1;\n    result += escape;\n  }\n  if (lastIndex !== i) return result + html.substring(lastIndex, i);\n  else return result;\n};\n\n/**\n * Re-throw the given `err` in context to the\n * the pug in `filename` at the given `lineno`.\n *\n * @param {Error} err\n * @param {String} filename\n * @param {String} lineno\n * @param {String} str original source\n * @api private\n */\n\nexports.rethrow = pug_rethrow;\nfunction pug_rethrow(err, filename, lineno, str){\n  if (!(err instanceof Error)) throw err;\n  if ((typeof window != 'undefined' || !filename) && !str) {\n    err.message += ' on line ' + lineno;\n    throw err;\n  }\n  try {\n    str = str || require('fs').readFileSync(filename, 'utf8')\n  } catch (ex) {\n    pug_rethrow(err, null, lineno)\n  }\n  var context = 3\n    , lines = str.split('\\n')\n    , start = Math.max(lineno - context, 0)\n    , end = Math.min(lines.length, lineno + context);\n\n  // Error context\n  var context = lines.slice(start, end).map(function(line, i){\n    var curr = i + start + 1;\n    return (curr == lineno ? '  > ' : '    ')\n      + curr\n      + '| '\n      + line;\n  }).join('\\n');\n\n  // Alter exception message\n  err.path = filename;\n  err.message = (filename || 'Pug') + ':' + lineno\n    + '\\n' + context + '\\n\\n' + err.message;\n  throw err;\n};\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","/* According to jsmpeg project(https://github.com/phoboslab/jsmpeg) modified */\r\n\r\n// ES6 modular\r\nimport Player from './lib/player';\r\nimport VideoElement from './lib/video-element'\r\nimport BitBuffer from './lib/buffer';\r\nimport AjaxSource from './lib/ajax';\r\nimport AjaxProgressiveSource from './lib/ajax-progressive';\r\nimport WSSource from './lib/websocket';\r\nimport TS from './lib/ts';\r\nimport BaseDecoder from './lib/decoder';\r\nimport MPEG1 from './lib/mpeg1';\r\nimport MP2 from './lib/mp2';\r\nimport WebGLRenderer from './lib/webgl';\r\nimport CanvasRenderer from './lib/canvas2d';\r\nimport WebAudioOut from './lib/webaudio';\r\n\r\n// This sets up the JSMpeg \"Namespace\". The object is empty apart from the Now()\r\n// utility function and the automatic CreateVideoElements() after DOMReady.\r\nlet JSMpeg = {\r\n  // The Player sets up the connections between source, demuxer, decoders,\r\n  // renderer and audio output. It ties everything together, is responsible\r\n  // of scheduling decoding and provides some convenience methods for\r\n  // external users.\r\n  Player,\r\n\r\n  // A Video Element wraps the Player, shows HTML controls to start/pause\r\n  // the video and handles Audio unlocking on iOS. VideoElements can be\r\n  // created directly in HTML using the <div class=\"jsmpeg\"/> tag.\r\n  VideoElement,\r\n\r\n  // The BitBuffer wraps a Uint8Array and allows reading an arbitrary number\r\n  // of bits at a time. On writing, the BitBuffer either expands its\r\n  // internal buffer (for static files) or deletes old data (for streaming).\r\n  BitBuffer,\r\n\r\n  // A Source provides raw data from HTTP, a WebSocket connection or any\r\n  // other mean. Sources must support the following API:\r\n  //   .connect(destinationNode)\r\n  //   .write(buffer)\r\n  //   .start() - start reading\r\n  //   .resume(headroom) - continue reading; headroom to play pos in seconds\r\n  //   .established - boolean, true after connection is established\r\n  //   .completed - boolean, true if the source is completely loaded\r\n  //   .progress - float 0-1\r\n  Source: {\r\n    Ajax: AjaxSource,\r\n    AjaxProgressive: AjaxProgressiveSource,\r\n    WebSocket: WSSource,\r\n  },\r\n\r\n  // A Demuxer may sit between a Source and a Decoder. It separates the\r\n  // incoming raw data into Video, Audio and other Streams. API:\r\n  //   .connect(streamId, destinationNode)\r\n  //   .write(buffer)\r\n  //   .currentTime  float, in seconds\r\n  //   .startTime - float, in seconds\r\n  Demuxer: {\r\n    TS: TS,\r\n  },\r\n\r\n  // A Decoder accepts an incoming Stream of raw Audio or Video data, buffers\r\n  // it and upon `.decode()` decodes a single frame of data. Video decoders\r\n  // call `destinationNode.render(Y, Cr, CB)` with the decoded pixel data;\r\n  // Audio decoders call `destinationNode.play(left, right)` with the decoded\r\n  // PCM data. API:\r\n  //   .connect(destinationNode)\r\n  //   .write(pts, buffer)\r\n  //   .decode()\r\n  //   .seek(time)\r\n  //   .currentTime - float, in seconds\r\n  //   .startTime - float, in seconds\r\n  Decoder: {\r\n    Base: BaseDecoder,\r\n    MPEG1Video: MPEG1,\r\n    MP2Audio: MP2,\r\n  },\r\n\r\n  // A Renderer accepts raw YCrCb data in 3 separate buffers via the render()\r\n  // method. Renderers typically convert the data into the RGBA color space\r\n  // and draw it on a Canvas, but other output - such as writing PNGs - would\r\n  // be conceivable. API:\r\n  //   .render(y, cr, cb) - pixel data as Uint8Arrays\r\n  //   .enabled - wether the renderer does anything upon receiving data\r\n  Renderer: {\r\n    WebGL: WebGLRenderer,\r\n    Canvas2D: CanvasRenderer,\r\n  },\r\n\r\n  // Audio Outputs accept raw Stero PCM data in 2 separate buffers via the\r\n  // play() method. Outputs typically play the audio on the user's device.\r\n  // API:\r\n  //   .play(sampleRate, left, right) - rate in herz; PCM data as Uint8Arrays\r\n  //   .stop()\r\n  //   .enqueuedTime - float, in seconds\r\n  //   .enabled - wether the output does anything upon receiving data\r\n  AudioOutput: {\r\n    WebAudio: WebAudioOut,\r\n  },\r\n\r\n  // functions\r\n  Now: () => {\r\n    return window.performance\r\n      ? window.performance.now() / 1000\r\n      : Date.now() / 1000;\r\n  },\r\n  CreateVideoElements: () => {\r\n    let elements = document.querySelectorAll('.jsmpeg');\r\n    for (let i = 0; i < elements.length; i++) {\r\n      new VideoElement(elements[i]);\r\n    }\r\n  },\r\n  Fill: (array, value) => {\r\n    if (array.fill) {\r\n      array.fill(value);\r\n    }\r\n    else {\r\n      for (let i = 0; i < array.length; i++) {\r\n        array[i] = value;\r\n      }\r\n    }\r\n  },\r\n};\r\n\r\nexport default JSMpeg;","import JSMpeg from '../';\r\n\r\nlet AjaxProgressiveSource = function(url, options) {\r\n\tthis.url = url;\r\n\tthis.destination = null;\r\n\tthis.request = null;\r\n\r\n\tthis.completed = false;\r\n\tthis.established = false;\r\n\tthis.progress = 0;\r\n\r\n\tthis.fileSize = 0;\r\n\tthis.loadedSize = 0;\r\n\tthis.chunkSize = options.chunkSize || 1024*1024;\r\n\r\n\tthis.isLoading = false;\r\n\tthis.loadStartTime = 0;\r\n\tthis.throttled = options.throttled !== false;\r\n\tthis.aborted = false;\r\n};\r\n\r\nAjaxProgressiveSource.prototype.connect = function(destination) {\r\n\tthis.destination = destination;\r\n};\r\n\r\nAjaxProgressiveSource.prototype.start = function() {\r\n\tthis.request = new XMLHttpRequest();\r\n\r\n\tthis.request.onreadystatechange = function() {\r\n\t\tif (this.request.readyState === this.request.DONE) {\r\n\t\t\tthis.fileSize = parseInt(\r\n\t\t\t\tthis.request.getResponseHeader(\"Content-Length\")\r\n\t\t\t);\r\n\t\t\tthis.loadNextChunk();\r\n\t\t}\r\n\t}.bind(this);\r\n\r\n\tthis.request.onprogress = this.onProgress.bind(this);\r\n\tthis.request.open('HEAD', this.url);\r\n\tthis.request.send();\r\n};\r\n\r\nAjaxProgressiveSource.prototype.resume = function(secondsHeadroom) {\r\n\tif (this.isLoading || !this.throttled) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Guess the worst case loading time with lots of safety margin. This is\r\n\t// somewhat arbitrary...\r\n\tvar worstCaseLoadingTime = this.loadTime * 8 + 2;\r\n\tif (worstCaseLoadingTime > secondsHeadroom) {\r\n\t\tthis.loadNextChunk();\r\n\t}\r\n};\r\n\r\nAjaxProgressiveSource.prototype.destroy = function() {\r\n\tthis.request.abort();\r\n\tthis.aborted = true;\r\n};\r\n\r\nAjaxProgressiveSource.prototype.loadNextChunk = function() {\r\n\tvar start = this.loadedSize,\r\n\t\tend = Math.min(this.loadedSize + this.chunkSize-1, this.fileSize-1);\r\n\r\n\tif (start >= this.fileSize || this.aborted) {\r\n\t\tthis.completed = true;\r\n\t\treturn;\r\n\t}\r\n\r\n\tthis.isLoading = true;\r\n\tthis.loadStartTime = JSMpeg.Now();\r\n\tthis.request = new XMLHttpRequest();\r\n\r\n\tthis.request.onreadystatechange = function() {\r\n\t\tif (\r\n\t\t\tthis.request.readyState === this.request.DONE &&\r\n\t\t\tthis.request.status >= 200 && this.request.status < 300\r\n\t\t) {\r\n\t\t\tthis.onChunkLoad(this.request.response);\r\n\t\t}\r\n\t\telse if (this.request.readyState === this.request.DONE) {\r\n\t\t\t// Retry?\r\n\t\t\tif (this.loadFails++ < 3) {\r\n\t\t\t\tthis.loadNextChunk();\r\n\t\t\t}\r\n\t\t}\r\n\t}.bind(this);\r\n\r\n\tif (start === 0) {\r\n\t\tthis.request.onprogress = this.onProgress.bind(this);\r\n\t}\r\n\r\n\tthis.request.open('GET', this.url+'?'+start+\"-\"+end);\r\n\tthis.request.setRequestHeader(\"Range\", \"bytes=\"+start+\"-\"+end);\r\n\tthis.request.responseType = \"arraybuffer\";\r\n\tthis.request.send();\r\n};\r\n\r\nAjaxProgressiveSource.prototype.onProgress = function(ev) {\r\n\tthis.progress = (ev.loaded / ev.total);\r\n};\r\n\r\nAjaxProgressiveSource.prototype.onChunkLoad = function(data) {\r\n\tthis.established = true;\r\n\tthis.progress = 1;\r\n\tthis.loadedSize += data.byteLength;\r\n\tthis.loadFails = 0;\r\n\tthis.isLoading = false;\r\n\r\n\tif (this.destination) {\r\n\t\tthis.destination.write(data);\r\n\t}\r\n\r\n\tthis.loadTime = JSMpeg.Now() - this.loadStartTime;\r\n\tif (!this.throttled) {\r\n\t\tthis.loadNextChunk();\r\n\t}\r\n};\r\n\r\nexport default AjaxProgressiveSource;\r\n","let AjaxSource = function(url, options) {\n\tthis.url = url;\n\tthis.destination = null;\n\tthis.request = null;\n\n\tthis.completed = false;\n\tthis.established = false;\n\tthis.progress = 0;\n};\n\nAjaxSource.prototype.connect = function(destination) {\n\tthis.destination = destination;\n};\n\nAjaxSource.prototype.start = function() {\n\tthis.request = new XMLHttpRequest();\n\n\tthis.request.onreadystatechange = function() {\n\t\tif (\n\t\t\tthis.request.readyState === this.request.DONE && \n\t\t\tthis.request.status === 200\n\t\t) {\n\t\t\tthis.onLoad(this.request.response);\n\t\t}\n\t}.bind(this);\n\n\tthis.request.onprogress = this.onProgress.bind(this);\n\tthis.request.open('GET', this.url);\n\tthis.request.responseType = \"arraybuffer\";\n\tthis.request.send();\n};\n\nAjaxSource.prototype.resume = function(secondsHeadroom) {\n\t// Nothing to do here\n};\n\nAjaxSource.prototype.destroy = function() {\n\tthis.request.abort();\n};\n\nAjaxSource.prototype.onProgress = function(ev) {\n\tthis.progress = (ev.loaded / ev.total);\n};\n\nAjaxSource.prototype.onLoad = function(data) {\n\tthis.established = true;\n\tthis.completed = true;\n\tthis.progress = 1;\n\n\tif (this.destination) {\n\t\tthis.destination.write(data);\n\t}\n};\n\nexport default AjaxSource;\n\n\n","let BitBuffer = function(bufferOrLength, mode) {\r\n\tif (typeof(bufferOrLength) === 'object') {\r\n\t\tthis.bytes = (bufferOrLength instanceof Uint8Array)\r\n\t\t\t? bufferOrLength \r\n\t\t\t: new Uint8Array(bufferOrLength);\r\n\r\n\t\tthis.byteLength = this.bytes.length;\r\n\t}\r\n\telse {\r\n\t\tthis.bytes = new Uint8Array(bufferOrLength || 1024*1024);\t\r\n\t\tthis.byteLength = 0;\r\n\t}\r\n\r\n\tthis.mode = mode || BitBuffer.MODE.EXPAND;\r\n\tthis.index = 0;\r\n};\r\n\r\nBitBuffer.prototype.resize = function(size) {\r\n\tvar newBytes = new Uint8Array(size);\r\n\tif (this.byteLength !== 0) {\r\n\t\tthis.byteLength = Math.min(this.byteLength, size);\r\n\t\tnewBytes.set(this.bytes, 0, this.byteLength);\r\n\t}\r\n\tthis.bytes = newBytes;\r\n\tthis.index = Math.min(this.index, this.byteLength << 3);\r\n};\r\n\r\nBitBuffer.prototype.evict = function(sizeNeeded) {\r\n\tvar bytePos = this.index >> 3,\r\n\t\tavailable = this.bytes.length - this.byteLength;\r\n\t\r\n\t// If the current index is the write position, we can simply reset both\r\n\t// to 0. Also reset (and throw away yet unread data) if we won't be able\r\n\t// to fit the new data in even after a normal eviction.\r\n\tif (\r\n\t\tthis.index === this.byteLength << 3 ||\r\n\t\tsizeNeeded > available + bytePos // emergency evac\r\n\t) {\r\n\t\tthis.byteLength = 0;\r\n\t\tthis.index = 0;\r\n\t\treturn;\r\n\t}\r\n\telse if (bytePos === 0) {\r\n\t\t// Nothing read yet - we can't evict anything\r\n\t\treturn;\r\n\t}\r\n\t\r\n\t// Some browsers don't support copyWithin() yet - we may have to do \r\n\t// it manually using set and a subarray\r\n\tif (this.bytes.copyWithin) {\r\n\t\tthis.bytes.copyWithin(0, bytePos, this.byteLength);\r\n\t}\r\n\telse {\r\n\t\tthis.bytes.set(this.bytes.subarray(bytePos, this.byteLength));\r\n\t}\r\n\r\n\tthis.byteLength = this.byteLength - bytePos;\r\n\tthis.index -= bytePos << 3;\r\n\treturn;\r\n};\r\n\r\nBitBuffer.prototype.write = function(buffers) {\r\n\tvar isArrayOfBuffers = (typeof(buffers[0]) === 'object'),\r\n\t\ttotalLength = 0,\r\n\t\tavailable = this.bytes.length - this.byteLength;\r\n\r\n\t// Calculate total byte length\r\n\tif (isArrayOfBuffers) {\r\n\t\tvar totalLength = 0;\r\n\t\tfor (var i = 0; i < buffers.length; i++) {\r\n\t\t\ttotalLength += buffers[i].byteLength;\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\ttotalLength = buffers.byteLength;\r\n\t}\r\n\r\n\t// Do we need to resize or evict?\r\n\tif (totalLength > available) {\r\n\t\tif (this.mode === BitBuffer.MODE.EXPAND) {\r\n\t\t\tvar newSize = Math.max(\r\n\t\t\t\tthis.bytes.length * 2,\r\n\t\t\t\ttotalLength - available\r\n\t\t\t);\r\n\t\t\tthis.resize(newSize)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.evict(totalLength);\r\n\t\t}\r\n\t}\r\n\r\n\tif (isArrayOfBuffers) {\r\n\t\tfor (var i = 0; i < buffers.length; i++) {\r\n\t\t\tthis.appendSingleBuffer(buffers[i]);\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\tthis.appendSingleBuffer(buffers);\r\n\t}\r\n};\r\n\r\nBitBuffer.prototype.appendSingleBuffer = function(buffer) {\r\n\tbuffer = buffer instanceof Uint8Array\r\n\t\t? buffer \r\n\t\t: new Uint8Array(buffer);\r\n\t\r\n\tthis.bytes.set(buffer, this.byteLength);\r\n\tthis.byteLength += buffer.length;\r\n};\r\n\r\nBitBuffer.prototype.findNextStartCode = function() {\t\r\n\tfor (var i = (this.index+7 >> 3); i < this.byteLength; i++) {\r\n\t\tif(\r\n\t\t\tthis.bytes[i] == 0x00 &&\r\n\t\t\tthis.bytes[i+1] == 0x00 &&\r\n\t\t\tthis.bytes[i+2] == 0x01\r\n\t\t) {\r\n\t\t\tthis.index = (i+4) << 3;\r\n\t\t\treturn this.bytes[i+3];\r\n\t\t}\r\n\t}\r\n\tthis.index = (this.byteLength << 3);\r\n\treturn -1;\r\n};\r\n\r\nBitBuffer.prototype.findStartCode = function(code) {\r\n\tvar current = 0;\r\n\twhile (true) {\r\n\t\tcurrent = this.findNextStartCode();\r\n\t\tif (current === code || current === -1) {\r\n\t\t\treturn current;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n};\r\n\r\nBitBuffer.prototype.nextBytesAreStartCode = function() {\r\n\tvar i = (this.index+7 >> 3);\r\n\treturn (\r\n\t\ti >= this.byteLength || (\r\n\t\t\tthis.bytes[i] == 0x00 && \r\n\t\t\tthis.bytes[i+1] == 0x00 &&\r\n\t\t\tthis.bytes[i+2] == 0x01\r\n\t\t)\r\n\t);\r\n};\r\n\r\nBitBuffer.prototype.peek = function(count) {\r\n\tvar offset = this.index;\r\n\tvar value = 0;\r\n\twhile (count) {\r\n\t\tvar currentByte = this.bytes[offset >> 3],\r\n\t\t\tremaining = 8 - (offset & 7), // remaining bits in byte\r\n\t\t\tread = remaining < count ? remaining : count, // bits in this run\r\n\t\t\tshift = remaining - read,\r\n\t\t\tmask = (0xff >> (8-read));\r\n\r\n\t\tvalue = (value << read) | ((currentByte & (mask << shift)) >> shift);\r\n\r\n\t\toffset += read;\r\n\t\tcount -= read;\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nBitBuffer.prototype.read = function(count) {\r\n\tvar value = this.peek(count);\r\n\tthis.index += count;\r\n\treturn value;\r\n};\r\n\r\nBitBuffer.prototype.skip = function(count) {\r\n\treturn (this.index += count);\r\n};\r\n\r\nBitBuffer.prototype.rewind = function(count) {\r\n\tthis.index = Math.max(this.index - count, 0);\r\n};\r\n\r\nBitBuffer.prototype.has = function(count) {\r\n\treturn ((this.byteLength << 3) - this.index) >= count;\r\n};\r\n\r\nBitBuffer.MODE = {\r\n\tEVICT: 1,\r\n\tEXPAND: 2\r\n};\r\n\r\nexport default BitBuffer;\r\n\r\n\r\n","import JSMpeg from '../';\r\n\r\nlet CanvasRenderer = function (options) {\r\n  this.canvas = options.canvas || document.createElement('canvas');\r\n  this.width = this.canvas.width;\r\n  this.height = this.canvas.height;\r\n  this.enabled = true;\r\n\r\n  this.context = this.canvas.getContext('2d');\r\n};\r\n\r\nCanvasRenderer.prototype.destroy = function () {\r\n  // Nothing to do here\r\n};\r\n\r\nCanvasRenderer.prototype.resize = function (width, height) {\r\n  this.width = width | 0;\r\n  this.height = height | 0;\r\n\r\n  this.canvas.width = this.width;\r\n  this.canvas.height = this.height;\r\n\r\n  this.imageData = this.context.getImageData(0, 0, this.width, this.height);\r\n  JSMpeg.Fill(this.imageData.data, 255);\r\n};\r\n\r\nCanvasRenderer.prototype.renderProgress = function (progress) {\r\n  var\r\n    w = this.canvas.width,\r\n    h = this.canvas.height,\r\n    ctx = this.context;\r\n\r\n  ctx.fillStyle = '#222';\r\n  ctx.fillRect(0, 0, w, h);\r\n  ctx.fillStyle = '#fff';\r\n  ctx.fillRect(0, h - h * progress, w, h * progress);\r\n};\r\n\r\nCanvasRenderer.prototype.render = function (y, cb, cr) {\r\n  this.YCbCrToRGBA(y, cb, cr, this.imageData.data);\r\n  this.context.putImageData(this.imageData, 0, 0);\r\n};\r\n\r\nCanvasRenderer.prototype.YCbCrToRGBA = function (y, cb, cr, rgba) {\r\n  if (!this.enabled) {\r\n    return;\r\n  }\r\n\r\n  // Chroma values are the same for each block of 4 pixels, so we proccess\r\n  // 2 lines at a time, 2 neighboring pixels each.\r\n  // I wish we could use 32bit writes to the RGBA buffer instead of writing\r\n  // each byte separately, but we need the automatic clamping of the RGBA\r\n  // buffer.\r\n\r\n  var w = ((this.width + 15) >> 4) << 4,\r\n    w2 = w >> 1;\r\n\r\n  var yIndex1 = 0,\r\n    yIndex2 = w,\r\n    yNext2Lines = w + (w - this.width);\r\n\r\n  var cIndex = 0,\r\n    cNextLine = w2 - (this.width >> 1);\r\n\r\n  var rgbaIndex1 = 0,\r\n    rgbaIndex2 = this.width * 4,\r\n    rgbaNext2Lines = this.width * 4;\r\n\r\n  var cols = this.width >> 1,\r\n    rows = this.height >> 1;\r\n\r\n  var ccb, ccr, r, g, b;\r\n\r\n  for (var row = 0; row < rows; row++) {\r\n    for (var col = 0; col < cols; col++) {\r\n      ccb = cb[cIndex];\r\n      ccr = cr[cIndex];\r\n      cIndex++;\r\n\r\n      r = (ccb + ((ccb * 103) >> 8)) - 179;\r\n      g = ((ccr * 88) >> 8) - 44 + ((ccb * 183) >> 8) - 91;\r\n      b = (ccr + ((ccr * 198) >> 8)) - 227;\r\n\r\n      // Line 1\r\n      var y1 = y[yIndex1++];\r\n      var y2 = y[yIndex1++];\r\n      rgba[rgbaIndex1] = y1 + r;\r\n      rgba[rgbaIndex1 + 1] = y1 - g;\r\n      rgba[rgbaIndex1 + 2] = y1 + b;\r\n      rgba[rgbaIndex1 + 4] = y2 + r;\r\n      rgba[rgbaIndex1 + 5] = y2 - g;\r\n      rgba[rgbaIndex1 + 6] = y2 + b;\r\n      rgbaIndex1 += 8;\r\n\r\n      // Line 2\r\n      var y3 = y[yIndex2++];\r\n      var y4 = y[yIndex2++];\r\n      rgba[rgbaIndex2] = y3 + r;\r\n      rgba[rgbaIndex2 + 1] = y3 - g;\r\n      rgba[rgbaIndex2 + 2] = y3 + b;\r\n      rgba[rgbaIndex2 + 4] = y4 + r;\r\n      rgba[rgbaIndex2 + 5] = y4 - g;\r\n      rgba[rgbaIndex2 + 6] = y4 + b;\r\n      rgbaIndex2 += 8;\r\n    }\r\n\r\n    yIndex1 += yNext2Lines;\r\n    yIndex2 += yNext2Lines;\r\n    rgbaIndex1 += rgbaNext2Lines;\r\n    rgbaIndex2 += rgbaNext2Lines;\r\n    cIndex += cNextLine;\r\n  }\r\n};\r\n\r\nexport default CanvasRenderer;\r\n","let BaseDecoder = function(options) {\r\n\tthis.destination = null;\r\n\tthis.canPlay = false;\r\n\r\n\tthis.collectTimestamps = !options.streaming;\r\n\tthis.timestamps = [];\r\n\tthis.timestampIndex = 0;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.decodedTime = 0;\r\n\r\n\tObject.defineProperty(this, 'currentTime', {get: this.getCurrentTime});\r\n};\r\n\r\nBaseDecoder.prototype.connect = function(destination) {\r\n\tthis.destination = destination;\r\n};\r\n\r\nBaseDecoder.prototype.write = function(pts, buffers) {\r\n\tif (this.collectTimestamps) {\r\n\t\tif (this.timestamps.length === 0) {\r\n\t\t\tthis.startTime = pts;\r\n\t\t\tthis.decodedTime = pts;\r\n\t\t}\r\n\t\tthis.timestamps.push({index: this.bits.byteLength << 3, time: pts});\r\n\t}\r\n\r\n\tthis.bits.write(buffers);\r\n\tthis.canPlay = true;\r\n};\r\n\r\nBaseDecoder.prototype.seek = function(time) {\r\n\tif (!this.collectTimestamps) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tthis.timestampIndex = 0;\r\n\tfor (var i = 0; i < this.timestamps.length; i++) {\r\n\t\tif (this.timestamps[i].time > time) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.timestampIndex = i;\r\n\t}\r\n\r\n\tvar ts = this.timestamps[this.timestampIndex];\r\n\tif (ts) {\r\n\t\tthis.bits.index = ts.index;\r\n\t\tthis.decodedTime = ts.time;\r\n\t}\r\n\telse {\r\n\t\tthis.bits.index = 0;\r\n\t\tthis.decodedTime = this.startTime;\r\n\t}\r\n};\r\n\r\nBaseDecoder.prototype.decode = function() {\r\n\tthis.advanceDecodedTime(0);\r\n};\r\n\r\nBaseDecoder.prototype.advanceDecodedTime = function(seconds) {\r\n\tif (this.collectTimestamps) {\r\n\t\tvar newTimestampIndex = -1;\r\n\t\tfor (var i = this.timestampIndex; i < this.timestamps.length; i++) {\r\n\t\t\tif (this.timestamps[i].index > this.bits.index) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tnewTimestampIndex = i;\r\n\t\t}\r\n\r\n\t\t// Did we find a new PTS, different from the last? If so, we don't have\r\n\t\t// to advance the decoded time manually and can instead sync it exactly\r\n\t\t// to the PTS.\r\n\t\tif (\r\n\t\t\tnewTimestampIndex !== -1 && \r\n\t\t\tnewTimestampIndex !== this.timestampIndex\r\n\t\t) {\r\n\t\t\tthis.timestampIndex = newTimestampIndex;\r\n\t\t\tthis.decodedTime = this.timestamps[this.timestampIndex].time;\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tthis.decodedTime += seconds;\r\n};\r\n\r\nBaseDecoder.prototype.getCurrentTime = function() {\r\n\treturn this.decodedTime;\r\n};\r\n\r\nexport default BaseDecoder;\r\n","// Based on kjmp2 by Martin J. Fiedler\r\n// http://keyj.emphy.de/kjmp2/\r\n\r\nimport JSMpeg from '../';\r\nimport BaseDecoder from './decoder';\r\n\r\nlet MP2 = function(options) {\r\n  JSMpeg.Decoder.Base.call(this, options);\r\n\r\n\tvar bufferSize = options.audioBufferSize || 128*1024;\r\n\tvar bufferMode = options.streaming\r\n\t\t? JSMpeg.BitBuffer.MODE.EVICT\r\n\t\t: JSMpeg.BitBuffer.MODE.EXPAND;\r\n\r\n\tthis.bits = new JSMpeg.BitBuffer(bufferSize, bufferMode);\r\n\r\n\tthis.left = new Float32Array(1152);\r\n\tthis.right = new Float32Array(1152);\r\n\tthis.sampleRate = 44100;\r\n\t\r\n\tthis.D = new Float32Array(1024);\r\n\tthis.D.set(MP2.SYNTHESIS_WINDOW, 0);\r\n\tthis.D.set(MP2.SYNTHESIS_WINDOW, 512);\r\n\tthis.V = new Float32Array(1024);\r\n\tthis.U = new Int32Array(32);\r\n\tthis.VPos = 0;\r\n\r\n\tthis.allocation = [new Array(32), new Array(32)];\r\n\tthis.scaleFactorInfo = [new Uint8Array(32), new Uint8Array(32)];\r\n\tthis.scaleFactor = [new Array(32), new Array(32)];\r\n\tthis.sample = [new Array(32), new Array(32)];\r\n\t\r\n\tfor (var j = 0; j < 2; j++) {\r\n\t\tfor (var i = 0; i < 32; i++) {\r\n\t\t\tthis.scaleFactor[j][i] = [0, 0, 0];\r\n\t\t\tthis.sample[j][i] = [0, 0, 0];\r\n\t\t}\r\n\t}\r\n};\r\n\r\nMP2.prototype = Object.create(BaseDecoder.prototype);\r\nMP2.prototype.constructor = MP2;\r\n\r\nMP2.prototype.decode = function() {\r\n\tvar pos = this.bits.index >> 3;\r\n\tif (pos >= this.bits.byteLength) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar decoded = this.decodeFrame(this.left, this.right);\r\n\tthis.bits.index = (pos + decoded) << 3;\r\n\r\n\tif (!decoded) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (this.destination) {\r\n\t\tthis.destination.play(this.sampleRate, this.left, this.right);\r\n\t}\r\n\r\n\tthis.advanceDecodedTime(this.left.length / this.sampleRate);\r\n\treturn true;\r\n};\r\n\r\nMP2.prototype.getCurrentTime = function() {\r\n\tvar enqueuedTime = this.destination ? this.destination.enqueuedTime : 0;\r\n\treturn this.decodedTime - enqueuedTime;\r\n};\r\n\r\nMP2.prototype.decodeFrame = function(left, right) {\r\n\t// Check for valid header: syncword OK, MPEG-Audio Layer 2\r\n\tvar sync = this.bits.read(11),\r\n\t\tversion = this.bits.read(2),\r\n\t\tlayer = this.bits.read(2),\r\n\t\thasCRC = !this.bits.read(1);\r\n\r\n\tif (\r\n\t\tsync !== MP2.FRAME_SYNC ||\r\n\t\tversion !== MP2.VERSION.MPEG_1 ||\r\n\t\tlayer !== MP2.LAYER.II\r\n\t) {\r\n\t\treturn 0; // Invalid header or unsupported version\r\n\t}\r\n\r\n\tvar bitrateIndex = this.bits.read(4) - 1;\r\n\tif (bitrateIndex > 13) {\r\n\t\treturn 0;  // Invalid bit rate or 'free format'\r\n\t}\r\n\r\n\tvar sampleRateIndex = this.bits.read(2);\r\n\tvar sampleRate = MP2.SAMPLE_RATE[sampleRateIndex];\r\n\tif (sampleRateIndex === 3) {\r\n\t\treturn 0; // Invalid sample rate\r\n\t}\r\n\tif (version === MP2.VERSION.MPEG_2) {\r\n\t\tsampleRateIndex += 4;\r\n\t\tbitrateIndex += 14;\r\n\t}\r\n\tvar padding = this.bits.read(1),\r\n\t\tprivat = this.bits.read(1),\r\n\t\tmode = this.bits.read(2);\r\n\r\n\t// Parse the mode_extension, set up the stereo bound\r\n\tvar bound = 0;\r\n\tif (mode === MP2.MODE.JOINT_STEREO) {\r\n\t\tbound = (this.bits.read(2) + 1) << 2;\r\n\t}\r\n\telse {\r\n\t\tthis.bits.skip(2);\r\n\t\tbound = (mode === MP2.MODE.MONO) ? 0 : 32;\r\n\t}\r\n\r\n\t// Discard the last 4 bits of the header and the CRC value, if present\r\n\tthis.bits.skip(4);\r\n\tif (hasCRC) {\r\n\t\tthis.bits.skip(16);\r\n\t}\r\n\r\n\t// Compute the frame size\r\n\tvar bitrate = MP2.BIT_RATE[bitrateIndex],\r\n\t\tsampleRate = MP2.SAMPLE_RATE[sampleRateIndex],\r\n\t\tframeSize = ((144000 * bitrate / sampleRate) + padding)|0;\r\n\t\r\n\r\n\t// Prepare the quantizer table lookups\r\n\tvar tab3 = 0;\r\n\tvar sblimit = 0;\r\n\tif (version === MP2.VERSION.MPEG_2) {\r\n\t\t// MPEG-2 (LSR)\r\n\t\ttab3 = 2;\r\n\t\tsblimit = 30;\r\n\t}\r\n\telse {\r\n\t\t// MPEG-1\r\n\t\tvar tab1 = (mode === MP2.MODE.MONO) ? 0 : 1;\r\n\t\tvar tab2 = MP2.QUANT_LUT_STEP_1[tab1][bitrateIndex];\r\n\t\ttab3 = MP2.QUANT_LUT_STEP_2[tab2][sampleRateIndex];\r\n\t\tsblimit = tab3 & 63;\r\n\t\ttab3 >>= 6;\r\n\t}\r\n\r\n\tif (bound > sblimit) {\r\n\t\tbound = sblimit;\r\n\t}\r\n\r\n\t// Read the allocation information\r\n\tfor (var sb = 0; sb < bound; sb++) {\r\n\t\tthis.allocation[0][sb] = this.readAllocation(sb, tab3);\r\n\t\tthis.allocation[1][sb] = this.readAllocation(sb, tab3);\r\n\t}\r\n\r\n\tfor (var sb = bound; sb < sblimit; sb++) {\r\n\t\tthis.allocation[0][sb] = \r\n\t\t\tthis.allocation[1][sb] =\r\n\t\t\tthis.readAllocation(sb, tab3);\r\n\t}\r\n\r\n\t// Read scale factor selector information\r\n\tvar channels = (mode === MP2.MODE.MONO) ? 1 : 2;\r\n\tfor (var sb = 0;  sb < sblimit; sb++) {\r\n\t\tfor (ch = 0;  ch < channels; ch++) {\r\n\t\t\tif (this.allocation[ch][sb]) {\r\n\t\t\t\tthis.scaleFactorInfo[ch][sb] = this.bits.read(2);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (mode === MP2.MODE.MONO) {\r\n\t\t\tthis.scaleFactorInfo[1][sb] = this.scaleFactorInfo[0][sb];\r\n\t\t}\r\n\t}\r\n\r\n\t// Read scale factors\r\n\tfor (var sb = 0;  sb < sblimit; sb++) {\r\n\t\tfor (var ch = 0;  ch < channels; ch++) {\r\n\t\t\tif (this.allocation[ch][sb]) {\r\n\t\t\t\tvar sf = this.scaleFactor[ch][sb];\r\n\t\t\t\tswitch (this.scaleFactorInfo[ch][sb]) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tsf[0] = this.bits.read(6);\r\n\t\t\t\t\t\tsf[1] = this.bits.read(6);\r\n\t\t\t\t\t\tsf[2] = this.bits.read(6);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tsf[0] =\r\n\t\t\t\t\t\tsf[1] = this.bits.read(6);\r\n\t\t\t\t\t\tsf[2] = this.bits.read(6);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tsf[0] =\r\n\t\t\t\t\t\tsf[1] =\r\n\t\t\t\t\t\tsf[2] = this.bits.read(6);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tsf[0] = this.bits.read(6);\r\n\t\t\t\t\t\tsf[1] =\r\n\t\t\t\t\t\tsf[2] = this.bits.read(6);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (mode === MP2.MODE.MONO) {\r\n\t\t\tthis.scaleFactor[1][sb][0] = this.scaleFactor[0][sb][0];\r\n\t\t\tthis.scaleFactor[1][sb][1] = this.scaleFactor[0][sb][1];\r\n\t\t\tthis.scaleFactor[1][sb][2] = this.scaleFactor[0][sb][2];\r\n\t\t}\r\n\t}\r\n\r\n\t// Coefficient input and reconstruction\r\n\tvar outPos = 0;\r\n\tfor (var part = 0; part < 3; part++) {\r\n\t\tfor (var granule = 0; granule < 4; granule++) {\r\n\r\n\t\t\t// Read the samples\r\n\t\t\tfor (var sb = 0; sb < bound; sb++) {\r\n\t\t\t\tthis.readSamples(0, sb, part);\r\n\t\t\t\tthis.readSamples(1, sb, part);\r\n\t\t\t}\r\n\t\t\tfor (var sb = bound; sb < sblimit; sb++) {\r\n\t\t\t\tthis.readSamples(0, sb, part);\r\n\t\t\t\tthis.sample[1][sb][0] = this.sample[0][sb][0];\r\n\t\t\t\tthis.sample[1][sb][1] = this.sample[0][sb][1];\r\n\t\t\t\tthis.sample[1][sb][2] = this.sample[0][sb][2];\r\n\t\t\t}\r\n\t\t\tfor (var sb = sblimit; sb < 32; sb++) {\r\n\t\t\t\tthis.sample[0][sb][0] = 0;\r\n\t\t\t\tthis.sample[0][sb][1] = 0;\r\n\t\t\t\tthis.sample[0][sb][2] = 0;\r\n\t\t\t\tthis.sample[1][sb][0] = 0;\r\n\t\t\t\tthis.sample[1][sb][1] = 0;\r\n\t\t\t\tthis.sample[1][sb][2] = 0;\r\n\t\t\t}\r\n\r\n\t\t\t// Synthesis loop\r\n\t\t\tfor (var p = 0; p < 3; p++) {\r\n\t\t\t\t// Shifting step\r\n\t\t\t\tthis.VPos = (this.VPos - 64) & 1023;\r\n\r\n\t\t\t\tfor (var ch = 0;  ch < 2; ch++) {\r\n\t\t\t\t\tMP2.MatrixTransform(this.sample[ch], p, this.V, this.VPos);\r\n\r\n\t\t\t\t\t// Build U, windowing, calculate output\r\n          JSMpeg.Fill(this.U, 0);\r\n\r\n\t\t\t\t\tvar dIndex = 512 - (this.VPos >> 1);\r\n\t\t\t\t\tvar vIndex = (this.VPos % 128) >> 1;\r\n\t\t\t\t\twhile (vIndex < 1024) {\r\n\t\t\t\t\t\tfor (var i = 0; i < 32; ++i) {\r\n\t\t\t\t\t\t\tthis.U[i] += this.D[dIndex++] * this.V[vIndex++];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvIndex += 128-32;\r\n\t\t\t\t\t\tdIndex += 64-32;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvIndex = (128-32 + 1024) - vIndex;\r\n\t\t\t\t\tdIndex -= (512 - 32);\r\n\t\t\t\t\twhile (vIndex < 1024) {\r\n\t\t\t\t\t\tfor (var i = 0; i < 32; ++i) {\r\n\t\t\t\t\t\t\tthis.U[i] += this.D[dIndex++] * this.V[vIndex++];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvIndex += 128-32;\r\n\t\t\t\t\t\tdIndex += 64-32;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Output samples\r\n\t\t\t\t\tvar outChannel = ch === 0 ? left : right;\r\n\t\t\t\t\tfor (var j = 0; j < 32; j++) {\r\n\t\t\t\t\t\toutChannel[outPos + j] = this.U[j] / 2147418112;\r\n\t\t\t\t\t}\r\n\t\t\t\t} // End of synthesis channel loop\r\n\t\t\t\toutPos += 32;\r\n\t\t\t} // End of synthesis sub-block loop\r\n\r\n\t\t} // Decoding of the granule finished\r\n\t}\r\n\r\n\tthis.sampleRate = sampleRate;\r\n\treturn frameSize;\r\n};\r\n\r\nMP2.prototype.readAllocation = function(sb, tab3) {\r\n\tvar tab4 = MP2.QUANT_LUT_STEP_3[tab3][sb];\r\n\tvar qtab = MP2.QUANT_LUT_STEP4[tab4 & 15][this.bits.read(tab4 >> 4)];\r\n\treturn qtab ? (MP2.QUANT_TAB[qtab - 1]) : 0;\r\n};\r\n\r\nMP2.prototype.readSamples = function(ch, sb, part) {\r\n\tvar q = this.allocation[ch][sb],\r\n\t\tsf = this.scaleFactor[ch][sb][part],\r\n\t\tsample = this.sample[ch][sb],\r\n\t\tval = 0;\r\n\r\n\tif (!q) {\r\n\t\t// No bits allocated for this subband\r\n\t\tsample[0] = sample[1] = sample[2] = 0;\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Resolve scalefactor\r\n\tif (sf === 63) {\r\n\t\tsf = 0;\r\n\t}\r\n\telse {\r\n\t\tvar shift = (sf / 3)|0;\r\n\t\tsf = (MP2.SCALEFACTOR_BASE[sf % 3] + ((1 << shift) >> 1)) >> shift;\r\n\t}\r\n\r\n\t// Decode samples\r\n\tvar adj = q.levels;\r\n\tif (q.group) {\r\n\t\t// Decode grouped samples\r\n\t\tval = this.bits.read(q.bits);\r\n\t\tsample[0] = val % adj;\r\n\t\tval = (val / adj)|0;\r\n\t\tsample[1] = val % adj;\r\n\t\tsample[2] = (val / adj)|0;\r\n\t}\r\n\telse {\r\n\t\t// Decode direct samples\r\n\t\tsample[0] = this.bits.read(q.bits);\r\n\t\tsample[1] = this.bits.read(q.bits);\r\n\t\tsample[2] = this.bits.read(q.bits);\r\n\t}\r\n\r\n\t// Postmultiply samples\r\n\tvar scale = (65536 / (adj + 1))|0;\r\n\tadj = ((adj + 1) >> 1) - 1;\r\n\r\n\tval = (adj - sample[0]) * scale;\r\n\tsample[0] = (val * (sf >> 12) + ((val * (sf & 4095) + 2048) >> 12)) >> 12;\r\n\r\n\tval = (adj - sample[1]) * scale;\r\n\tsample[1] = (val * (sf >> 12) + ((val * (sf & 4095) + 2048) >> 12)) >> 12;\r\n\r\n\tval = (adj - sample[2]) * scale;\r\n\tsample[2] = (val * (sf >> 12) + ((val * (sf & 4095) + 2048) >> 12)) >> 12;\r\n};\r\n\r\nMP2.MatrixTransform = function(s, ss, d, dp) {\r\n\tvar t01, t02, t03, t04, t05, t06, t07, t08, t09, t10, t11, t12,\r\n\t\tt13, t14, t15, t16, t17, t18, t19, t20, t21, t22, t23, t24,\r\n\t\tt25, t26, t27, t28, t29, t30, t31, t32, t33;\r\n\r\n\tt01 = s[ 0][ss] + s[31][ss]; t02 = (s[ 0][ss] - s[31][ss]) * 0.500602998235;\r\n\tt03 = s[ 1][ss] + s[30][ss]; t04 = (s[ 1][ss] - s[30][ss]) * 0.505470959898;\r\n\tt05 = s[ 2][ss] + s[29][ss]; t06 = (s[ 2][ss] - s[29][ss]) * 0.515447309923;\r\n\tt07 = s[ 3][ss] + s[28][ss]; t08 = (s[ 3][ss] - s[28][ss]) * 0.53104259109;\r\n\tt09 = s[ 4][ss] + s[27][ss]; t10 = (s[ 4][ss] - s[27][ss]) * 0.553103896034;\r\n\tt11 = s[ 5][ss] + s[26][ss]; t12 = (s[ 5][ss] - s[26][ss]) * 0.582934968206;\r\n\tt13 = s[ 6][ss] + s[25][ss]; t14 = (s[ 6][ss] - s[25][ss]) * 0.622504123036;\r\n\tt15 = s[ 7][ss] + s[24][ss]; t16 = (s[ 7][ss] - s[24][ss]) * 0.674808341455;\r\n\tt17 = s[ 8][ss] + s[23][ss]; t18 = (s[ 8][ss] - s[23][ss]) * 0.744536271002;\r\n\tt19 = s[ 9][ss] + s[22][ss]; t20 = (s[ 9][ss] - s[22][ss]) * 0.839349645416;\r\n\tt21 = s[10][ss] + s[21][ss]; t22 = (s[10][ss] - s[21][ss]) * 0.972568237862;\r\n\tt23 = s[11][ss] + s[20][ss]; t24 = (s[11][ss] - s[20][ss]) * 1.16943993343;\r\n\tt25 = s[12][ss] + s[19][ss]; t26 = (s[12][ss] - s[19][ss]) * 1.48416461631;\r\n\tt27 = s[13][ss] + s[18][ss]; t28 = (s[13][ss] - s[18][ss]) * 2.05778100995;\r\n\tt29 = s[14][ss] + s[17][ss]; t30 = (s[14][ss] - s[17][ss]) * 3.40760841847;\r\n\tt31 = s[15][ss] + s[16][ss]; t32 = (s[15][ss] - s[16][ss]) * 10.1900081235;\r\n\r\n\tt33 = t01 + t31; t31 = (t01 - t31) * 0.502419286188;\r\n\tt01 = t03 + t29; t29 = (t03 - t29) * 0.52249861494;\r\n\tt03 = t05 + t27; t27 = (t05 - t27) * 0.566944034816;\r\n\tt05 = t07 + t25; t25 = (t07 - t25) * 0.64682178336;\r\n\tt07 = t09 + t23; t23 = (t09 - t23) * 0.788154623451;\r\n\tt09 = t11 + t21; t21 = (t11 - t21) * 1.06067768599;\r\n\tt11 = t13 + t19; t19 = (t13 - t19) * 1.72244709824;\r\n\tt13 = t15 + t17; t17 = (t15 - t17) * 5.10114861869;\r\n\tt15 = t33 + t13; t13 = (t33 - t13) * 0.509795579104;\r\n\tt33 = t01 + t11; t01 = (t01 - t11) * 0.601344886935;\r\n\tt11 = t03 + t09; t09 = (t03 - t09) * 0.899976223136;\r\n\tt03 = t05 + t07; t07 = (t05 - t07) * 2.56291544774;\r\n\tt05 = t15 + t03; t15 = (t15 - t03) * 0.541196100146;\r\n\tt03 = t33 + t11; t11 = (t33 - t11) * 1.30656296488;\r\n\tt33 = t05 + t03; t05 = (t05 - t03) * 0.707106781187;\r\n\tt03 = t15 + t11; t15 = (t15 - t11) * 0.707106781187;\r\n\tt03 += t15;\r\n\tt11 = t13 + t07; t13 = (t13 - t07) * 0.541196100146;\r\n\tt07 = t01 + t09; t09 = (t01 - t09) * 1.30656296488;\r\n\tt01 = t11 + t07; t07 = (t11 - t07) * 0.707106781187;\r\n\tt11 = t13 + t09; t13 = (t13 - t09) * 0.707106781187;\r\n\tt11 += t13; t01 += t11; \r\n\tt11 += t07; t07 += t13;\r\n\tt09 = t31 + t17; t31 = (t31 - t17) * 0.509795579104;\r\n\tt17 = t29 + t19; t29 = (t29 - t19) * 0.601344886935;\r\n\tt19 = t27 + t21; t21 = (t27 - t21) * 0.899976223136;\r\n\tt27 = t25 + t23; t23 = (t25 - t23) * 2.56291544774;\r\n\tt25 = t09 + t27; t09 = (t09 - t27) * 0.541196100146;\r\n\tt27 = t17 + t19; t19 = (t17 - t19) * 1.30656296488;\r\n\tt17 = t25 + t27; t27 = (t25 - t27) * 0.707106781187;\r\n\tt25 = t09 + t19; t19 = (t09 - t19) * 0.707106781187;\r\n\tt25 += t19;\r\n\tt09 = t31 + t23; t31 = (t31 - t23) * 0.541196100146;\r\n\tt23 = t29 + t21; t21 = (t29 - t21) * 1.30656296488;\r\n\tt29 = t09 + t23; t23 = (t09 - t23) * 0.707106781187;\r\n\tt09 = t31 + t21; t31 = (t31 - t21) * 0.707106781187;\r\n\tt09 += t31;\tt29 += t09;\tt09 += t23;\tt23 += t31;\r\n\tt17 += t29;\tt29 += t25;\tt25 += t09;\tt09 += t27;\r\n\tt27 += t23;\tt23 += t19; t19 += t31;\t\r\n\tt21 = t02 + t32; t02 = (t02 - t32) * 0.502419286188;\r\n\tt32 = t04 + t30; t04 = (t04 - t30) * 0.52249861494;\r\n\tt30 = t06 + t28; t28 = (t06 - t28) * 0.566944034816;\r\n\tt06 = t08 + t26; t08 = (t08 - t26) * 0.64682178336;\r\n\tt26 = t10 + t24; t10 = (t10 - t24) * 0.788154623451;\r\n\tt24 = t12 + t22; t22 = (t12 - t22) * 1.06067768599;\r\n\tt12 = t14 + t20; t20 = (t14 - t20) * 1.72244709824;\r\n\tt14 = t16 + t18; t16 = (t16 - t18) * 5.10114861869;\r\n\tt18 = t21 + t14; t14 = (t21 - t14) * 0.509795579104;\r\n\tt21 = t32 + t12; t32 = (t32 - t12) * 0.601344886935;\r\n\tt12 = t30 + t24; t24 = (t30 - t24) * 0.899976223136;\r\n\tt30 = t06 + t26; t26 = (t06 - t26) * 2.56291544774;\r\n\tt06 = t18 + t30; t18 = (t18 - t30) * 0.541196100146;\r\n\tt30 = t21 + t12; t12 = (t21 - t12) * 1.30656296488;\r\n\tt21 = t06 + t30; t30 = (t06 - t30) * 0.707106781187;\r\n\tt06 = t18 + t12; t12 = (t18 - t12) * 0.707106781187;\r\n\tt06 += t12;\r\n\tt18 = t14 + t26; t26 = (t14 - t26) * 0.541196100146;\r\n\tt14 = t32 + t24; t24 = (t32 - t24) * 1.30656296488;\r\n\tt32 = t18 + t14; t14 = (t18 - t14) * 0.707106781187;\r\n\tt18 = t26 + t24; t24 = (t26 - t24) * 0.707106781187;\r\n\tt18 += t24; t32 += t18; \r\n\tt18 += t14; t26 = t14 + t24;\r\n\tt14 = t02 + t16; t02 = (t02 - t16) * 0.509795579104;\r\n\tt16 = t04 + t20; t04 = (t04 - t20) * 0.601344886935;\r\n\tt20 = t28 + t22; t22 = (t28 - t22) * 0.899976223136;\r\n\tt28 = t08 + t10; t10 = (t08 - t10) * 2.56291544774;\r\n\tt08 = t14 + t28; t14 = (t14 - t28) * 0.541196100146;\r\n\tt28 = t16 + t20; t20 = (t16 - t20) * 1.30656296488;\r\n\tt16 = t08 + t28; t28 = (t08 - t28) * 0.707106781187;\r\n\tt08 = t14 + t20; t20 = (t14 - t20) * 0.707106781187;\r\n\tt08 += t20;\r\n\tt14 = t02 + t10; t02 = (t02 - t10) * 0.541196100146;\r\n\tt10 = t04 + t22; t22 = (t04 - t22) * 1.30656296488;\r\n\tt04 = t14 + t10; t10 = (t14 - t10) * 0.707106781187;\r\n\tt14 = t02 + t22; t02 = (t02 - t22) * 0.707106781187;\r\n\tt14 += t02;\tt04 += t14;\tt14 += t10;\tt10 += t02;\r\n\tt16 += t04;\tt04 += t08;\tt08 += t14;\tt14 += t28;\r\n\tt28 += t10;\tt10 += t20;\tt20 += t02;\tt21 += t16;\r\n\tt16 += t32;\tt32 += t04;\tt04 += t06;\tt06 += t08;\r\n\tt08 += t18;\tt18 += t14;\tt14 += t30;\tt30 += t28;\r\n\tt28 += t26;\tt26 += t10;\tt10 += t12;\tt12 += t20;\r\n\tt20 += t24;\tt24 += t02;\r\n\r\n\td[dp + 48] = -t33;\r\n\td[dp + 49] = d[dp + 47] = -t21;\r\n\td[dp + 50] = d[dp + 46] = -t17;\r\n\td[dp + 51] = d[dp + 45] = -t16;\r\n\td[dp + 52] = d[dp + 44] = -t01;\r\n\td[dp + 53] = d[dp + 43] = -t32;\r\n\td[dp + 54] = d[dp + 42] = -t29;\r\n\td[dp + 55] = d[dp + 41] = -t04;\r\n\td[dp + 56] = d[dp + 40] = -t03;\r\n\td[dp + 57] = d[dp + 39] = -t06;\r\n\td[dp + 58] = d[dp + 38] = -t25;\r\n\td[dp + 59] = d[dp + 37] = -t08;\r\n\td[dp + 60] = d[dp + 36] = -t11;\r\n\td[dp + 61] = d[dp + 35] = -t18;\r\n\td[dp + 62] = d[dp + 34] = -t09;\r\n\td[dp + 63] = d[dp + 33] = -t14;\r\n\td[dp + 32] = -t05;\r\n\td[dp +  0] = t05; d[dp + 31] = -t30;\r\n\td[dp +  1] = t30; d[dp + 30] = -t27;\r\n\td[dp +  2] = t27; d[dp + 29] = -t28;\r\n\td[dp +  3] = t28; d[dp + 28] = -t07;\r\n\td[dp +  4] = t07; d[dp + 27] = -t26;\r\n\td[dp +  5] = t26; d[dp + 26] = -t23;\r\n\td[dp +  6] = t23; d[dp + 25] = -t10;\r\n\td[dp +  7] = t10; d[dp + 24] = -t15;\r\n\td[dp +  8] = t15; d[dp + 23] = -t12;\r\n\td[dp +  9] = t12; d[dp + 22] = -t19;\r\n\td[dp + 10] = t19; d[dp + 21] = -t20;\r\n\td[dp + 11] = t20; d[dp + 20] = -t13;\r\n\td[dp + 12] = t13; d[dp + 19] = -t24;\r\n\td[dp + 13] = t24; d[dp + 18] = -t31;\r\n\td[dp + 14] = t31; d[dp + 17] = -t02;\r\n\td[dp + 15] = t02; d[dp + 16] =  0.0;\r\n};\r\n\r\nMP2.FRAME_SYNC = 0x7ff;\r\n\r\nMP2.VERSION = {\r\n\tMPEG_2_5: 0x0,\r\n\tMPEG_2: 0x2,\r\n\tMPEG_1: 0x3\r\n};\r\n\r\nMP2.LAYER = {\r\n\tIII: 0x1,\r\n\tII: 0x2,\r\n\tI: 0x3\r\n};\r\n\r\nMP2.MODE = {\r\n\tSTEREO: 0x0,\r\n\tJOINT_STEREO: 0x1,\r\n\tDUAL_CHANNEL: 0x2,\r\n\tMONO: 0x3\r\n};\r\n\r\nMP2.SAMPLE_RATE = new Uint16Array([\r\n\t44100, 48000, 32000, 0, // MPEG-1\r\n\t22050, 24000, 16000, 0  // MPEG-2\r\n]);\r\n\r\nMP2.BIT_RATE = new Uint16Array([\r\n\t32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, // MPEG-1\r\n\t 8, 16, 24, 32, 40, 48,  56,  64,  80,  96, 112, 128, 144, 160  // MPEG-2\r\n]);\r\n\r\nMP2.SCALEFACTOR_BASE = new Uint32Array([\r\n\t0x02000000, 0x01965FEA, 0x01428A30\r\n]);\r\n\r\nMP2.SYNTHESIS_WINDOW = new Float32Array([\r\n\t     0.0,     -0.5,     -0.5,     -0.5,     -0.5,     -0.5,\r\n\t    -0.5,     -1.0,     -1.0,     -1.0,     -1.0,     -1.5,\r\n\t    -1.5,     -2.0,     -2.0,     -2.5,     -2.5,     -3.0,\r\n\t    -3.5,     -3.5,     -4.0,     -4.5,     -5.0,     -5.5,\r\n\t    -6.5,     -7.0,     -8.0,     -8.5,     -9.5,    -10.5,\r\n\t   -12.0,    -13.0,    -14.5,    -15.5,    -17.5,    -19.0,\r\n\t   -20.5,    -22.5,    -24.5,    -26.5,    -29.0,    -31.5,\r\n\t   -34.0,    -36.5,    -39.5,    -42.5,    -45.5,    -48.5,\r\n\t   -52.0,    -55.5,    -58.5,    -62.5,    -66.0,    -69.5,\r\n\t   -73.5,    -77.0,    -80.5,    -84.5,    -88.0,    -91.5,\r\n\t   -95.0,    -98.0,   -101.0,   -104.0,    106.5,    109.0,\r\n\t   111.0,    112.5,    113.5,    114.0,    114.0,    113.5,\r\n\t   112.0,    110.5,    107.5,    104.0,    100.0,     94.5,\r\n\t    88.5,     81.5,     73.0,     63.5,     53.0,     41.5,\r\n\t    28.5,     14.5,     -1.0,    -18.0,    -36.0,    -55.5,\r\n\t   -76.5,    -98.5,   -122.0,   -147.0,   -173.5,   -200.5,\r\n\t  -229.5,   -259.5,   -290.5,   -322.5,   -355.5,   -389.5,\r\n\t  -424.0,   -459.5,   -495.5,   -532.0,   -568.5,   -605.0,\r\n\t  -641.5,   -678.0,   -714.0,   -749.0,   -783.5,   -817.0,\r\n\t  -849.0,   -879.5,   -908.5,   -935.0,   -959.5,   -981.0,\r\n\t -1000.5,  -1016.0,  -1028.5,  -1037.5,  -1042.5,  -1043.5,\r\n\t -1040.0,  -1031.5,   1018.5,   1000.0,    976.0,    946.5,\r\n\t   911.0,    869.5,    822.0,    767.5,    707.0,    640.0,\r\n\t   565.5,    485.0,    397.0,    302.5,    201.0,     92.5,\r\n\t   -22.5,   -144.0,   -272.5,   -407.0,   -547.5,   -694.0,\r\n\t  -846.0,  -1003.0,  -1165.0,  -1331.5,  -1502.0,  -1675.5,\r\n\t -1852.5,  -2031.5,  -2212.5,  -2394.0,  -2576.5,  -2758.5,\r\n\t -2939.5,  -3118.5,  -3294.5,  -3467.5,  -3635.5,  -3798.5,\r\n\t -3955.0,  -4104.5,  -4245.5,  -4377.5,  -4499.0,  -4609.5,\r\n\t -4708.0,  -4792.5,  -4863.5,  -4919.0,  -4958.0,  -4979.5,\r\n\t -4983.0,  -4967.5,  -4931.5,  -4875.0,  -4796.0,  -4694.5,\r\n\t -4569.5,  -4420.0,  -4246.0,  -4046.0,  -3820.0,  -3567.0,\r\n\t  3287.0,   2979.5,   2644.0,   2280.5,   1888.0,   1467.5,\r\n\t  1018.5,    541.0,     35.0,   -499.0,  -1061.0,  -1650.0,\r\n\t -2266.5,  -2909.0,  -3577.0,  -4270.0,  -4987.5,  -5727.5,\r\n\t -6490.0,  -7274.0,  -8077.5,  -8899.5,  -9739.0, -10594.5,\r\n\t-11464.5, -12347.0, -13241.0, -14144.5, -15056.0, -15973.5,\r\n\t-16895.5, -17820.0, -18744.5, -19668.0, -20588.0, -21503.0,\r\n\t-22410.5, -23308.5, -24195.0, -25068.5, -25926.5, -26767.0,\r\n\t-27589.0, -28389.0, -29166.5, -29919.0, -30644.5, -31342.0,\r\n\t-32009.5, -32645.0, -33247.0, -33814.5, -34346.0, -34839.5,\r\n\t-35295.0, -35710.0, -36084.5, -36417.5, -36707.5, -36954.0,\r\n\t-37156.5, -37315.0, -37428.0, -37496.0,  37519.0,  37496.0,\r\n\t 37428.0,  37315.0,  37156.5,  36954.0,  36707.5,  36417.5,\r\n\t 36084.5,  35710.0,  35295.0,  34839.5,  34346.0,  33814.5,\r\n\t 33247.0,  32645.0,  32009.5,  31342.0,  30644.5,  29919.0,\r\n\t 29166.5,  28389.0,  27589.0,  26767.0,  25926.5,  25068.5,\r\n\t 24195.0,  23308.5,  22410.5,  21503.0,  20588.0,  19668.0,\r\n\t 18744.5,  17820.0,  16895.5,  15973.5,  15056.0,  14144.5,\r\n\t 13241.0,  12347.0,  11464.5,  10594.5,   9739.0,   8899.5,\r\n\t  8077.5,   7274.0,   6490.0,   5727.5,   4987.5,   4270.0,\r\n\t  3577.0,   2909.0,   2266.5,   1650.0,   1061.0,    499.0,\r\n\t   -35.0,   -541.0,  -1018.5,  -1467.5,  -1888.0,  -2280.5,\r\n\t -2644.0,  -2979.5,   3287.0,   3567.0,   3820.0,   4046.0,\r\n\t  4246.0,   4420.0,   4569.5,   4694.5,   4796.0,   4875.0,\r\n\t  4931.5,   4967.5,   4983.0,   4979.5,   4958.0,   4919.0,\r\n\t  4863.5,   4792.5,   4708.0,   4609.5,   4499.0,   4377.5,\r\n\t  4245.5,   4104.5,   3955.0,   3798.5,   3635.5,   3467.5,\r\n\t  3294.5,   3118.5,   2939.5,   2758.5,   2576.5,   2394.0,\r\n\t  2212.5,   2031.5,   1852.5,   1675.5,   1502.0,   1331.5,\r\n\t  1165.0,   1003.0,    846.0,    694.0,    547.5,    407.0,\r\n\t   272.5,    144.0,     22.5,    -92.5,   -201.0,   -302.5,\r\n\t  -397.0,   -485.0,   -565.5,   -640.0,   -707.0,   -767.5,\r\n\t  -822.0,   -869.5,   -911.0,   -946.5,   -976.0,  -1000.0,\r\n\t  1018.5,   1031.5,   1040.0,   1043.5,   1042.5,   1037.5,\r\n\t  1028.5,   1016.0,   1000.5,    981.0,    959.5,    935.0,\r\n\t   908.5,    879.5,    849.0,    817.0,    783.5,    749.0,\r\n\t   714.0,    678.0,    641.5,    605.0,    568.5,    532.0,\r\n\t   495.5,    459.5,    424.0,    389.5,    355.5,    322.5,\r\n\t   290.5,    259.5,    229.5,    200.5,    173.5,    147.0,\r\n\t   122.0,     98.5,     76.5,     55.5,     36.0,     18.0,\r\n\t\t1.0,    -14.5,    -28.5,    -41.5,    -53.0,    -63.5,\r\n\t   -73.0,    -81.5,    -88.5,    -94.5,   -100.0,   -104.0,\r\n\t  -107.5,   -110.5,   -112.0,   -113.5,   -114.0,   -114.0,\r\n\t  -113.5,   -112.5,   -111.0,   -109.0,    106.5,    104.0,\r\n\t   101.0,     98.0,     95.0,     91.5,     88.0,     84.5,\r\n\t    80.5,     77.0,     73.5,     69.5,     66.0,     62.5,\r\n\t    58.5,     55.5,     52.0,     48.5,     45.5,     42.5,\r\n\t    39.5,     36.5,     34.0,     31.5,     29.0,     26.5,\r\n\t    24.5,     22.5,     20.5,     19.0,     17.5,     15.5,\r\n\t    14.5,     13.0,     12.0,     10.5,      9.5,      8.5,\r\n\t     8.0,      7.0,      6.5,      5.5,      5.0,      4.5,\r\n\t     4.0,      3.5,      3.5,      3.0,      2.5,      2.5,\r\n\t     2.0,      2.0,      1.5,      1.5,      1.0,      1.0,\r\n\t     1.0,      1.0,      0.5,      0.5,      0.5,      0.5,\r\n\t     0.5,      0.5\r\n]);\r\n\r\n// Quantizer lookup, step 1: bitrate classes\r\nMP2.QUANT_LUT_STEP_1 = [\r\n \t// 32, 48, 56, 64, 80, 96,112,128,160,192,224,256,320,384 <- bitrate\r\n\t[   0,  0,  1,  1,  1,  2,  2,  2,  2,  2,  2,  2,  2,  2], // mono\r\n\t// 16, 24, 28, 32, 40, 48, 56, 64, 80, 96,112,128,160,192 <- bitrate / chan\r\n\t[   0,  0,  0,  0,  0,  0,  1,  1,  1,  2,  2,  2,  2,  2] // stereo\r\n];\r\n\r\n// Quantizer lookup, step 2: bitrate class, sample rate -> B2 table idx, sblimit\r\nMP2.QUANT_TAB = {\r\n\tA: (27 | 64), // Table 3-B.2a: high-rate, sblimit = 27\r\n\tB: (30 | 64), // Table 3-B.2b: high-rate, sblimit = 30\r\n\tC:   8,       // Table 3-B.2c:  low-rate, sblimit =  8\r\n\tD:  12        // Table 3-B.2d:  low-rate, sblimit = 12\r\n};\r\n\r\nMP2.QUANT_LUT_STEP_2 = [\r\n\t//   44.1 kHz,        48 kHz,          32 kHz\r\n\t[MP2.QUANT_TAB.C, MP2.QUANT_TAB.C, MP2.QUANT_TAB.D], // 32 - 48 kbit/sec/ch\r\n\t[MP2.QUANT_TAB.A, MP2.QUANT_TAB.A, MP2.QUANT_TAB.A], // 56 - 80 kbit/sec/ch\r\n\t[MP2.QUANT_TAB.B, MP2.QUANT_TAB.A, MP2.QUANT_TAB.B]  // 96+\t kbit/sec/ch\r\n];\r\n\r\n// Quantizer lookup, step 3: B2 table, subband -> nbal, row index\r\n// (upper 4 bits: nbal, lower 4 bits: row index)\r\nMP2.QUANT_LUT_STEP_3 = [\r\n\t// Low-rate table (3-B.2c and 3-B.2d)\r\n\t[\r\n\t\t0x44,0x44,\r\n\t  \t0x34,0x34,0x34,0x34,0x34,0x34,0x34,0x34,0x34,0x34\r\n\t],\r\n\t// High-rate table (3-B.2a and 3-B.2b)\r\n\t[\r\n\t\t0x43,0x43,0x43,\r\n\t\t0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,\r\n\t\t0x31,0x31,0x31,0x31,0x31,0x31,0x31,0x31,0x31,0x31,0x31,0x31,\r\n\t\t0x20,0x20,0x20,0x20,0x20,0x20,0x20\r\n\t],\r\n\t// MPEG-2 LSR table (B.2 in ISO 13818-3)\r\n\t[\r\n\t\t0x45,0x45,0x45,0x45,\r\n\t\t0x34,0x34,0x34,0x34,0x34,0x34,0x34,\r\n\t\t0x24,0x24,0x24,0x24,0x24,0x24,0x24,0x24,0x24,0x24,\r\n\t\t\t\t\t   0x24,0x24,0x24,0x24,0x24,0x24,0x24,0x24,0x24\t\r\n\t]\r\n];\r\n\r\n// Quantizer lookup, step 4: table row, allocation[] value -> quant table index\r\nMP2.QUANT_LUT_STEP4 = [\r\n\t[0, 1, 2, 17],\r\n\t[0, 1, 2, 3, 4, 5, 6, 17],\r\n\t[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 17],\r\n\t[0, 1, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],\r\n\t[0, 1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17],\r\n\t[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]\r\n];\r\n\r\nMP2.QUANT_TAB = [\r\n\t{levels:     3, group: 1, bits:  5},  //  1\r\n\t{levels:     5, group: 1, bits:  7},  //  2\r\n\t{levels:     7, group: 0, bits:  3},  //  3\r\n\t{levels:     9, group: 1, bits: 10},  //  4\r\n\t{levels:    15, group: 0, bits:  4},  //  5\r\n\t{levels:    31, group: 0, bits:  5},  //  6\r\n\t{levels:    63, group: 0, bits:  6},  //  7\r\n\t{levels:   127, group: 0, bits:  7},  //  8\r\n\t{levels:   255, group: 0, bits:  8},  //  9\r\n\t{levels:   511, group: 0, bits:  9},  // 10\r\n\t{levels:  1023, group: 0, bits: 10},  // 11\r\n\t{levels:  2047, group: 0, bits: 11},  // 12\r\n\t{levels:  4095, group: 0, bits: 12},  // 13\r\n\t{levels:  8191, group: 0, bits: 13},  // 14\r\n\t{levels: 16383, group: 0, bits: 14},  // 15\r\n\t{levels: 32767, group: 0, bits: 15},  // 16\r\n\t{levels: 65535, group: 0, bits: 16}   // 17\r\n];\r\n\r\nexport default MP2;\r\n\r\n","// Inspired by Java MPEG-1 Video Decoder and Player by Zoltan Korandi\r\n// https://sourceforge.net/projects/javampeg1video/\r\n\r\nimport JSMpeg from '../';\r\nimport BaseDecoder from './decoder';\r\n\r\nlet MPEG1 = function(options) {\r\n  JSMpeg.Decoder.Base.call(this, options);\r\n\r\n\tvar bufferSize = options.videoBufferSize || 512*1024;\r\n\tvar bufferMode = options.streaming\r\n\t\t? JSMpeg.BitBuffer.MODE.EVICT\r\n\t\t: JSMpeg.BitBuffer.MODE.EXPAND;\r\n\r\n\tthis.bits = new JSMpeg.BitBuffer(bufferSize, bufferMode);\r\n\r\n\tthis.customIntraQuantMatrix = new Uint8Array(64);\r\n\tthis.customNonIntraQuantMatrix = new Uint8Array(64);\r\n\tthis.blockData = new Int32Array(64);\r\n\r\n\tthis.currentFrame = 0;\r\n\tthis.decodeFirstFrame = options.decodeFirstFrame !== false;\r\n};\r\n\r\n\r\nMPEG1.prototype = Object.create(BaseDecoder.prototype);\r\nMPEG1.prototype.constructor = MPEG1;\r\n\r\nMPEG1.prototype.write = function(pts, buffers) {\r\n  JSMpeg.Decoder.Base.prototype.write.call(this, pts, buffers);\r\n\r\n\tif (!this.hasSequenceHeader) {\r\n\t\tif (this.bits.findStartCode(MPEG1.START.SEQUENCE) === -1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.decodeSequenceHeader();\r\n\r\n\t\tif (this.decodeFirstFrame) {\r\n\t\t\tthis.decode();\r\n\t\t}\r\n\t}\r\n};\r\n\r\nMPEG1.prototype.decode = function() {\r\n\tif (!this.hasSequenceHeader) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (this.bits.findStartCode(MPEG1.START.PICTURE) === -1) {\r\n\t\tvar bufferedBytes = this.bits.byteLength - (this.bits.index >> 3);\r\n\t\treturn false;\r\n\t}\r\n\r\n\tthis.decodePicture();\r\n\tthis.advanceDecodedTime(1/this.frameRate);\r\n\treturn true;\r\n};\r\n\r\nMPEG1.prototype.readHuffman = function(codeTable) {\r\n\tvar state = 0;\r\n\tdo {\r\n\t\tstate = codeTable[state + this.bits.read(1)];\r\n\t} while (state >= 0 && codeTable[state] !== 0);\r\n\treturn codeTable[state+2];\r\n};\r\n\r\n\r\n// Sequence Layer\r\n\r\nMPEG1.prototype.frameRate = 30;\r\nMPEG1.prototype.decodeSequenceHeader = function() {\r\n\tvar newWidth = this.bits.read(12),\r\n\t\tnewHeight = this.bits.read(12);\r\n\r\n\t// skip pixel aspect ratio\r\n\tthis.bits.skip(4);\r\n\r\n\tthis.frameRate = MPEG1.PICTURE_RATE[this.bits.read(4)];\r\n\r\n\t// skip bitRate, marker, bufferSize and constrained bit\r\n\tthis.bits.skip(18 + 1 + 10 + 1);\r\n\r\n\tif (newWidth !== this.width || newHeight !== this.height) {\r\n\t\tthis.width = newWidth;\r\n\t\tthis.height = newHeight;\r\n\r\n\t\tthis.initBuffers();\r\n\r\n\t\tif (this.destination) {\r\n\t\t\tthis.destination.resize(newWidth, newHeight);\r\n\t\t}\r\n\t}\r\n\r\n\tif (this.bits.read(1)) { // load custom intra quant matrix?\r\n\t\tfor (var i = 0; i < 64; i++) {\r\n\t\t\tthis.customIntraQuantMatrix[MPEG1.ZIG_ZAG[i]] = this.bits.read(8);\r\n\t\t}\r\n\t\tthis.intraQuantMatrix = this.customIntraQuantMatrix;\r\n\t}\r\n\r\n\tif (this.bits.read(1)) { // load custom non intra quant matrix?\r\n\t\tfor (var i = 0; i < 64; i++) {\r\n\t\t\tvar idx = MPEG1.ZIG_ZAG[i];\r\n\t\t\tthis.customNonIntraQuantMatrix[idx] = this.bits.read(8);\r\n\t\t}\r\n\t\tthis.nonIntraQuantMatrix = this.customNonIntraQuantMatrix;\r\n\t}\r\n\r\n\tthis.hasSequenceHeader = true;\r\n};\r\n\r\nMPEG1.prototype.initBuffers = function() {\r\n\tthis.intraQuantMatrix = MPEG1.DEFAULT_INTRA_QUANT_MATRIX;\r\n\tthis.nonIntraQuantMatrix = MPEG1.DEFAULT_NON_INTRA_QUANT_MATRIX;\r\n\r\n\tthis.mbWidth = (this.width + 15) >> 4;\r\n\tthis.mbHeight = (this.height + 15) >> 4;\r\n\tthis.mbSize = this.mbWidth * this.mbHeight;\r\n\r\n\tthis.codedWidth = this.mbWidth << 4;\r\n\tthis.codedHeight = this.mbHeight << 4;\r\n\tthis.codedSize = this.codedWidth * this.codedHeight;\r\n\r\n\tthis.halfWidth = this.mbWidth << 3;\r\n\tthis.halfHeight = this.mbHeight << 3;\r\n\r\n\t// Allocated buffers and resize the canvas\r\n\tthis.currentY = new Uint8ClampedArray(this.codedSize);\r\n\tthis.currentY32 = new Uint32Array(this.currentY.buffer);\r\n\r\n\tthis.currentCr = new Uint8ClampedArray(this.codedSize >> 2);\r\n\tthis.currentCr32 = new Uint32Array(this.currentCr.buffer);\r\n\r\n\tthis.currentCb = new Uint8ClampedArray(this.codedSize >> 2);\r\n\tthis.currentCb32 = new Uint32Array(this.currentCb.buffer);\r\n\r\n\r\n\tthis.forwardY = new Uint8ClampedArray(this.codedSize);\r\n\tthis.forwardY32 = new Uint32Array(this.forwardY.buffer);\r\n\r\n\tthis.forwardCr = new Uint8ClampedArray(this.codedSize >> 2);\r\n\tthis.forwardCr32 = new Uint32Array(this.forwardCr.buffer);\r\n\r\n\tthis.forwardCb = new Uint8ClampedArray(this.codedSize >> 2);\r\n\tthis.forwardCb32 = new Uint32Array(this.forwardCb.buffer);\r\n};\r\n\r\n\r\n// Picture Layer\r\n\r\nMPEG1.prototype.currentY = null;\r\nMPEG1.prototype.currentCr = null;\r\nMPEG1.prototype.currentCb = null;\r\n\r\nMPEG1.prototype.pictureType = 0;\r\n\r\n// Buffers for motion compensation\r\nMPEG1.prototype.forwardY = null;\r\nMPEG1.prototype.forwardCr = null;\r\nMPEG1.prototype.forwardCb = null;\r\n\r\nMPEG1.prototype.fullPelForward = false;\r\nMPEG1.prototype.forwardFCode = 0;\r\nMPEG1.prototype.forwardRSize = 0;\r\nMPEG1.prototype.forwardF = 0;\r\n\r\nMPEG1.prototype.decodePicture = function(skipOutput) {\r\n\tthis.currentFrame++;\r\n\r\n\tthis.bits.skip(10); // skip temporalReference\r\n\tthis.pictureType = this.bits.read(3);\r\n\tthis.bits.skip(16); // skip vbv_delay\r\n\r\n\t// Skip B and D frames or unknown coding type\r\n\tif (this.pictureType <= 0 || this.pictureType >= MPEG1.PICTURE_TYPE.B) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// full_pel_forward, forward_f_code\r\n\tif (this.pictureType === MPEG1.PICTURE_TYPE.PREDICTIVE) {\r\n\t\tthis.fullPelForward = this.bits.read(1);\r\n\t\tthis.forwardFCode = this.bits.read(3);\r\n\t\tif (this.forwardFCode === 0) {\r\n\t\t\t// Ignore picture with zero forward_f_code\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.forwardRSize = this.forwardFCode - 1;\r\n\t\tthis.forwardF = 1 << this.forwardRSize;\r\n\t}\r\n\r\n\tvar code = 0;\r\n\tdo {\r\n\t\tcode = this.bits.findNextStartCode();\r\n\t} while (code === MPEG1.START.EXTENSION || code === MPEG1.START.USER_DATA );\r\n\r\n\r\n\twhile (code >= MPEG1.START.SLICE_FIRST && code <= MPEG1.START.SLICE_LAST) {\r\n\t\tthis.decodeSlice(code & 0x000000FF);\r\n\t\tcode = this.bits.findNextStartCode();\r\n\t}\r\n\r\n\tif (code !== -1) {\r\n\t\t// We found the next start code; rewind 32bits and let the main loop\r\n\t\t// handle it.\r\n\t\tthis.bits.rewind(32);\r\n\t}\r\n\r\n\t// Invoke decode callbacks\r\n\tif (this.destination) {\r\n\t\tthis.destination.render(this.currentY, this.currentCr, this.currentCb);\r\n\t}\r\n\r\n\t// If this is a reference picutre then rotate the prediction pointers\r\n\tif (\r\n\t\tthis.pictureType === MPEG1.PICTURE_TYPE.INTRA ||\r\n\t\tthis.pictureType === MPEG1.PICTURE_TYPE.PREDICTIVE\r\n\t) {\r\n\t\tvar\r\n\t\t\ttmpY = this.forwardY,\r\n\t\t\ttmpY32 = this.forwardY32,\r\n\t\t\ttmpCr = this.forwardCr,\r\n\t\t\ttmpCr32 = this.forwardCr32,\r\n\t\t\ttmpCb = this.forwardCb,\r\n\t\t\ttmpCb32 = this.forwardCb32;\r\n\r\n\t\tthis.forwardY = this.currentY;\r\n\t\tthis.forwardY32 = this.currentY32;\r\n\t\tthis.forwardCr = this.currentCr;\r\n\t\tthis.forwardCr32 = this.currentCr32;\r\n\t\tthis.forwardCb = this.currentCb;\r\n\t\tthis.forwardCb32 = this.currentCb32;\r\n\r\n\t\tthis.currentY = tmpY;\r\n\t\tthis.currentY32 = tmpY32;\r\n\t\tthis.currentCr = tmpCr;\r\n\t\tthis.currentCr32 = tmpCr32;\r\n\t\tthis.currentCb = tmpCb;\r\n\t\tthis.currentCb32 = tmpCb32;\r\n\t}\r\n};\r\n\r\n\r\n// Slice Layer\r\n\r\nMPEG1.prototype.quantizerScale = 0;\r\nMPEG1.prototype.sliceBegin = false;\r\n\r\nMPEG1.prototype.decodeSlice = function(slice) {\r\n\tthis.sliceBegin = true;\r\n\tthis.macroblockAddress = (slice - 1) * this.mbWidth - 1;\r\n\r\n\t// Reset motion vectors and DC predictors\r\n\tthis.motionFwH = this.motionFwHPrev = 0;\r\n\tthis.motionFwV = this.motionFwVPrev = 0;\r\n\tthis.dcPredictorY  = 128;\r\n\tthis.dcPredictorCr = 128;\r\n\tthis.dcPredictorCb = 128;\r\n\r\n\tthis.quantizerScale = this.bits.read(5);\r\n\r\n\t// skip extra bits\r\n\twhile (this.bits.read(1)) {\r\n\t\tthis.bits.skip(8);\r\n\t}\r\n\r\n\tdo {\r\n\t\tthis.decodeMacroblock();\r\n\t} while (!this.bits.nextBytesAreStartCode());\r\n};\r\n\r\n\r\n// Macroblock Layer\r\n\r\nMPEG1.prototype.macroblockAddress = 0;\r\nMPEG1.prototype.mbRow = 0;\r\nMPEG1.prototype.mbCol = 0;\r\n\r\nMPEG1.prototype.macroblockType = 0;\r\nMPEG1.prototype.macroblockIntra = false;\r\nMPEG1.prototype.macroblockMotFw = false;\r\n\r\nMPEG1.prototype.motionFwH = 0;\r\nMPEG1.prototype.motionFwV = 0;\r\nMPEG1.prototype.motionFwHPrev = 0;\r\nMPEG1.prototype.motionFwVPrev = 0;\r\n\r\nMPEG1.prototype.decodeMacroblock = function() {\r\n\t// Decode macroblock_address_increment\r\n\tvar\r\n\t\tincrement = 0,\r\n\t\tt = this.readHuffman(MPEG1.MACROBLOCK_ADDRESS_INCREMENT);\r\n\r\n\twhile (t === 34) {\r\n\t\t// macroblock_stuffing\r\n\t\tt = this.readHuffman(MPEG1.MACROBLOCK_ADDRESS_INCREMENT);\r\n\t}\r\n\twhile (t === 35) {\r\n\t\t// macroblock_escape\r\n\t\tincrement += 33;\r\n\t\tt = this.readHuffman(MPEG1.MACROBLOCK_ADDRESS_INCREMENT);\r\n\t}\r\n\tincrement += t;\r\n\r\n\t// Process any skipped macroblocks\r\n\tif (this.sliceBegin) {\r\n\t\t// The first macroblock_address_increment of each slice is relative\r\n\t\t// to beginning of the preverious row, not the preverious macroblock\r\n\t\tthis.sliceBegin = false;\r\n\t\tthis.macroblockAddress += increment;\r\n\t}\r\n\telse {\r\n\t\tif (this.macroblockAddress + increment >= this.mbSize) {\r\n\t\t\t// Illegal (too large) macroblock_address_increment\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (increment > 1) {\r\n\t\t\t// Skipped macroblocks reset DC predictors\r\n\t\t\tthis.dcPredictorY  = 128;\r\n\t\t\tthis.dcPredictorCr = 128;\r\n\t\t\tthis.dcPredictorCb = 128;\r\n\r\n\t\t\t// Skipped macroblocks in P-pictures reset motion vectors\r\n\t\t\tif (this.pictureType === MPEG1.PICTURE_TYPE.PREDICTIVE) {\r\n\t\t\t\tthis.motionFwH = this.motionFwHPrev = 0;\r\n\t\t\t\tthis.motionFwV = this.motionFwVPrev = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Predict skipped macroblocks\r\n\t\twhile (increment > 1) {\r\n\t\t\tthis.macroblockAddress++;\r\n\t\t\tthis.mbRow = (this.macroblockAddress / this.mbWidth)|0;\r\n\t\t\tthis.mbCol = this.macroblockAddress % this.mbWidth;\r\n\t\t\tthis.copyMacroblock(\r\n\t\t\t\tthis.motionFwH, this.motionFwV,\r\n\t\t\t\tthis.forwardY, this.forwardCr, this.forwardCb\r\n\t\t\t);\r\n\t\t\tincrement--;\r\n\t\t}\r\n\t\tthis.macroblockAddress++;\r\n\t}\r\n\tthis.mbRow = (this.macroblockAddress / this.mbWidth)|0;\r\n\tthis.mbCol = this.macroblockAddress % this.mbWidth;\r\n\r\n\t// Process the current macroblock\r\n\tvar mbTable = MPEG1.MACROBLOCK_TYPE[this.pictureType];\r\n\tthis.macroblockType = this.readHuffman(mbTable);\r\n\tthis.macroblockIntra = (this.macroblockType & 0x01);\r\n\tthis.macroblockMotFw = (this.macroblockType & 0x08);\r\n\r\n\t// Quantizer scale\r\n\tif ((this.macroblockType & 0x10) !== 0) {\r\n\t\tthis.quantizerScale = this.bits.read(5);\r\n\t}\r\n\r\n\tif (this.macroblockIntra) {\r\n\t\t// Intra-coded macroblocks reset motion vectors\r\n\t\tthis.motionFwH = this.motionFwHPrev = 0;\r\n\t\tthis.motionFwV = this.motionFwVPrev = 0;\r\n\t}\r\n\telse {\r\n\t\t// Non-intra macroblocks reset DC predictors\r\n\t\tthis.dcPredictorY = 128;\r\n\t\tthis.dcPredictorCr = 128;\r\n\t\tthis.dcPredictorCb = 128;\r\n\r\n\t\tthis.decodeMotionVectors();\r\n\t\tthis.copyMacroblock(\r\n\t\t\tthis.motionFwH, this.motionFwV,\r\n\t\t\tthis.forwardY, this.forwardCr, this.forwardCb\r\n\t\t);\r\n\t}\r\n\r\n\t// Decode blocks\r\n\tvar cbp = ((this.macroblockType & 0x02) !== 0)\r\n\t\t? this.readHuffman(MPEG1.CODE_BLOCK_PATTERN)\r\n\t\t: (this.macroblockIntra ? 0x3f : 0);\r\n\r\n\tfor (var block = 0, mask = 0x20; block < 6; block++) {\r\n\t\tif ((cbp & mask) !== 0) {\r\n\t\t\tthis.decodeBlock(block);\r\n\t\t}\r\n\t\tmask >>= 1;\r\n\t}\r\n};\r\n\r\n\r\nMPEG1.prototype.decodeMotionVectors = function() {\r\n\tvar code, d, r = 0;\r\n\r\n\t// Forward\r\n\tif (this.macroblockMotFw) {\r\n\t\t// Horizontal forward\r\n\t\tcode = this.readHuffman(MPEG1.MOTION);\r\n\t\tif ((code !== 0) && (this.forwardF !== 1)) {\r\n\t\t\tr = this.bits.read(this.forwardRSize);\r\n\t\t\td = ((Math.abs(code) - 1) << this.forwardRSize) + r + 1;\r\n\t\t\tif (code < 0) {\r\n\t\t\t\td = -d;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\td = code;\r\n\t\t}\r\n\r\n\t\tthis.motionFwHPrev += d;\r\n\t\tif (this.motionFwHPrev > (this.forwardF << 4) - 1) {\r\n\t\t\tthis.motionFwHPrev -= this.forwardF << 5;\r\n\t\t}\r\n\t\telse if (this.motionFwHPrev < ((-this.forwardF) << 4)) {\r\n\t\t\tthis.motionFwHPrev += this.forwardF << 5;\r\n\t\t}\r\n\r\n\t\tthis.motionFwH = this.motionFwHPrev;\r\n\t\tif (this.fullPelForward) {\r\n\t\t\tthis.motionFwH <<= 1;\r\n\t\t}\r\n\r\n\t\t// Vertical forward\r\n\t\tcode = this.readHuffman(MPEG1.MOTION);\r\n\t\tif ((code !== 0) && (this.forwardF !== 1)) {\r\n\t\t\tr = this.bits.read(this.forwardRSize);\r\n\t\t\td = ((Math.abs(code) - 1) << this.forwardRSize) + r + 1;\r\n\t\t\tif (code < 0) {\r\n\t\t\t\td = -d;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\td = code;\r\n\t\t}\r\n\r\n\t\tthis.motionFwVPrev += d;\r\n\t\tif (this.motionFwVPrev > (this.forwardF << 4) - 1) {\r\n\t\t\tthis.motionFwVPrev -= this.forwardF << 5;\r\n\t\t}\r\n\t\telse if (this.motionFwVPrev < ((-this.forwardF) << 4)) {\r\n\t\t\tthis.motionFwVPrev += this.forwardF << 5;\r\n\t\t}\r\n\r\n\t\tthis.motionFwV = this.motionFwVPrev;\r\n\t\tif (this.fullPelForward) {\r\n\t\t\tthis.motionFwV <<= 1;\r\n\t\t}\r\n\t}\r\n\telse if (this.pictureType === MPEG1.PICTURE_TYPE.PREDICTIVE) {\r\n\t\t// No motion information in P-picture, reset vectors\r\n\t\tthis.motionFwH = this.motionFwHPrev = 0;\r\n\t\tthis.motionFwV = this.motionFwVPrev = 0;\r\n\t}\r\n};\r\n\r\nMPEG1.prototype.copyMacroblock = function(motionH, motionV, sY, sCr, sCb) {\r\n\tvar\r\n\t\twidth, scan,\r\n\t\tH, V, oddH, oddV,\r\n\t\tsrc, dest, last;\r\n\r\n\t// We use 32bit writes here\r\n\tvar dY = this.currentY32,\r\n\t\tdCb = this.currentCb32,\r\n\t\tdCr = this.currentCr32;\r\n\r\n\t// Luminance\r\n\twidth = this.codedWidth;\r\n\tscan = width - 16;\r\n\r\n\tH = motionH >> 1;\r\n\tV = motionV >> 1;\r\n\toddH = (motionH & 1) === 1;\r\n\toddV = (motionV & 1) === 1;\r\n\r\n\tsrc = ((this.mbRow << 4) + V) * width + (this.mbCol << 4) + H;\r\n\tdest = (this.mbRow * width + this.mbCol) << 2;\r\n\tlast = dest + (width << 2);\r\n\r\n\tvar x, y1, y2, y;\r\n\tif (oddH) {\r\n\t\tif (oddV) {\r\n\t\t\twhile (dest < last) {\r\n\t\t\t\ty1 = sY[src] + sY[src+width]; src++;\r\n\t\t\t\tfor (x = 0; x < 4; x++) {\r\n\t\t\t\t\ty2 = sY[src] + sY[src+width]; src++;\r\n\t\t\t\t\ty = (((y1 + y2 + 2) >> 2) & 0xff);\r\n\r\n\t\t\t\t\ty1 = sY[src] + sY[src+width]; src++;\r\n\t\t\t\t\ty |= (((y1 + y2 + 2) << 6) & 0xff00);\r\n\r\n\t\t\t\t\ty2 = sY[src] + sY[src+width]; src++;\r\n\t\t\t\t\ty |= (((y1 + y2 + 2) << 14) & 0xff0000);\r\n\r\n\t\t\t\t\ty1 = sY[src] + sY[src+width]; src++;\r\n\t\t\t\t\ty |= (((y1 + y2 + 2) << 22) & 0xff000000);\r\n\r\n\t\t\t\t\tdY[dest++] = y;\r\n\t\t\t\t}\r\n\t\t\t\tdest += scan >> 2; src += scan-1;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\twhile (dest < last) {\r\n\t\t\t\ty1 = sY[src++];\r\n\t\t\t\tfor (x = 0; x < 4; x++) {\r\n\t\t\t\t\ty2 = sY[src++];\r\n\t\t\t\t\ty = (((y1 + y2 + 1) >> 1) & 0xff);\r\n\r\n\t\t\t\t\ty1 = sY[src++];\r\n\t\t\t\t\ty |= (((y1 + y2 + 1) << 7) & 0xff00);\r\n\r\n\t\t\t\t\ty2 = sY[src++];\r\n\t\t\t\t\ty |= (((y1 + y2 + 1) << 15) & 0xff0000);\r\n\r\n\t\t\t\t\ty1 = sY[src++];\r\n\t\t\t\t\ty |= (((y1 + y2 + 1) << 23) & 0xff000000);\r\n\r\n\t\t\t\t\tdY[dest++] = y;\r\n\t\t\t\t}\r\n\t\t\t\tdest += scan >> 2; src += scan-1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\tif (oddV) {\r\n\t\t\twhile (dest < last) {\r\n\t\t\t\tfor (x = 0; x < 4; x++) {\r\n\t\t\t\t\ty = (((sY[src] + sY[src+width] + 1) >> 1) & 0xff); src++;\r\n\t\t\t\t\ty |= (((sY[src] + sY[src+width] + 1) << 7) & 0xff00); src++;\r\n\t\t\t\t\ty |= (((sY[src] + sY[src+width] + 1) << 15) & 0xff0000); src++;\r\n\t\t\t\t\ty |= (((sY[src] + sY[src+width] + 1) << 23) & 0xff000000); src++;\r\n\r\n\t\t\t\t\tdY[dest++] = y;\r\n\t\t\t\t}\r\n\t\t\t\tdest += scan >> 2; src += scan;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\twhile (dest < last) {\r\n\t\t\t\tfor (x = 0; x < 4; x++) {\r\n\t\t\t\t\ty = sY[src]; src++;\r\n\t\t\t\t\ty |= sY[src] << 8; src++;\r\n\t\t\t\t\ty |= sY[src] << 16; src++;\r\n\t\t\t\t\ty |= sY[src] << 24; src++;\r\n\r\n\t\t\t\t\tdY[dest++] = y;\r\n\t\t\t\t}\r\n\t\t\t\tdest += scan >> 2; src += scan;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Chrominance\r\n\r\n\twidth = this.halfWidth;\r\n\tscan = width - 8;\r\n\r\n\tH = (motionH/2) >> 1;\r\n\tV = (motionV/2) >> 1;\r\n\toddH = ((motionH/2) & 1) === 1;\r\n\toddV = ((motionV/2) & 1) === 1;\r\n\r\n\tsrc = ((this.mbRow << 3) + V) * width + (this.mbCol << 3) + H;\r\n\tdest = (this.mbRow * width + this.mbCol) << 1;\r\n\tlast = dest + (width << 1);\r\n\r\n\tvar cr1, cr2, cr,\r\n\t\tcb1, cb2, cb;\r\n\tif (oddH) {\r\n\t\tif (oddV) {\r\n\t\t\twhile (dest < last) {\r\n\t\t\t\tcr1 = sCr[src] + sCr[src+width];\r\n\t\t\t\tcb1 = sCb[src] + sCb[src+width];\r\n\t\t\t\tsrc++;\r\n\t\t\t\tfor (x = 0; x < 2; x++) {\r\n\t\t\t\t\tcr2 = sCr[src] + sCr[src+width];\r\n\t\t\t\t\tcb2 = sCb[src] + sCb[src+width]; src++;\r\n\t\t\t\t\tcr = (((cr1 + cr2 + 2) >> 2) & 0xff);\r\n\t\t\t\t\tcb = (((cb1 + cb2 + 2) >> 2) & 0xff);\r\n\r\n\t\t\t\t\tcr1 = sCr[src] + sCr[src+width];\r\n\t\t\t\t\tcb1 = sCb[src] + sCb[src+width]; src++;\r\n\t\t\t\t\tcr |= (((cr1 + cr2 + 2) << 6) & 0xff00);\r\n\t\t\t\t\tcb |= (((cb1 + cb2 + 2) << 6) & 0xff00);\r\n\r\n\t\t\t\t\tcr2 = sCr[src] + sCr[src+width];\r\n\t\t\t\t\tcb2 = sCb[src] + sCb[src+width]; src++;\r\n\t\t\t\t\tcr |= (((cr1 + cr2 + 2) << 14) & 0xff0000);\r\n\t\t\t\t\tcb |= (((cb1 + cb2 + 2) << 14) & 0xff0000);\r\n\r\n\t\t\t\t\tcr1 = sCr[src] + sCr[src+width];\r\n\t\t\t\t\tcb1 = sCb[src] + sCb[src+width]; src++;\r\n\t\t\t\t\tcr |= (((cr1 + cr2 + 2) << 22) & 0xff000000);\r\n\t\t\t\t\tcb |= (((cb1 + cb2 + 2) << 22) & 0xff000000);\r\n\r\n\t\t\t\t\tdCr[dest] = cr;\r\n\t\t\t\t\tdCb[dest] = cb;\r\n\t\t\t\t\tdest++;\r\n\t\t\t\t}\r\n\t\t\t\tdest += scan >> 2; src += scan-1;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\twhile (dest < last) {\r\n\t\t\t\tcr1 = sCr[src];\r\n\t\t\t\tcb1 = sCb[src];\r\n\t\t\t\tsrc++;\r\n\t\t\t\tfor (x = 0; x < 2; x++) {\r\n\t\t\t\t\tcr2 = sCr[src];\r\n\t\t\t\t\tcb2 = sCb[src++];\r\n\t\t\t\t\tcr = (((cr1 + cr2 + 1) >> 1) & 0xff);\r\n\t\t\t\t\tcb = (((cb1 + cb2 + 1) >> 1) & 0xff);\r\n\r\n\t\t\t\t\tcr1 = sCr[src];\r\n\t\t\t\t\tcb1 = sCb[src++];\r\n\t\t\t\t\tcr |= (((cr1 + cr2 + 1) << 7) & 0xff00);\r\n\t\t\t\t\tcb |= (((cb1 + cb2 + 1) << 7) & 0xff00);\r\n\r\n\t\t\t\t\tcr2 = sCr[src];\r\n\t\t\t\t\tcb2 = sCb[src++];\r\n\t\t\t\t\tcr |= (((cr1 + cr2 + 1) << 15) & 0xff0000);\r\n\t\t\t\t\tcb |= (((cb1 + cb2 + 1) << 15) & 0xff0000);\r\n\r\n\t\t\t\t\tcr1 = sCr[src];\r\n\t\t\t\t\tcb1 = sCb[src++];\r\n\t\t\t\t\tcr |= (((cr1 + cr2 + 1) << 23) & 0xff000000);\r\n\t\t\t\t\tcb |= (((cb1 + cb2 + 1) << 23) & 0xff000000);\r\n\r\n\t\t\t\t\tdCr[dest] = cr;\r\n\t\t\t\t\tdCb[dest] = cb;\r\n\t\t\t\t\tdest++;\r\n\t\t\t\t}\r\n\t\t\t\tdest += scan >> 2; src += scan-1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\tif (oddV) {\r\n\t\t\twhile (dest < last) {\r\n\t\t\t\tfor (x = 0; x < 2; x++) {\r\n\t\t\t\t\tcr = (((sCr[src] + sCr[src+width] + 1) >> 1) & 0xff);\r\n\t\t\t\t\tcb = (((sCb[src] + sCb[src+width] + 1) >> 1) & 0xff); src++;\r\n\r\n\t\t\t\t\tcr |= (((sCr[src] + sCr[src+width] + 1) << 7) & 0xff00);\r\n\t\t\t\t\tcb |= (((sCb[src] + sCb[src+width] + 1) << 7) & 0xff00); src++;\r\n\r\n\t\t\t\t\tcr |= (((sCr[src] + sCr[src+width] + 1) << 15) & 0xff0000);\r\n\t\t\t\t\tcb |= (((sCb[src] + sCb[src+width] + 1) << 15) & 0xff0000); src++;\r\n\r\n\t\t\t\t\tcr |= (((sCr[src] + sCr[src+width] + 1) << 23) & 0xff000000);\r\n\t\t\t\t\tcb |= (((sCb[src] + sCb[src+width] + 1) << 23) & 0xff000000); src++;\r\n\r\n\t\t\t\t\tdCr[dest] = cr;\r\n\t\t\t\t\tdCb[dest] = cb;\r\n\t\t\t\t\tdest++;\r\n\t\t\t\t}\r\n\t\t\t\tdest += scan >> 2; src += scan;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\twhile (dest < last) {\r\n\t\t\t\tfor (x = 0; x < 2; x++) {\r\n\t\t\t\t\tcr = sCr[src];\r\n\t\t\t\t\tcb = sCb[src]; src++;\r\n\r\n\t\t\t\t\tcr |= sCr[src] << 8;\r\n\t\t\t\t\tcb |= sCb[src] << 8; src++;\r\n\r\n\t\t\t\t\tcr |= sCr[src] << 16;\r\n\t\t\t\t\tcb |= sCb[src] << 16; src++;\r\n\r\n\t\t\t\t\tcr |= sCr[src] << 24;\r\n\t\t\t\t\tcb |= sCb[src] << 24; src++;\r\n\r\n\t\t\t\t\tdCr[dest] = cr;\r\n\t\t\t\t\tdCb[dest] = cb;\r\n\t\t\t\t\tdest++;\r\n\t\t\t\t}\r\n\t\t\t\tdest += scan >> 2; src += scan;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\n// Block layer\r\n\r\nMPEG1.prototype.dcPredictorY = 0;\r\nMPEG1.prototype.dcPredictorCr = 0;\r\nMPEG1.prototype.dcPredictorCb = 0;\r\n\r\nMPEG1.prototype.blockData = null;\r\n\r\nMPEG1.prototype.decodeBlock = function(block) {\r\n\r\n\tvar\r\n\t\tn = 0,\r\n\t\tquantMatrix;\r\n\r\n\t// Decode DC coefficient of intra-coded blocks\r\n\tif (this.macroblockIntra) {\r\n\t\tvar\r\n\t\t\tpredictor,\r\n\t\t\tdctSize;\r\n\r\n\t\t// DC prediction\r\n\r\n\t\tif (block < 4) {\r\n\t\t\tpredictor = this.dcPredictorY;\r\n\t\t\tdctSize = this.readHuffman(MPEG1.DCT_DC_SIZE_LUMINANCE);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tpredictor = (block === 4 ? this.dcPredictorCr : this.dcPredictorCb);\r\n\t\t\tdctSize = this.readHuffman(MPEG1.DCT_DC_SIZE_CHROMINANCE);\r\n\t\t}\r\n\r\n\t\t// Read DC coeff\r\n\t\tif (dctSize > 0) {\r\n\t\t\tvar differential = this.bits.read(dctSize);\r\n\t\t\tif ((differential & (1 << (dctSize - 1))) !== 0) {\r\n\t\t\t\tthis.blockData[0] = predictor + differential;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.blockData[0] = predictor + ((-1 << dctSize)|(differential+1));\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.blockData[0] = predictor;\r\n\t\t}\r\n\r\n\t\t// Save predictor value\r\n\t\tif (block < 4) {\r\n\t\t\tthis.dcPredictorY = this.blockData[0];\r\n\t\t}\r\n\t\telse if (block === 4) {\r\n\t\t\tthis.dcPredictorCr = this.blockData[0];\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.dcPredictorCb = this.blockData[0];\r\n\t\t}\r\n\r\n\t\t// Dequantize + premultiply\r\n\t\tthis.blockData[0] <<= (3 + 5);\r\n\r\n\t\tquantMatrix = this.intraQuantMatrix;\r\n\t\tn = 1;\r\n\t}\r\n\telse {\r\n\t\tquantMatrix = this.nonIntraQuantMatrix;\r\n\t}\r\n\r\n\t// Decode AC coefficients (+DC for non-intra)\r\n\tvar level = 0;\r\n\twhile (true) {\r\n\t\tvar\r\n\t\t\trun = 0,\r\n\t\t\tcoeff = this.readHuffman(MPEG1.DCT_COEFF);\r\n\r\n\t\tif ((coeff === 0x0001) && (n > 0) && (this.bits.read(1) === 0)) {\r\n\t\t\t// end_of_block\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tif (coeff === 0xffff) {\r\n\t\t\t// escape\r\n\t\t\trun = this.bits.read(6);\r\n\t\t\tlevel = this.bits.read(8);\r\n\t\t\tif (level === 0) {\r\n\t\t\t\tlevel = this.bits.read(8);\r\n\t\t\t}\r\n\t\t\telse if (level === 128) {\r\n\t\t\t\tlevel = this.bits.read(8) - 256;\r\n\t\t\t}\r\n\t\t\telse if (level > 128) {\r\n\t\t\t\tlevel = level - 256;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\trun = coeff >> 8;\r\n\t\t\tlevel = coeff & 0xff;\r\n\t\t\tif (this.bits.read(1)) {\r\n\t\t\t\tlevel = -level;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tn += run;\r\n\t\tvar dezigZagged = MPEG1.ZIG_ZAG[n];\r\n\t\tn++;\r\n\r\n\t\t// Dequantize, oddify, clip\r\n\t\tlevel <<= 1;\r\n\t\tif (!this.macroblockIntra) {\r\n\t\t\tlevel += (level < 0 ? -1 : 1);\r\n\t\t}\r\n\t\tlevel = (level * this.quantizerScale * quantMatrix[dezigZagged]) >> 4;\r\n\t\tif ((level & 1) === 0) {\r\n\t\t\tlevel -= level > 0 ? 1 : -1;\r\n\t\t}\r\n\t\tif (level > 2047) {\r\n\t\t\tlevel = 2047;\r\n\t\t}\r\n\t\telse if (level < -2048) {\r\n\t\t\tlevel = -2048;\r\n\t\t}\r\n\r\n\t\t// Save premultiplied coefficient\r\n\t\tthis.blockData[dezigZagged] = level * MPEG1.PREMULTIPLIER_MATRIX[dezigZagged];\r\n\t}\r\n\r\n\t// Move block to its place\r\n\tvar\r\n\t\tdestArray,\r\n\t\tdestIndex,\r\n\t\tscan;\r\n\r\n\tif (block < 4) {\r\n\t\tdestArray = this.currentY;\r\n\t\tscan = this.codedWidth - 8;\r\n\t\tdestIndex = (this.mbRow * this.codedWidth + this.mbCol) << 4;\r\n\t\tif ((block & 1) !== 0) {\r\n\t\t\tdestIndex += 8;\r\n\t\t}\r\n\t\tif ((block & 2) !== 0) {\r\n\t\t\tdestIndex += this.codedWidth << 3;\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\tdestArray = (block === 4) ? this.currentCb : this.currentCr;\r\n\t\tscan = (this.codedWidth >> 1) - 8;\r\n\t\tdestIndex = ((this.mbRow * this.codedWidth) << 2) + (this.mbCol << 3);\r\n\t}\r\n\r\n\tif (this.macroblockIntra) {\r\n\t\t// Overwrite (no prediction)\r\n\t\tif (n === 1) {\r\n\t\t\tMPEG1.CopyValueToDestination((this.blockData[0] + 128) >> 8, destArray, destIndex, scan);\r\n\t\t\tthis.blockData[0] = 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tMPEG1.IDCT(this.blockData);\r\n\t\t\tMPEG1.CopyBlockToDestination(this.blockData, destArray, destIndex, scan);\r\n      JSMpeg.Fill(this.blockData, 0);\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\t// Add data to the predicted macroblock\r\n\t\tif (n === 1) {\r\n\t\t\tMPEG1.AddValueToDestination((this.blockData[0] + 128) >> 8, destArray, destIndex, scan);\r\n\t\t\tthis.blockData[0] = 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tMPEG1.IDCT(this.blockData);\r\n\t\t\tMPEG1.AddBlockToDestination(this.blockData, destArray, destIndex, scan);\r\n      JSMpeg.Fill(this.blockData, 0);\r\n\t\t}\r\n\t}\r\n\r\n\tn = 0;\r\n};\r\n\r\nMPEG1.CopyBlockToDestination = function(block, dest, index, scan) {\r\n\tfor (var n = 0; n < 64; n += 8, index += scan+8) {\r\n\t\tdest[index+0] = block[n+0];\r\n\t\tdest[index+1] = block[n+1];\r\n\t\tdest[index+2] = block[n+2];\r\n\t\tdest[index+3] = block[n+3];\r\n\t\tdest[index+4] = block[n+4];\r\n\t\tdest[index+5] = block[n+5];\r\n\t\tdest[index+6] = block[n+6];\r\n\t\tdest[index+7] = block[n+7];\r\n\t}\r\n};\r\n\r\nMPEG1.AddBlockToDestination = function(block, dest, index, scan) {\r\n\tfor (var n = 0; n < 64; n += 8, index += scan+8) {\r\n\t\tdest[index+0] += block[n+0];\r\n\t\tdest[index+1] += block[n+1];\r\n\t\tdest[index+2] += block[n+2];\r\n\t\tdest[index+3] += block[n+3];\r\n\t\tdest[index+4] += block[n+4];\r\n\t\tdest[index+5] += block[n+5];\r\n\t\tdest[index+6] += block[n+6];\r\n\t\tdest[index+7] += block[n+7];\r\n\t}\r\n};\r\n\r\nMPEG1.CopyValueToDestination = function(value, dest, index, scan) {\r\n\tfor (var n = 0; n < 64; n += 8, index += scan+8) {\r\n\t\tdest[index+0] = value;\r\n\t\tdest[index+1] = value;\r\n\t\tdest[index+2] = value;\r\n\t\tdest[index+3] = value;\r\n\t\tdest[index+4] = value;\r\n\t\tdest[index+5] = value;\r\n\t\tdest[index+6] = value;\r\n\t\tdest[index+7] = value;\r\n\t}\r\n};\r\n\r\nMPEG1.AddValueToDestination = function(value, dest, index, scan) {\r\n\tfor (var n = 0; n < 64; n += 8, index += scan+8) {\r\n\t\tdest[index+0] += value;\r\n\t\tdest[index+1] += value;\r\n\t\tdest[index+2] += value;\r\n\t\tdest[index+3] += value;\r\n\t\tdest[index+4] += value;\r\n\t\tdest[index+5] += value;\r\n\t\tdest[index+6] += value;\r\n\t\tdest[index+7] += value;\r\n\t}\r\n};\r\n\r\nMPEG1.IDCT = function(block) {\r\n\t// See http://vsr.informatik.tu-chemnitz.de/~jan/MPEG/HTML/IDCT.html\r\n\t// for more info.\r\n\r\n\tvar\r\n\t\tb1, b3, b4, b6, b7, tmp1, tmp2, m0,\r\n\t\tx0, x1, x2, x3, x4, y3, y4, y5, y6, y7;\r\n\r\n\t// Transform columns\r\n\tfor (var i = 0; i < 8; ++i) {\r\n\t\tb1 = block[4*8+i];\r\n\t\tb3 = block[2*8+i] + block[6*8+i];\r\n\t\tb4 = block[5*8+i] - block[3*8+i];\r\n\t\ttmp1 = block[1*8+i] + block[7*8+i];\r\n\t\ttmp2 = block[3*8+i] + block[5*8+i];\r\n\t\tb6 = block[1*8+i] - block[7*8+i];\r\n\t\tb7 = tmp1 + tmp2;\r\n\t\tm0 = block[0*8+i];\r\n\t\tx4 = ((b6*473 - b4*196 + 128) >> 8) - b7;\r\n\t\tx0 = x4 - (((tmp1 - tmp2)*362 + 128) >> 8);\r\n\t\tx1 = m0 - b1;\r\n\t\tx2 = (((block[2*8+i] - block[6*8+i])*362 + 128) >> 8) - b3;\r\n\t\tx3 = m0 + b1;\r\n\t\ty3 = x1 + x2;\r\n\t\ty4 = x3 + b3;\r\n\t\ty5 = x1 - x2;\r\n\t\ty6 = x3 - b3;\r\n\t\ty7 = -x0 - ((b4*473 + b6*196 + 128) >> 8);\r\n\t\tblock[0*8+i] = b7 + y4;\r\n\t\tblock[1*8+i] = x4 + y3;\r\n\t\tblock[2*8+i] = y5 - x0;\r\n\t\tblock[3*8+i] = y6 - y7;\r\n\t\tblock[4*8+i] = y6 + y7;\r\n\t\tblock[5*8+i] = x0 + y5;\r\n\t\tblock[6*8+i] = y3 - x4;\r\n\t\tblock[7*8+i] = y4 - b7;\r\n\t}\r\n\r\n\t// Transform rows\r\n\tfor (var i = 0; i < 64; i += 8) {\r\n\t\tb1 = block[4+i];\r\n\t\tb3 = block[2+i] + block[6+i];\r\n\t\tb4 = block[5+i] - block[3+i];\r\n\t\ttmp1 = block[1+i] + block[7+i];\r\n\t\ttmp2 = block[3+i] + block[5+i];\r\n\t\tb6 = block[1+i] - block[7+i];\r\n\t\tb7 = tmp1 + tmp2;\r\n\t\tm0 = block[0+i];\r\n\t\tx4 = ((b6*473 - b4*196 + 128) >> 8) - b7;\r\n\t\tx0 = x4 - (((tmp1 - tmp2)*362 + 128) >> 8);\r\n\t\tx1 = m0 - b1;\r\n\t\tx2 = (((block[2+i] - block[6+i])*362 + 128) >> 8) - b3;\r\n\t\tx3 = m0 + b1;\r\n\t\ty3 = x1 + x2;\r\n\t\ty4 = x3 + b3;\r\n\t\ty5 = x1 - x2;\r\n\t\ty6 = x3 - b3;\r\n\t\ty7 = -x0 - ((b4*473 + b6*196 + 128) >> 8);\r\n\t\tblock[0+i] = (b7 + y4 + 128) >> 8;\r\n\t\tblock[1+i] = (x4 + y3 + 128) >> 8;\r\n\t\tblock[2+i] = (y5 - x0 + 128) >> 8;\r\n\t\tblock[3+i] = (y6 - y7 + 128) >> 8;\r\n\t\tblock[4+i] = (y6 + y7 + 128) >> 8;\r\n\t\tblock[5+i] = (x0 + y5 + 128) >> 8;\r\n\t\tblock[6+i] = (y3 - x4 + 128) >> 8;\r\n\t\tblock[7+i] = (y4 - b7 + 128) >> 8;\r\n\t}\r\n};\r\n\r\n\r\n// VLC Tables and Constants\r\n\r\nMPEG1.PICTURE_RATE = [\r\n\t0.000, 23.976, 24.000, 25.000, 29.970, 30.000, 50.000, 59.940,\r\n\t60.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000\r\n];\r\n\r\nMPEG1.ZIG_ZAG = new Uint8Array([\r\n\t 0,  1,  8, 16,  9,  2,  3, 10,\r\n\t17, 24, 32, 25, 18, 11,  4,  5,\r\n\t12, 19, 26, 33, 40, 48, 41, 34,\r\n\t27, 20, 13,  6,  7, 14, 21, 28,\r\n\t35, 42, 49, 56, 57, 50, 43, 36,\r\n\t29, 22, 15, 23, 30, 37, 44, 51,\r\n\t58, 59, 52, 45, 38, 31, 39, 46,\r\n\t53, 60, 61, 54, 47, 55, 62, 63\r\n]);\r\n\r\nMPEG1.DEFAULT_INTRA_QUANT_MATRIX = new Uint8Array([\r\n\t 8, 16, 19, 22, 26, 27, 29, 34,\r\n\t16, 16, 22, 24, 27, 29, 34, 37,\r\n\t19, 22, 26, 27, 29, 34, 34, 38,\r\n\t22, 22, 26, 27, 29, 34, 37, 40,\r\n\t22, 26, 27, 29, 32, 35, 40, 48,\r\n\t26, 27, 29, 32, 35, 40, 48, 58,\r\n\t26, 27, 29, 34, 38, 46, 56, 69,\r\n\t27, 29, 35, 38, 46, 56, 69, 83\r\n]);\r\n\r\nMPEG1.DEFAULT_NON_INTRA_QUANT_MATRIX = new Uint8Array([\r\n\t16, 16, 16, 16, 16, 16, 16, 16,\r\n\t16, 16, 16, 16, 16, 16, 16, 16,\r\n\t16, 16, 16, 16, 16, 16, 16, 16,\r\n\t16, 16, 16, 16, 16, 16, 16, 16,\r\n\t16, 16, 16, 16, 16, 16, 16, 16,\r\n\t16, 16, 16, 16, 16, 16, 16, 16,\r\n\t16, 16, 16, 16, 16, 16, 16, 16,\r\n\t16, 16, 16, 16, 16, 16, 16, 16\r\n]);\r\n\r\nMPEG1.PREMULTIPLIER_MATRIX = new Uint8Array([\r\n\t32, 44, 42, 38, 32, 25, 17,  9,\r\n\t44, 62, 58, 52, 44, 35, 24, 12,\r\n\t42, 58, 55, 49, 42, 33, 23, 12,\r\n\t38, 52, 49, 44, 38, 30, 20, 10,\r\n\t32, 44, 42, 38, 32, 25, 17,  9,\r\n\t25, 35, 33, 30, 25, 20, 14,  7,\r\n\t17, 24, 23, 20, 17, 14,  9,  5,\r\n\t 9, 12, 12, 10,  9,  7,  5,  2\r\n]);\r\n\r\n// MPEG-1 VLC\r\n\r\n//  macroblock_stuffing decodes as 34.\r\n//  macroblock_escape decodes as 35.\r\n\r\nMPEG1.MACROBLOCK_ADDRESS_INCREMENT = new Int16Array([\r\n\t 1*3,  2*3,  0, //   0\r\n\t 3*3,  4*3,  0, //   1  0\r\n\t   0,    0,  1, //   2  1.\r\n\t 5*3,  6*3,  0, //   3  00\r\n\t 7*3,  8*3,  0, //   4  01\r\n\t 9*3, 10*3,  0, //   5  000\r\n\t11*3, 12*3,  0, //   6  001\r\n\t   0,    0,  3, //   7  010.\r\n\t   0,    0,  2, //   8  011.\r\n\t13*3, 14*3,  0, //   9  0000\r\n\t15*3, 16*3,  0, //  10  0001\r\n\t   0,    0,  5, //  11  0010.\r\n\t   0,    0,  4, //  12  0011.\r\n\t17*3, 18*3,  0, //  13  0000 0\r\n\t19*3, 20*3,  0, //  14  0000 1\r\n\t   0,    0,  7, //  15  0001 0.\r\n\t   0,    0,  6, //  16  0001 1.\r\n\t21*3, 22*3,  0, //  17  0000 00\r\n\t23*3, 24*3,  0, //  18  0000 01\r\n\t25*3, 26*3,  0, //  19  0000 10\r\n\t27*3, 28*3,  0, //  20  0000 11\r\n\t  -1, 29*3,  0, //  21  0000 000\r\n\t  -1, 30*3,  0, //  22  0000 001\r\n\t31*3, 32*3,  0, //  23  0000 010\r\n\t33*3, 34*3,  0, //  24  0000 011\r\n\t35*3, 36*3,  0, //  25  0000 100\r\n\t37*3, 38*3,  0, //  26  0000 101\r\n\t   0,    0,  9, //  27  0000 110.\r\n\t   0,    0,  8, //  28  0000 111.\r\n\t39*3, 40*3,  0, //  29  0000 0001\r\n\t41*3, 42*3,  0, //  30  0000 0011\r\n\t43*3, 44*3,  0, //  31  0000 0100\r\n\t45*3, 46*3,  0, //  32  0000 0101\r\n\t   0,    0, 15, //  33  0000 0110.\r\n\t   0,    0, 14, //  34  0000 0111.\r\n\t   0,    0, 13, //  35  0000 1000.\r\n\t   0,    0, 12, //  36  0000 1001.\r\n\t   0,    0, 11, //  37  0000 1010.\r\n\t   0,    0, 10, //  38  0000 1011.\r\n\t47*3,   -1,  0, //  39  0000 0001 0\r\n\t  -1, 48*3,  0, //  40  0000 0001 1\r\n\t49*3, 50*3,  0, //  41  0000 0011 0\r\n\t51*3, 52*3,  0, //  42  0000 0011 1\r\n\t53*3, 54*3,  0, //  43  0000 0100 0\r\n\t55*3, 56*3,  0, //  44  0000 0100 1\r\n\t57*3, 58*3,  0, //  45  0000 0101 0\r\n\t59*3, 60*3,  0, //  46  0000 0101 1\r\n\t61*3,   -1,  0, //  47  0000 0001 00\r\n\t  -1, 62*3,  0, //  48  0000 0001 11\r\n\t63*3, 64*3,  0, //  49  0000 0011 00\r\n\t65*3, 66*3,  0, //  50  0000 0011 01\r\n\t67*3, 68*3,  0, //  51  0000 0011 10\r\n\t69*3, 70*3,  0, //  52  0000 0011 11\r\n\t71*3, 72*3,  0, //  53  0000 0100 00\r\n\t73*3, 74*3,  0, //  54  0000 0100 01\r\n\t   0,    0, 21, //  55  0000 0100 10.\r\n\t   0,    0, 20, //  56  0000 0100 11.\r\n\t   0,    0, 19, //  57  0000 0101 00.\r\n\t   0,    0, 18, //  58  0000 0101 01.\r\n\t   0,    0, 17, //  59  0000 0101 10.\r\n\t   0,    0, 16, //  60  0000 0101 11.\r\n\t   0,    0, 35, //  61  0000 0001 000. -- macroblock_escape\r\n\t   0,    0, 34, //  62  0000 0001 111. -- macroblock_stuffing\r\n\t   0,    0, 33, //  63  0000 0011 000.\r\n\t   0,    0, 32, //  64  0000 0011 001.\r\n\t   0,    0, 31, //  65  0000 0011 010.\r\n\t   0,    0, 30, //  66  0000 0011 011.\r\n\t   0,    0, 29, //  67  0000 0011 100.\r\n\t   0,    0, 28, //  68  0000 0011 101.\r\n\t   0,    0, 27, //  69  0000 0011 110.\r\n\t   0,    0, 26, //  70  0000 0011 111.\r\n\t   0,    0, 25, //  71  0000 0100 000.\r\n\t   0,    0, 24, //  72  0000 0100 001.\r\n\t   0,    0, 23, //  73  0000 0100 010.\r\n\t   0,    0, 22  //  74  0000 0100 011.\r\n]);\r\n\r\n//  macroblock_type bitmap:\r\n//    0x10  macroblock_quant\r\n//    0x08  macroblock_motion_forward\r\n//    0x04  macroblock_motion_backward\r\n//    0x02  macrobkock_pattern\r\n//    0x01  macroblock_intra\r\n//\r\n\r\nMPEG1.MACROBLOCK_TYPE_INTRA = new Int8Array([\r\n\t 1*3,  2*3,     0, //   0\r\n\t  -1,  3*3,     0, //   1  0\r\n\t   0,    0,  0x01, //   2  1.\r\n\t   0,    0,  0x11  //   3  01.\r\n]);\r\n\r\nMPEG1.MACROBLOCK_TYPE_PREDICTIVE = new Int8Array([\r\n\t 1*3,  2*3,     0, //  0\r\n\t 3*3,  4*3,     0, //  1  0\r\n\t   0,    0,  0x0a, //  2  1.\r\n\t 5*3,  6*3,     0, //  3  00\r\n\t   0,    0,  0x02, //  4  01.\r\n\t 7*3,  8*3,     0, //  5  000\r\n\t   0,    0,  0x08, //  6  001.\r\n\t 9*3, 10*3,     0, //  7  0000\r\n\t11*3, 12*3,     0, //  8  0001\r\n\t  -1, 13*3,     0, //  9  00000\r\n\t   0,    0,  0x12, // 10  00001.\r\n\t   0,    0,  0x1a, // 11  00010.\r\n\t   0,    0,  0x01, // 12  00011.\r\n\t   0,    0,  0x11  // 13  000001.\r\n]);\r\n\r\nMPEG1.MACROBLOCK_TYPE_B = new Int8Array([\r\n\t 1*3,  2*3,     0,  //  0\r\n\t 3*3,  5*3,     0,  //  1  0\r\n\t 4*3,  6*3,     0,  //  2  1\r\n\t 8*3,  7*3,     0,  //  3  00\r\n\t   0,    0,  0x0c,  //  4  10.\r\n\t 9*3, 10*3,     0,  //  5  01\r\n\t   0,    0,  0x0e,  //  6  11.\r\n\t13*3, 14*3,     0,  //  7  001\r\n\t12*3, 11*3,     0,  //  8  000\r\n\t   0,    0,  0x04,  //  9  010.\r\n\t   0,    0,  0x06,  // 10  011.\r\n\t18*3, 16*3,     0,  // 11  0001\r\n\t15*3, 17*3,     0,  // 12  0000\r\n\t   0,    0,  0x08,  // 13  0010.\r\n\t   0,    0,  0x0a,  // 14  0011.\r\n\t  -1, 19*3,     0,  // 15  00000\r\n\t   0,    0,  0x01,  // 16  00011.\r\n\t20*3, 21*3,     0,  // 17  00001\r\n\t   0,    0,  0x1e,  // 18  00010.\r\n\t   0,    0,  0x11,  // 19  000001.\r\n\t   0,    0,  0x16,  // 20  000010.\r\n\t   0,    0,  0x1a   // 21  000011.\r\n]);\r\n\r\nMPEG1.MACROBLOCK_TYPE = [\r\n\tnull,\r\n\tMPEG1.MACROBLOCK_TYPE_INTRA,\r\n\tMPEG1.MACROBLOCK_TYPE_PREDICTIVE,\r\n\tMPEG1.MACROBLOCK_TYPE_B\r\n];\r\n\r\nMPEG1.CODE_BLOCK_PATTERN = new Int16Array([\r\n\t  2*3,   1*3,   0,  //   0\r\n\t  3*3,   6*3,   0,  //   1  1\r\n\t  4*3,   5*3,   0,  //   2  0\r\n\t  8*3,  11*3,   0,  //   3  10\r\n\t 12*3,  13*3,   0,  //   4  00\r\n\t  9*3,   7*3,   0,  //   5  01\r\n\t 10*3,  14*3,   0,  //   6  11\r\n\t 20*3,  19*3,   0,  //   7  011\r\n\t 18*3,  16*3,   0,  //   8  100\r\n\t 23*3,  17*3,   0,  //   9  010\r\n\t 27*3,  25*3,   0,  //  10  110\r\n\t 21*3,  28*3,   0,  //  11  101\r\n\t 15*3,  22*3,   0,  //  12  000\r\n\t 24*3,  26*3,   0,  //  13  001\r\n\t    0,     0,  60,  //  14  111.\r\n\t 35*3,  40*3,   0,  //  15  0000\r\n\t 44*3,  48*3,   0,  //  16  1001\r\n\t 38*3,  36*3,   0,  //  17  0101\r\n\t 42*3,  47*3,   0,  //  18  1000\r\n\t 29*3,  31*3,   0,  //  19  0111\r\n\t 39*3,  32*3,   0,  //  20  0110\r\n\t    0,     0,  32,  //  21  1010.\r\n\t 45*3,  46*3,   0,  //  22  0001\r\n\t 33*3,  41*3,   0,  //  23  0100\r\n\t 43*3,  34*3,   0,  //  24  0010\r\n\t    0,     0,   4,  //  25  1101.\r\n\t 30*3,  37*3,   0,  //  26  0011\r\n\t    0,     0,   8,  //  27  1100.\r\n\t    0,     0,  16,  //  28  1011.\r\n\t    0,     0,  44,  //  29  0111 0.\r\n\t 50*3,  56*3,   0,  //  30  0011 0\r\n\t    0,     0,  28,  //  31  0111 1.\r\n\t    0,     0,  52,  //  32  0110 1.\r\n\t    0,     0,  62,  //  33  0100 0.\r\n\t 61*3,  59*3,   0,  //  34  0010 1\r\n\t 52*3,  60*3,   0,  //  35  0000 0\r\n\t    0,     0,   1,  //  36  0101 1.\r\n\t 55*3,  54*3,   0,  //  37  0011 1\r\n\t    0,     0,  61,  //  38  0101 0.\r\n\t    0,     0,  56,  //  39  0110 0.\r\n\t 57*3,  58*3,   0,  //  40  0000 1\r\n\t    0,     0,   2,  //  41  0100 1.\r\n\t    0,     0,  40,  //  42  1000 0.\r\n\t 51*3,  62*3,   0,  //  43  0010 0\r\n\t    0,     0,  48,  //  44  1001 0.\r\n\t 64*3,  63*3,   0,  //  45  0001 0\r\n\t 49*3,  53*3,   0,  //  46  0001 1\r\n\t    0,     0,  20,  //  47  1000 1.\r\n\t    0,     0,  12,  //  48  1001 1.\r\n\t 80*3,  83*3,   0,  //  49  0001 10\r\n\t    0,     0,  63,  //  50  0011 00.\r\n\t 77*3,  75*3,   0,  //  51  0010 00\r\n\t 65*3,  73*3,   0,  //  52  0000 00\r\n\t 84*3,  66*3,   0,  //  53  0001 11\r\n\t    0,     0,  24,  //  54  0011 11.\r\n\t    0,     0,  36,  //  55  0011 10.\r\n\t    0,     0,   3,  //  56  0011 01.\r\n\t 69*3,  87*3,   0,  //  57  0000 10\r\n\t 81*3,  79*3,   0,  //  58  0000 11\r\n\t 68*3,  71*3,   0,  //  59  0010 11\r\n\t 70*3,  78*3,   0,  //  60  0000 01\r\n\t 67*3,  76*3,   0,  //  61  0010 10\r\n\t 72*3,  74*3,   0,  //  62  0010 01\r\n\t 86*3,  85*3,   0,  //  63  0001 01\r\n\t 88*3,  82*3,   0,  //  64  0001 00\r\n\t   -1,  94*3,   0,  //  65  0000 000\r\n\t 95*3,  97*3,   0,  //  66  0001 111\r\n\t    0,     0,  33,  //  67  0010 100.\r\n\t    0,     0,   9,  //  68  0010 110.\r\n\t106*3, 110*3,   0,  //  69  0000 100\r\n\t102*3, 116*3,   0,  //  70  0000 010\r\n\t    0,     0,   5,  //  71  0010 111.\r\n\t    0,     0,  10,  //  72  0010 010.\r\n\t 93*3,  89*3,   0,  //  73  0000 001\r\n\t    0,     0,   6,  //  74  0010 011.\r\n\t    0,     0,  18,  //  75  0010 001.\r\n\t    0,     0,  17,  //  76  0010 101.\r\n\t    0,     0,  34,  //  77  0010 000.\r\n\t113*3, 119*3,   0,  //  78  0000 011\r\n\t103*3, 104*3,   0,  //  79  0000 111\r\n\t 90*3,  92*3,   0,  //  80  0001 100\r\n\t109*3, 107*3,   0,  //  81  0000 110\r\n\t117*3, 118*3,   0,  //  82  0001 001\r\n\t101*3,  99*3,   0,  //  83  0001 101\r\n\t 98*3,  96*3,   0,  //  84  0001 110\r\n\t100*3,  91*3,   0,  //  85  0001 011\r\n\t114*3, 115*3,   0,  //  86  0001 010\r\n\t105*3, 108*3,   0,  //  87  0000 101\r\n\t112*3, 111*3,   0,  //  88  0001 000\r\n\t121*3, 125*3,   0,  //  89  0000 0011\r\n\t    0,     0,  41,  //  90  0001 1000.\r\n\t    0,     0,  14,  //  91  0001 0111.\r\n\t    0,     0,  21,  //  92  0001 1001.\r\n\t124*3, 122*3,   0,  //  93  0000 0010\r\n\t120*3, 123*3,   0,  //  94  0000 0001\r\n\t    0,     0,  11,  //  95  0001 1110.\r\n\t    0,     0,  19,  //  96  0001 1101.\r\n\t    0,     0,   7,  //  97  0001 1111.\r\n\t    0,     0,  35,  //  98  0001 1100.\r\n\t    0,     0,  13,  //  99  0001 1011.\r\n\t    0,     0,  50,  // 100  0001 0110.\r\n\t    0,     0,  49,  // 101  0001 1010.\r\n\t    0,     0,  58,  // 102  0000 0100.\r\n\t    0,     0,  37,  // 103  0000 1110.\r\n\t    0,     0,  25,  // 104  0000 1111.\r\n\t    0,     0,  45,  // 105  0000 1010.\r\n\t    0,     0,  57,  // 106  0000 1000.\r\n\t    0,     0,  26,  // 107  0000 1101.\r\n\t    0,     0,  29,  // 108  0000 1011.\r\n\t    0,     0,  38,  // 109  0000 1100.\r\n\t    0,     0,  53,  // 110  0000 1001.\r\n\t    0,     0,  23,  // 111  0001 0001.\r\n\t    0,     0,  43,  // 112  0001 0000.\r\n\t    0,     0,  46,  // 113  0000 0110.\r\n\t    0,     0,  42,  // 114  0001 0100.\r\n\t    0,     0,  22,  // 115  0001 0101.\r\n\t    0,     0,  54,  // 116  0000 0101.\r\n\t    0,     0,  51,  // 117  0001 0010.\r\n\t    0,     0,  15,  // 118  0001 0011.\r\n\t    0,     0,  30,  // 119  0000 0111.\r\n\t    0,     0,  39,  // 120  0000 0001 0.\r\n\t    0,     0,  47,  // 121  0000 0011 0.\r\n\t    0,     0,  55,  // 122  0000 0010 1.\r\n\t    0,     0,  27,  // 123  0000 0001 1.\r\n\t    0,     0,  59,  // 124  0000 0010 0.\r\n\t    0,     0,  31   // 125  0000 0011 1.\r\n]);\r\n\r\nMPEG1.MOTION = new Int16Array([\r\n\t  1*3,   2*3,   0,  //   0\r\n\t  4*3,   3*3,   0,  //   1  0\r\n\t    0,     0,   0,  //   2  1.\r\n\t  6*3,   5*3,   0,  //   3  01\r\n\t  8*3,   7*3,   0,  //   4  00\r\n\t    0,     0,  -1,  //   5  011.\r\n\t    0,     0,   1,  //   6  010.\r\n\t  9*3,  10*3,   0,  //   7  001\r\n\t 12*3,  11*3,   0,  //   8  000\r\n\t    0,     0,   2,  //   9  0010.\r\n\t    0,     0,  -2,  //  10  0011.\r\n\t 14*3,  15*3,   0,  //  11  0001\r\n\t 16*3,  13*3,   0,  //  12  0000\r\n\t 20*3,  18*3,   0,  //  13  0000 1\r\n\t    0,     0,   3,  //  14  0001 0.\r\n\t    0,     0,  -3,  //  15  0001 1.\r\n\t 17*3,  19*3,   0,  //  16  0000 0\r\n\t   -1,  23*3,   0,  //  17  0000 00\r\n\t 27*3,  25*3,   0,  //  18  0000 11\r\n\t 26*3,  21*3,   0,  //  19  0000 01\r\n\t 24*3,  22*3,   0,  //  20  0000 10\r\n\t 32*3,  28*3,   0,  //  21  0000 011\r\n\t 29*3,  31*3,   0,  //  22  0000 101\r\n\t   -1,  33*3,   0,  //  23  0000 001\r\n\t 36*3,  35*3,   0,  //  24  0000 100\r\n\t    0,     0,  -4,  //  25  0000 111.\r\n\t 30*3,  34*3,   0,  //  26  0000 010\r\n\t    0,     0,   4,  //  27  0000 110.\r\n\t    0,     0,  -7,  //  28  0000 0111.\r\n\t    0,     0,   5,  //  29  0000 1010.\r\n\t 37*3,  41*3,   0,  //  30  0000 0100\r\n\t    0,     0,  -5,  //  31  0000 1011.\r\n\t    0,     0,   7,  //  32  0000 0110.\r\n\t 38*3,  40*3,   0,  //  33  0000 0011\r\n\t 42*3,  39*3,   0,  //  34  0000 0101\r\n\t    0,     0,  -6,  //  35  0000 1001.\r\n\t    0,     0,   6,  //  36  0000 1000.\r\n\t 51*3,  54*3,   0,  //  37  0000 0100 0\r\n\t 50*3,  49*3,   0,  //  38  0000 0011 0\r\n\t 45*3,  46*3,   0,  //  39  0000 0101 1\r\n\t 52*3,  47*3,   0,  //  40  0000 0011 1\r\n\t 43*3,  53*3,   0,  //  41  0000 0100 1\r\n\t 44*3,  48*3,   0,  //  42  0000 0101 0\r\n\t    0,     0,  10,  //  43  0000 0100 10.\r\n\t    0,     0,   9,  //  44  0000 0101 00.\r\n\t    0,     0,   8,  //  45  0000 0101 10.\r\n\t    0,     0,  -8,  //  46  0000 0101 11.\r\n\t 57*3,  66*3,   0,  //  47  0000 0011 11\r\n\t    0,     0,  -9,  //  48  0000 0101 01.\r\n\t 60*3,  64*3,   0,  //  49  0000 0011 01\r\n\t 56*3,  61*3,   0,  //  50  0000 0011 00\r\n\t 55*3,  62*3,   0,  //  51  0000 0100 00\r\n\t 58*3,  63*3,   0,  //  52  0000 0011 10\r\n\t    0,     0, -10,  //  53  0000 0100 11.\r\n\t 59*3,  65*3,   0,  //  54  0000 0100 01\r\n\t    0,     0,  12,  //  55  0000 0100 000.\r\n\t    0,     0,  16,  //  56  0000 0011 000.\r\n\t    0,     0,  13,  //  57  0000 0011 110.\r\n\t    0,     0,  14,  //  58  0000 0011 100.\r\n\t    0,     0,  11,  //  59  0000 0100 010.\r\n\t    0,     0,  15,  //  60  0000 0011 010.\r\n\t    0,     0, -16,  //  61  0000 0011 001.\r\n\t    0,     0, -12,  //  62  0000 0100 001.\r\n\t    0,     0, -14,  //  63  0000 0011 101.\r\n\t    0,     0, -15,  //  64  0000 0011 011.\r\n\t    0,     0, -11,  //  65  0000 0100 011.\r\n\t    0,     0, -13   //  66  0000 0011 111.\r\n]);\r\n\r\nMPEG1.DCT_DC_SIZE_LUMINANCE = new Int8Array([\r\n\t  2*3,   1*3, 0,  //   0\r\n\t  6*3,   5*3, 0,  //   1  1\r\n\t  3*3,   4*3, 0,  //   2  0\r\n\t    0,     0, 1,  //   3  00.\r\n\t    0,     0, 2,  //   4  01.\r\n\t  9*3,   8*3, 0,  //   5  11\r\n\t  7*3,  10*3, 0,  //   6  10\r\n\t    0,     0, 0,  //   7  100.\r\n\t 12*3,  11*3, 0,  //   8  111\r\n\t    0,     0, 4,  //   9  110.\r\n\t    0,     0, 3,  //  10  101.\r\n\t 13*3,  14*3, 0,  //  11  1111\r\n\t    0,     0, 5,  //  12  1110.\r\n\t    0,     0, 6,  //  13  1111 0.\r\n\t 16*3,  15*3, 0,  //  14  1111 1\r\n\t 17*3,    -1, 0,  //  15  1111 11\r\n\t    0,     0, 7,  //  16  1111 10.\r\n\t    0,     0, 8   //  17  1111 110.\r\n]);\r\n\r\nMPEG1.DCT_DC_SIZE_CHROMINANCE = new Int8Array([\r\n\t  2*3,   1*3, 0,  //   0\r\n\t  4*3,   3*3, 0,  //   1  1\r\n\t  6*3,   5*3, 0,  //   2  0\r\n\t  8*3,   7*3, 0,  //   3  11\r\n\t    0,     0, 2,  //   4  10.\r\n\t    0,     0, 1,  //   5  01.\r\n\t    0,     0, 0,  //   6  00.\r\n\t 10*3,   9*3, 0,  //   7  111\r\n\t    0,     0, 3,  //   8  110.\r\n\t 12*3,  11*3, 0,  //   9  1111\r\n\t    0,     0, 4,  //  10  1110.\r\n\t 14*3,  13*3, 0,  //  11  1111 1\r\n\t    0,     0, 5,  //  12  1111 0.\r\n\t 16*3,  15*3, 0,  //  13  1111 11\r\n\t    0,     0, 6,  //  14  1111 10.\r\n\t 17*3,    -1, 0,  //  15  1111 111\r\n\t    0,     0, 7,  //  16  1111 110.\r\n\t    0,     0, 8   //  17  1111 1110.\r\n]);\r\n\r\n//  dct_coeff bitmap:\r\n//    0xff00  run\r\n//    0x00ff  level\r\n\r\n//  Decoded values are unsigned. Sign bit follows in the stream.\r\n\r\n//  Interpretation of the value 0x0001\r\n//    for dc_coeff_first:  run=0, level=1\r\n//    for dc_coeff_next:   If the next bit is 1: run=0, level=1\r\n//                         If the next bit is 0: end_of_block\r\n\r\n//  escape decodes as 0xffff.\r\n\r\nMPEG1.DCT_COEFF = new Int32Array([\r\n\t  1*3,   2*3,      0,  //   0\r\n\t  4*3,   3*3,      0,  //   1  0\r\n\t    0,     0, 0x0001,  //   2  1.\r\n\t  7*3,   8*3,      0,  //   3  01\r\n\t  6*3,   5*3,      0,  //   4  00\r\n\t 13*3,   9*3,      0,  //   5  001\r\n\t 11*3,  10*3,      0,  //   6  000\r\n\t 14*3,  12*3,      0,  //   7  010\r\n\t    0,     0, 0x0101,  //   8  011.\r\n\t 20*3,  22*3,      0,  //   9  0011\r\n\t 18*3,  21*3,      0,  //  10  0001\r\n\t 16*3,  19*3,      0,  //  11  0000\r\n\t    0,     0, 0x0201,  //  12  0101.\r\n\t 17*3,  15*3,      0,  //  13  0010\r\n\t    0,     0, 0x0002,  //  14  0100.\r\n\t    0,     0, 0x0003,  //  15  0010 1.\r\n\t 27*3,  25*3,      0,  //  16  0000 0\r\n\t 29*3,  31*3,      0,  //  17  0010 0\r\n\t 24*3,  26*3,      0,  //  18  0001 0\r\n\t 32*3,  30*3,      0,  //  19  0000 1\r\n\t    0,     0, 0x0401,  //  20  0011 0.\r\n\t 23*3,  28*3,      0,  //  21  0001 1\r\n\t    0,     0, 0x0301,  //  22  0011 1.\r\n\t    0,     0, 0x0102,  //  23  0001 10.\r\n\t    0,     0, 0x0701,  //  24  0001 00.\r\n\t    0,     0, 0xffff,  //  25  0000 01. -- escape\r\n\t    0,     0, 0x0601,  //  26  0001 01.\r\n\t 37*3,  36*3,      0,  //  27  0000 00\r\n\t    0,     0, 0x0501,  //  28  0001 11.\r\n\t 35*3,  34*3,      0,  //  29  0010 00\r\n\t 39*3,  38*3,      0,  //  30  0000 11\r\n\t 33*3,  42*3,      0,  //  31  0010 01\r\n\t 40*3,  41*3,      0,  //  32  0000 10\r\n\t 52*3,  50*3,      0,  //  33  0010 010\r\n\t 54*3,  53*3,      0,  //  34  0010 001\r\n\t 48*3,  49*3,      0,  //  35  0010 000\r\n\t 43*3,  45*3,      0,  //  36  0000 001\r\n\t 46*3,  44*3,      0,  //  37  0000 000\r\n\t    0,     0, 0x0801,  //  38  0000 111.\r\n\t    0,     0, 0x0004,  //  39  0000 110.\r\n\t    0,     0, 0x0202,  //  40  0000 100.\r\n\t    0,     0, 0x0901,  //  41  0000 101.\r\n\t 51*3,  47*3,      0,  //  42  0010 011\r\n\t 55*3,  57*3,      0,  //  43  0000 0010\r\n\t 60*3,  56*3,      0,  //  44  0000 0001\r\n\t 59*3,  58*3,      0,  //  45  0000 0011\r\n\t 61*3,  62*3,      0,  //  46  0000 0000\r\n\t    0,     0, 0x0a01,  //  47  0010 0111.\r\n\t    0,     0, 0x0d01,  //  48  0010 0000.\r\n\t    0,     0, 0x0006,  //  49  0010 0001.\r\n\t    0,     0, 0x0103,  //  50  0010 0101.\r\n\t    0,     0, 0x0005,  //  51  0010 0110.\r\n\t    0,     0, 0x0302,  //  52  0010 0100.\r\n\t    0,     0, 0x0b01,  //  53  0010 0011.\r\n\t    0,     0, 0x0c01,  //  54  0010 0010.\r\n\t 76*3,  75*3,      0,  //  55  0000 0010 0\r\n\t 67*3,  70*3,      0,  //  56  0000 0001 1\r\n\t 73*3,  71*3,      0,  //  57  0000 0010 1\r\n\t 78*3,  74*3,      0,  //  58  0000 0011 1\r\n\t 72*3,  77*3,      0,  //  59  0000 0011 0\r\n\t 69*3,  64*3,      0,  //  60  0000 0001 0\r\n\t 68*3,  63*3,      0,  //  61  0000 0000 0\r\n\t 66*3,  65*3,      0,  //  62  0000 0000 1\r\n\t 81*3,  87*3,      0,  //  63  0000 0000 01\r\n\t 91*3,  80*3,      0,  //  64  0000 0001 01\r\n\t 82*3,  79*3,      0,  //  65  0000 0000 11\r\n\t 83*3,  86*3,      0,  //  66  0000 0000 10\r\n\t 93*3,  92*3,      0,  //  67  0000 0001 10\r\n\t 84*3,  85*3,      0,  //  68  0000 0000 00\r\n\t 90*3,  94*3,      0,  //  69  0000 0001 00\r\n\t 88*3,  89*3,      0,  //  70  0000 0001 11\r\n\t    0,     0, 0x0203,  //  71  0000 0010 11.\r\n\t    0,     0, 0x0104,  //  72  0000 0011 00.\r\n\t    0,     0, 0x0007,  //  73  0000 0010 10.\r\n\t    0,     0, 0x0402,  //  74  0000 0011 11.\r\n\t    0,     0, 0x0502,  //  75  0000 0010 01.\r\n\t    0,     0, 0x1001,  //  76  0000 0010 00.\r\n\t    0,     0, 0x0f01,  //  77  0000 0011 01.\r\n\t    0,     0, 0x0e01,  //  78  0000 0011 10.\r\n\t105*3, 107*3,      0,  //  79  0000 0000 111\r\n\t111*3, 114*3,      0,  //  80  0000 0001 011\r\n\t104*3,  97*3,      0,  //  81  0000 0000 010\r\n\t125*3, 119*3,      0,  //  82  0000 0000 110\r\n\t 96*3,  98*3,      0,  //  83  0000 0000 100\r\n\t   -1, 123*3,      0,  //  84  0000 0000 000\r\n\t 95*3, 101*3,      0,  //  85  0000 0000 001\r\n\t106*3, 121*3,      0,  //  86  0000 0000 101\r\n\t 99*3, 102*3,      0,  //  87  0000 0000 011\r\n\t113*3, 103*3,      0,  //  88  0000 0001 110\r\n\t112*3, 116*3,      0,  //  89  0000 0001 111\r\n\t110*3, 100*3,      0,  //  90  0000 0001 000\r\n\t124*3, 115*3,      0,  //  91  0000 0001 010\r\n\t117*3, 122*3,      0,  //  92  0000 0001 101\r\n\t109*3, 118*3,      0,  //  93  0000 0001 100\r\n\t120*3, 108*3,      0,  //  94  0000 0001 001\r\n\t127*3, 136*3,      0,  //  95  0000 0000 0010\r\n\t139*3, 140*3,      0,  //  96  0000 0000 1000\r\n\t130*3, 126*3,      0,  //  97  0000 0000 0101\r\n\t145*3, 146*3,      0,  //  98  0000 0000 1001\r\n\t128*3, 129*3,      0,  //  99  0000 0000 0110\r\n\t    0,     0, 0x0802,  // 100  0000 0001 0001.\r\n\t132*3, 134*3,      0,  // 101  0000 0000 0011\r\n\t155*3, 154*3,      0,  // 102  0000 0000 0111\r\n\t    0,     0, 0x0008,  // 103  0000 0001 1101.\r\n\t137*3, 133*3,      0,  // 104  0000 0000 0100\r\n\t143*3, 144*3,      0,  // 105  0000 0000 1110\r\n\t151*3, 138*3,      0,  // 106  0000 0000 1010\r\n\t142*3, 141*3,      0,  // 107  0000 0000 1111\r\n\t    0,     0, 0x000a,  // 108  0000 0001 0011.\r\n\t    0,     0, 0x0009,  // 109  0000 0001 1000.\r\n\t    0,     0, 0x000b,  // 110  0000 0001 0000.\r\n\t    0,     0, 0x1501,  // 111  0000 0001 0110.\r\n\t    0,     0, 0x0602,  // 112  0000 0001 1110.\r\n\t    0,     0, 0x0303,  // 113  0000 0001 1100.\r\n\t    0,     0, 0x1401,  // 114  0000 0001 0111.\r\n\t    0,     0, 0x0702,  // 115  0000 0001 0101.\r\n\t    0,     0, 0x1101,  // 116  0000 0001 1111.\r\n\t    0,     0, 0x1201,  // 117  0000 0001 1010.\r\n\t    0,     0, 0x1301,  // 118  0000 0001 1001.\r\n\t148*3, 152*3,      0,  // 119  0000 0000 1101\r\n\t    0,     0, 0x0403,  // 120  0000 0001 0010.\r\n\t153*3, 150*3,      0,  // 121  0000 0000 1011\r\n\t    0,     0, 0x0105,  // 122  0000 0001 1011.\r\n\t131*3, 135*3,      0,  // 123  0000 0000 0001\r\n\t    0,     0, 0x0204,  // 124  0000 0001 0100.\r\n\t149*3, 147*3,      0,  // 125  0000 0000 1100\r\n\t172*3, 173*3,      0,  // 126  0000 0000 0101 1\r\n\t162*3, 158*3,      0,  // 127  0000 0000 0010 0\r\n\t170*3, 161*3,      0,  // 128  0000 0000 0110 0\r\n\t168*3, 166*3,      0,  // 129  0000 0000 0110 1\r\n\t157*3, 179*3,      0,  // 130  0000 0000 0101 0\r\n\t169*3, 167*3,      0,  // 131  0000 0000 0001 0\r\n\t174*3, 171*3,      0,  // 132  0000 0000 0011 0\r\n\t178*3, 177*3,      0,  // 133  0000 0000 0100 1\r\n\t156*3, 159*3,      0,  // 134  0000 0000 0011 1\r\n\t164*3, 165*3,      0,  // 135  0000 0000 0001 1\r\n\t183*3, 182*3,      0,  // 136  0000 0000 0010 1\r\n\t175*3, 176*3,      0,  // 137  0000 0000 0100 0\r\n\t    0,     0, 0x0107,  // 138  0000 0000 1010 1.\r\n\t    0,     0, 0x0a02,  // 139  0000 0000 1000 0.\r\n\t    0,     0, 0x0902,  // 140  0000 0000 1000 1.\r\n\t    0,     0, 0x1601,  // 141  0000 0000 1111 1.\r\n\t    0,     0, 0x1701,  // 142  0000 0000 1111 0.\r\n\t    0,     0, 0x1901,  // 143  0000 0000 1110 0.\r\n\t    0,     0, 0x1801,  // 144  0000 0000 1110 1.\r\n\t    0,     0, 0x0503,  // 145  0000 0000 1001 0.\r\n\t    0,     0, 0x0304,  // 146  0000 0000 1001 1.\r\n\t    0,     0, 0x000d,  // 147  0000 0000 1100 1.\r\n\t    0,     0, 0x000c,  // 148  0000 0000 1101 0.\r\n\t    0,     0, 0x000e,  // 149  0000 0000 1100 0.\r\n\t    0,     0, 0x000f,  // 150  0000 0000 1011 1.\r\n\t    0,     0, 0x0205,  // 151  0000 0000 1010 0.\r\n\t    0,     0, 0x1a01,  // 152  0000 0000 1101 1.\r\n\t    0,     0, 0x0106,  // 153  0000 0000 1011 0.\r\n\t180*3, 181*3,      0,  // 154  0000 0000 0111 1\r\n\t160*3, 163*3,      0,  // 155  0000 0000 0111 0\r\n\t196*3, 199*3,      0,  // 156  0000 0000 0011 10\r\n\t    0,     0, 0x001b,  // 157  0000 0000 0101 00.\r\n\t203*3, 185*3,      0,  // 158  0000 0000 0010 01\r\n\t202*3, 201*3,      0,  // 159  0000 0000 0011 11\r\n\t    0,     0, 0x0013,  // 160  0000 0000 0111 00.\r\n\t    0,     0, 0x0016,  // 161  0000 0000 0110 01.\r\n\t197*3, 207*3,      0,  // 162  0000 0000 0010 00\r\n\t    0,     0, 0x0012,  // 163  0000 0000 0111 01.\r\n\t191*3, 192*3,      0,  // 164  0000 0000 0001 10\r\n\t188*3, 190*3,      0,  // 165  0000 0000 0001 11\r\n\t    0,     0, 0x0014,  // 166  0000 0000 0110 11.\r\n\t184*3, 194*3,      0,  // 167  0000 0000 0001 01\r\n\t    0,     0, 0x0015,  // 168  0000 0000 0110 10.\r\n\t186*3, 193*3,      0,  // 169  0000 0000 0001 00\r\n\t    0,     0, 0x0017,  // 170  0000 0000 0110 00.\r\n\t204*3, 198*3,      0,  // 171  0000 0000 0011 01\r\n\t    0,     0, 0x0019,  // 172  0000 0000 0101 10.\r\n\t    0,     0, 0x0018,  // 173  0000 0000 0101 11.\r\n\t200*3, 205*3,      0,  // 174  0000 0000 0011 00\r\n\t    0,     0, 0x001f,  // 175  0000 0000 0100 00.\r\n\t    0,     0, 0x001e,  // 176  0000 0000 0100 01.\r\n\t    0,     0, 0x001c,  // 177  0000 0000 0100 11.\r\n\t    0,     0, 0x001d,  // 178  0000 0000 0100 10.\r\n\t    0,     0, 0x001a,  // 179  0000 0000 0101 01.\r\n\t    0,     0, 0x0011,  // 180  0000 0000 0111 10.\r\n\t    0,     0, 0x0010,  // 181  0000 0000 0111 11.\r\n\t189*3, 206*3,      0,  // 182  0000 0000 0010 11\r\n\t187*3, 195*3,      0,  // 183  0000 0000 0010 10\r\n\t218*3, 211*3,      0,  // 184  0000 0000 0001 010\r\n\t    0,     0, 0x0025,  // 185  0000 0000 0010 011.\r\n\t215*3, 216*3,      0,  // 186  0000 0000 0001 000\r\n\t    0,     0, 0x0024,  // 187  0000 0000 0010 100.\r\n\t210*3, 212*3,      0,  // 188  0000 0000 0001 110\r\n\t    0,     0, 0x0022,  // 189  0000 0000 0010 110.\r\n\t213*3, 209*3,      0,  // 190  0000 0000 0001 111\r\n\t221*3, 222*3,      0,  // 191  0000 0000 0001 100\r\n\t219*3, 208*3,      0,  // 192  0000 0000 0001 101\r\n\t217*3, 214*3,      0,  // 193  0000 0000 0001 001\r\n\t223*3, 220*3,      0,  // 194  0000 0000 0001 011\r\n\t    0,     0, 0x0023,  // 195  0000 0000 0010 101.\r\n\t    0,     0, 0x010b,  // 196  0000 0000 0011 100.\r\n\t    0,     0, 0x0028,  // 197  0000 0000 0010 000.\r\n\t    0,     0, 0x010c,  // 198  0000 0000 0011 011.\r\n\t    0,     0, 0x010a,  // 199  0000 0000 0011 101.\r\n\t    0,     0, 0x0020,  // 200  0000 0000 0011 000.\r\n\t    0,     0, 0x0108,  // 201  0000 0000 0011 111.\r\n\t    0,     0, 0x0109,  // 202  0000 0000 0011 110.\r\n\t    0,     0, 0x0026,  // 203  0000 0000 0010 010.\r\n\t    0,     0, 0x010d,  // 204  0000 0000 0011 010.\r\n\t    0,     0, 0x010e,  // 205  0000 0000 0011 001.\r\n\t    0,     0, 0x0021,  // 206  0000 0000 0010 111.\r\n\t    0,     0, 0x0027,  // 207  0000 0000 0010 001.\r\n\t    0,     0, 0x1f01,  // 208  0000 0000 0001 1011.\r\n\t    0,     0, 0x1b01,  // 209  0000 0000 0001 1111.\r\n\t    0,     0, 0x1e01,  // 210  0000 0000 0001 1100.\r\n\t    0,     0, 0x1002,  // 211  0000 0000 0001 0101.\r\n\t    0,     0, 0x1d01,  // 212  0000 0000 0001 1101.\r\n\t    0,     0, 0x1c01,  // 213  0000 0000 0001 1110.\r\n\t    0,     0, 0x010f,  // 214  0000 0000 0001 0011.\r\n\t    0,     0, 0x0112,  // 215  0000 0000 0001 0000.\r\n\t    0,     0, 0x0111,  // 216  0000 0000 0001 0001.\r\n\t    0,     0, 0x0110,  // 217  0000 0000 0001 0010.\r\n\t    0,     0, 0x0603,  // 218  0000 0000 0001 0100.\r\n\t    0,     0, 0x0b02,  // 219  0000 0000 0001 1010.\r\n\t    0,     0, 0x0e02,  // 220  0000 0000 0001 0111.\r\n\t    0,     0, 0x0d02,  // 221  0000 0000 0001 1000.\r\n\t    0,     0, 0x0c02,  // 222  0000 0000 0001 1001.\r\n\t    0,     0, 0x0f02   // 223  0000 0000 0001 0110.\r\n]);\r\n\r\nMPEG1.PICTURE_TYPE = {\r\n\tINTRA: 1,\r\n\tPREDICTIVE: 2,\r\n\tB: 3\r\n};\r\n\r\nMPEG1.START = {\r\n\tSEQUENCE: 0xB3,\r\n\tSLICE_FIRST: 0x01,\r\n\tSLICE_LAST: 0xAF,\r\n\tPICTURE: 0x00,\r\n\tEXTENSION: 0xB5,\r\n\tUSER_DATA: 0xB2\r\n};\r\n\r\nexport default MPEG1;\r\n\r\n","import JSMpeg from '../';\r\n\r\n/**\r\n * @param url\r\n * @param options\r\n * @param cbUI {play: function, pause: function, stop: function} UI\r\n * @constructor\r\n */\r\nlet Player = function (url, options, cbUI) {\r\n  this.options = options || {};\r\n  this.cbUI = cbUI || {};\r\n\r\n  if (options.source) {\r\n    this.source = new options.source(url, options);\r\n    options.streaming = !!this.source.streaming;\r\n  }\r\n  else if (url.match(/^wss?:\\/\\//)) {\r\n    this.source = new JSMpeg.Source.WebSocket(url, options);\r\n    options.streaming = true;\r\n  }\r\n  else if (options.progressive) {\r\n    this.source = new JSMpeg.Source.AjaxProgressive(url, options);\r\n    options.streaming = false;\r\n  }\r\n  else {\r\n    this.source = new JSMpeg.Source.Ajax(url, options);\r\n    options.streaming = false;\r\n  }\r\n\r\n  this.maxAudioLag = options.maxAudioLag || 0.25;\r\n  this.loop = options.loop !== false;\r\n  this.autoplay = !!options.autoplay || options.streaming;\r\n\r\n  this.demuxer = new JSMpeg.Demuxer.TS(options);\r\n  this.source.connect(this.demuxer);\r\n\r\n  if (options.video !== false) {\r\n    this.video = new JSMpeg.Decoder.MPEG1Video(options);\r\n    this.renderer = !options.disableGl && JSMpeg.Renderer.WebGL.IsSupported()\r\n      ? new JSMpeg.Renderer.WebGL(options)\r\n      : new JSMpeg.Renderer.Canvas2D(options);\r\n    this.demuxer.connect(JSMpeg.Demuxer.TS.STREAM.VIDEO_1, this.video);\r\n    this.video.connect(this.renderer);\r\n  }\r\n\r\n  if (options.audio !== false && JSMpeg.AudioOutput.WebAudio.IsSupported()) {\r\n    this.audio = new JSMpeg.Decoder.MP2Audio(options);\r\n    this.audioOut = new JSMpeg.AudioOutput.WebAudio(options);\r\n    this.demuxer.connect(JSMpeg.Demuxer.TS.STREAM.AUDIO_1, this.audio);\r\n    this.audio.connect(this.audioOut);\r\n  }\r\n\r\n  Object.defineProperty(this, 'currentTime', {\r\n    get: this.getCurrentTime,\r\n    set: this.setCurrentTime\r\n  });\r\n  Object.defineProperty(this, 'volume', {\r\n    get: this.getVolume,\r\n    set: this.setVolume\r\n  });\r\n\r\n  this.unpauseOnShow = false;\r\n  if (options.pauseWhenHidden !== false) {\r\n    document.addEventListener('visibilitychange', this.showHide.bind(this));\r\n  }\r\n\r\n  this.source.start();\r\n\r\n  if (this.autoplay) {\r\n    this.play();\r\n  }\r\n};\r\n\r\nPlayer.prototype.showHide = function (ev) {\r\n  if (document.visibilityState === 'hidden') {\r\n    this.unpauseOnShow = this.wantsToPlay;\r\n    this.pause();\r\n  }\r\n  else if (this.unpauseOnShow) {\r\n    this.play();\r\n  }\r\n};\r\n\r\nPlayer.prototype.play = function (ev) {\r\n  this.animationId = requestAnimationFrame(this.update.bind(this));\r\n  this.wantsToPlay = true;\r\n\r\n  if (this.cbUI.play) {\r\n    this.cbUI.play();\r\n  }\r\n};\r\n\r\nPlayer.prototype.pause = function (ev) {\r\n  cancelAnimationFrame(this.animationId);\r\n  this.wantsToPlay = false;\r\n  this.isPlaying = false;\r\n\r\n  if (this.audio && this.audio.canPlay) {\r\n    // Seek to the currentTime again - audio may already be enqueued a bit\r\n    // further, so we have to rewind it.\r\n    this.audioOut.stop();\r\n    this.seek(this.currentTime);\r\n  }\r\n\r\n  if (this.cbUI.pause) {\r\n    this.cbUI.pause();\r\n  }\r\n};\r\n\r\nPlayer.prototype.getVolume = function () {\r\n  return this.audioOut ? this.audioOut.volume : 0;\r\n};\r\n\r\nPlayer.prototype.setVolume = function (volume) {\r\n  if (this.audioOut) {\r\n    this.audioOut.volume = volume;\r\n  }\r\n};\r\n\r\nPlayer.prototype.stop = function (ev) {\r\n  this.pause();\r\n  this.seek(0);\r\n  if (this.video && this.options.decodeFirstFrame !== false) {\r\n    this.video.decode();\r\n  }\r\n\r\n  if (this.cbUI.stop) {\r\n    this.cbUI.stop();\r\n  }\r\n};\r\n\r\nPlayer.prototype.destroy = function () {\r\n  this.pause();\r\n  this.source.destroy();\r\n  this.renderer.destroy();\r\n  this.audioOut.destroy();\r\n};\r\n\r\nPlayer.prototype.seek = function (time) {\r\n  var startOffset = this.audio && this.audio.canPlay\r\n    ? this.audio.startTime\r\n    : this.video.startTime;\r\n\r\n  if (this.video) {\r\n    this.video.seek(time + startOffset);\r\n  }\r\n  if (this.audio) {\r\n    this.audio.seek(time + startOffset);\r\n  }\r\n\r\n  this.startTime = JSMpeg.Now() - time;\r\n};\r\n\r\nPlayer.prototype.getCurrentTime = function () {\r\n  return this.audio && this.audio.canPlay\r\n    ? this.audio.currentTime - this.audio.startTime\r\n    : this.video.currentTime - this.video.startTime;\r\n};\r\n\r\nPlayer.prototype.setCurrentTime = function (time) {\r\n  this.seek(time);\r\n};\r\n\r\nPlayer.prototype.update = function () {\r\n  this.animationId = requestAnimationFrame(this.update.bind(this));\r\n\r\n  if (!this.source.established) {\r\n    if (this.renderer) {\r\n      this.renderer.renderProgress(this.source.progress);\r\n    }\r\n    return;\r\n  }\r\n\r\n  if (!this.isPlaying) {\r\n    this.isPlaying = true;\r\n    this.startTime = JSMpeg.Now() - this.currentTime;\r\n  }\r\n\r\n  if (this.options.streaming) {\r\n    this.updateForStreaming();\r\n  }\r\n  else {\r\n    this.updateForStaticFile();\r\n  }\r\n};\r\n\r\nPlayer.prototype.updateForStreaming = function () {\r\n  // When streaming, immediately decode everything we have buffered up until\r\n  // now to minimize playback latency.\r\n\r\n  if (this.video) {\r\n    this.video.decode();\r\n  }\r\n\r\n  if (this.audio) {\r\n    var decoded = false;\r\n    do {\r\n      // If there's a lot of audio enqueued already, disable output and\r\n      // catch up with the encoding.\r\n      if (this.audioOut.enqueuedTime > this.maxAudioLag) {\r\n        this.audioOut.resetEnqueuedTime();\r\n        this.audioOut.enabled = false;\r\n      }\r\n      decoded = this.audio.decode();\r\n    } while (decoded);\r\n    this.audioOut.enabled = true;\r\n  }\r\n};\r\n\r\nPlayer.prototype.updateForStaticFile = function () {\r\n  var notEnoughData = false,\r\n    headroom = 0;\r\n\r\n  // If we have an audio track, we always try to sync the video to the audio.\r\n  // Gaps and discontinuities are far more percetable in audio than in video.\r\n\r\n  if (this.audio && this.audio.canPlay) {\r\n    // Do we have to decode and enqueue some more audio data?\r\n    while (\r\n      !notEnoughData &&\r\n      this.audio.decodedTime - this.audio.currentTime < 0.25\r\n      ) {\r\n      notEnoughData = !this.audio.decode();\r\n    }\r\n\r\n    // Sync video to audio\r\n    if (this.video && this.video.currentTime < this.audio.currentTime) {\r\n      notEnoughData = !this.video.decode();\r\n    }\r\n\r\n    headroom = this.demuxer.currentTime - this.audio.currentTime;\r\n  }\r\n\r\n\r\n  else if (this.video) {\r\n    // Video only - sync it to player's wallclock\r\n    var targetTime = (JSMpeg.Now() - this.startTime) + this.video.startTime,\r\n      lateTime = targetTime - this.video.currentTime,\r\n      frameTime = 1 / this.video.frameRate;\r\n\r\n    if (this.video && lateTime > 0) {\r\n      // If the video is too far behind (>2 frames), simply reset the\r\n      // target time to the next frame instead of trying to catch up.\r\n      if (lateTime > frameTime * 2) {\r\n        this.startTime += lateTime;\r\n      }\r\n\r\n      notEnoughData = !this.video.decode();\r\n    }\r\n\r\n    headroom = this.demuxer.currentTime - targetTime;\r\n  }\r\n\r\n  // Notify the source of the playhead headroom, so it can decide whether to\r\n  // continue loading further data.\r\n  this.source.resume(headroom);\r\n\r\n  // If we failed to decode and the source is complete, it means we reached\r\n  // the end of our data. We may want to loop.\r\n  if (notEnoughData && this.source.completed) {\r\n    if (this.loop) {\r\n      this.seek(0);\r\n    }\r\n    else {\r\n      // this.pause();\r\n      this.stop();\r\n    }\r\n  }\r\n};\r\n\r\nexport default Player;\r\n\r\n\r\n","import JSMpeg from '../';\r\n\r\nlet TS = function (options) {\r\n  this.bits = null;\r\n  this.leftoverBytes = null;\r\n\r\n  this.guessVideoFrameEnd = true;\r\n  this.pidsToStreamIds = {};\r\n\r\n  this.pesPacketInfo = {};\r\n  this.startTime = 0;\r\n  this.currentTime = 0;\r\n};\r\n\r\nTS.prototype.connect = function (streamId, destination) {\r\n  this.pesPacketInfo[streamId] = {\r\n    destination: destination,\r\n    currentLength: 0,\r\n    totalLength: 0,\r\n    pts: 0,\r\n    buffers: []\r\n  };\r\n};\r\n\r\nTS.prototype.write = function (buffer) {\r\n  if (this.leftoverBytes) {\r\n    var totalLength = buffer.byteLength + this.leftoverBytes.byteLength;\r\n    this.bits = new JSMpeg.BitBuffer(totalLength);\r\n    this.bits.write([this.leftoverBytes, buffer]);\r\n  }\r\n  else {\r\n    this.bits = new JSMpeg.BitBuffer(buffer);\r\n  }\r\n\r\n  while (this.bits.has(188 << 3) && this.parsePacket()) {\r\n  }\r\n\r\n  var leftoverCount = this.bits.byteLength - (this.bits.index >> 3);\r\n  this.leftoverBytes = leftoverCount > 0\r\n    ? this.bits.bytes.subarray(this.bits.index >> 3)\r\n    : null;\r\n};\r\n\r\nTS.prototype.parsePacket = function () {\r\n  // Check if we're in sync with packet boundaries; attempt to resync if not.\r\n  if (this.bits.read(8) !== 0x47) {\r\n    if (!this.resync()) {\r\n      // Couldn't resync; maybe next time...\r\n      return false;\r\n    }\r\n  }\r\n\r\n  var end = (this.bits.index >> 3) + 187;\r\n  var transportError = this.bits.read(1),\r\n    payloadStart = this.bits.read(1),\r\n    transportPriority = this.bits.read(1),\r\n    pid = this.bits.read(13),\r\n    transportScrambling = this.bits.read(2),\r\n    adaptationField = this.bits.read(2),\r\n    continuityCounter = this.bits.read(4);\r\n\r\n\r\n  // If this is the start of a new payload; signal the end of the previous\r\n  // frame, if we didn't do so already.\r\n  var streamId = this.pidsToStreamIds[pid];\r\n  if (payloadStart && streamId) {\r\n    var pi = this.pesPacketInfo[streamId];\r\n    if (pi && pi.currentLength) {\r\n      this.packetComplete(pi);\r\n    }\r\n  }\r\n\r\n  // Extract current payload\r\n  if (adaptationField & 0x1) {\r\n    if ((adaptationField & 0x2)) {\r\n      var adaptationFieldLength = this.bits.read(8);\r\n      this.bits.skip(adaptationFieldLength << 3);\r\n    }\r\n\r\n    if (payloadStart && this.bits.nextBytesAreStartCode()) {\r\n      this.bits.skip(24);\r\n      streamId = this.bits.read(8);\r\n      this.pidsToStreamIds[pid] = streamId;\r\n\r\n      var packetLength = this.bits.read(16)\r\n      this.bits.skip(8);\r\n      var ptsDtsFlag = this.bits.read(2);\r\n      this.bits.skip(6);\r\n      var headerLength = this.bits.read(8);\r\n      var payloadBeginIndex = this.bits.index + (headerLength << 3);\r\n\r\n      var pi = this.pesPacketInfo[streamId];\r\n      if (pi) {\r\n        var pts = 0;\r\n        if (ptsDtsFlag & 0x2) {\r\n          // The Presentation Timestamp is encoded as 33(!) bit\r\n          // integer, but has a \"marker bit\" inserted at weird places\r\n          // in between, making the whole thing 5 bytes in size.\r\n          // You can't make this shit up...\r\n          this.bits.skip(4);\r\n          var p32_30 = this.bits.read(3);\r\n          this.bits.skip(1);\r\n          var p29_15 = this.bits.read(15);\r\n          this.bits.skip(1);\r\n          var p14_0 = this.bits.read(15);\r\n          this.bits.skip(1);\r\n\r\n          // Can't use bit shifts here; we need 33 bits of precision,\r\n          // so we're using JavaScript's double number type. Also\r\n          // divide by the 90khz clock to get the pts in seconds.\r\n          pts = (p32_30 * 1073741824 + p29_15 * 32768 + p14_0) / 90000;\r\n\r\n          this.currentTime = pts;\r\n          if (this.startTime === -1) {\r\n            this.startTime = pts;\r\n          }\r\n        }\r\n\r\n        var payloadLength = packetLength\r\n          ? packetLength - headerLength - 3\r\n          : 0;\r\n        this.packetStart(pi, pts, payloadLength);\r\n      }\r\n\r\n      // Skip the rest of the header without parsing it\r\n      this.bits.index = payloadBeginIndex;\r\n    }\r\n\r\n    if (streamId) {\r\n      // Attempt to detect if the PES packet is complete. For Audio (and\r\n      // other) packets, we received a total packet length with the PES\r\n      // header, so we can check the current length.\r\n\r\n      // For Video packets, we have to guess the end by detecting if this\r\n      // TS packet was padded - there's no good reason to pad a TS packet\r\n      // in between, but it might just fit exactly. If this fails, we can\r\n      // only wait for the next PES header for that stream.\r\n\r\n      var pi = this.pesPacketInfo[streamId];\r\n      if (pi) {\r\n        var start = this.bits.index >> 3;\r\n        var complete = this.packetAddData(pi, start, end);\r\n\r\n        var hasPadding = !payloadStart && (adaptationField & 0x2);\r\n        if (complete || (this.guessVideoFrameEnd && hasPadding)) {\r\n          this.packetComplete(pi);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  this.bits.index = end << 3;\r\n  return true;\r\n};\r\n\r\nTS.prototype.resync = function () {\r\n  // Check if we have enough data to attempt a resync. We need 5 full packets.\r\n  if (!this.bits.has((188 * 6) << 3)) {\r\n    return false;\r\n  }\r\n\r\n  var byteIndex = this.bits.index >> 3;\r\n\r\n  // Look for the first sync token in the first 187 bytes\r\n  for (var i = 0; i < 187; i++) {\r\n    if (this.bits.bytes[byteIndex + i] === 0x47) {\r\n\r\n      // Look for 4 more sync tokens, each 188 bytes appart\r\n      var foundSync = true;\r\n      for (var j = 1; j < 5; j++) {\r\n        if (this.bits.bytes[byteIndex + i + 188 * j] !== 0x47) {\r\n          foundSync = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (foundSync) {\r\n        this.bits.index = (byteIndex + i + 1) << 3;\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  // In theory, we shouldn't arrive here. If we do, we had enough data but\r\n  // still didn't find sync - this can only happen if we were fed garbage\r\n  // data. Check your source!\r\n  console.warn('JSMpeg: Possible garbage data. Skipping.');\r\n  this.bits.skip(187 << 3);\r\n  return false;\r\n};\r\n\r\nTS.prototype.packetStart = function (pi, pts, payloadLength) {\r\n  pi.totalLength = payloadLength;\r\n  pi.currentLength = 0;\r\n  pi.pts = pts;\r\n};\r\n\r\nTS.prototype.packetAddData = function (pi, start, end) {\r\n  pi.buffers.push(this.bits.bytes.subarray(start, end));\r\n  pi.currentLength += end - start;\r\n\r\n  var complete = (pi.totalLength !== 0 && pi.currentLength >= pi.totalLength);\r\n  return complete;\r\n};\r\n\r\nTS.prototype.packetComplete = function (pi) {\r\n  pi.destination.write(pi.pts, pi.buffers);\r\n  pi.totalLength = 0;\r\n  pi.currentLength = 0;\r\n  pi.buffers = [];\r\n};\r\n\r\nTS.STREAM = {\r\n  PACK_HEADER: 0xBA,\r\n  SYSTEM_HEADER: 0xBB,\r\n  PROGRAM_MAP: 0xBC,\r\n  PRIVATE_1: 0xBD,\r\n  PADDING: 0xBE,\r\n  PRIVATE_2: 0xBF,\r\n  AUDIO_1: 0xC0,\r\n  VIDEO_1: 0xE0,\r\n  DIRECTORY: 0xFF\r\n};\r\n\r\nexport default TS;\r\n\r\n\r\n\r\n","import JSMpeg from '../';\r\n\r\n// style\r\nimport _style from '../../static/theme/style.scss';\r\n\r\n// template\r\nimport playButtonTemplate from '../../static/view/playButton.pug';\r\nimport unmuteButtonTemplate from '../../static/view/unmuteButton.pug';\r\n\r\nexport default class VideoElement {\r\n  constructor(wrapper, videoUrl, options) {\r\n    // Setup the div container, canvas and play button\r\n    this.options = Object.assign({\r\n      videoUrl: videoUrl,\r\n      poster: '',\r\n      aspectPercent: '56.25%',\r\n      picMode: false,\r\n      autoplay: false,\r\n      loop: false,\r\n      decodeFirstFrame: true,\r\n      progressive: true,\r\n      hookInPlay: () => {\r\n      },\r\n      hookInPause: () => {\r\n      },\r\n      hookInStop: () => {\r\n      },\r\n    }, options);\r\n\r\n\r\n    this.wrapper = isString(wrapper)\r\n      ? document.querySelector(wrapper)\r\n      : wrapper;\r\n    this.container = document.createElement('div');\r\n    this.canvas = document.createElement('canvas');\r\n    this.player = null;\r\n    this.playButton = document.createElement('div');\r\n\r\n    this.containerInit();\r\n    this.canvasInit();\r\n    this.playButtonInit();\r\n    this.playerInit();\r\n\r\n    // Assignment height of wrapper. prevent page shake when destroyed.\r\n    this.setWrapperHeight();\r\n    window.addEventListener('resize', () => this.setWrapperHeight());\r\n  };\r\n\r\n  containerInit() {\r\n    this.container.classList.add(_style.container);\r\n    addStyles(this.container, {\r\n      paddingBottom: this.options.aspectPercent,\r\n    });\r\n    this.wrapper.appendChild(this.container);\r\n  };\r\n\r\n  canvasInit() {\r\n    this.canvas.classList.add(_style.canvas);\r\n    this.container.appendChild(this.canvas);\r\n  };\r\n\r\n  playerInit() {\r\n    // Parse the data-options - we try to decode the values as json. This way\r\n    // we can get proper boolean and number values. If JSON.parse() fails,\r\n    // treat it as a string.\r\n    this.options = Object.assign(this.options, {\r\n      canvas: this.canvas,\r\n    });\r\n\r\n    // Create the player instance\r\n    this.player = new JSMpeg.Player(this.options.videoUrl, this.options, {\r\n      play: () => {\r\n        this.playButton.style.display = 'none';\r\n        if (this.poster) {\r\n          this.poster.style.display = 'none';\r\n        }\r\n        this.options.hookInPlay();\r\n      },\r\n      pause: () => {\r\n        this.playButton.style.display = 'block';\r\n        this.options.hookInPause();\r\n      },\r\n      stop: () => {\r\n        if (this.poster) {\r\n          this.poster.style.display = 'block';\r\n        }\r\n        this.options.hookInStop();\r\n      },\r\n    });\r\n    this.wrapper.playerInstance = this.player;\r\n\r\n    // Setup the poster element, if any\r\n    if (this.options.poster && !this.options.autoplay && !this.player.options.streaming) {\r\n      this.options.decodeFirstFrame = false;\r\n      this.poster = new Image();\r\n      this.poster.src = this.options.poster;\r\n      this.poster.classList.add(_style.poster);\r\n      this.container.appendChild(this.poster);\r\n    }\r\n\r\n    // Add the click handler if this video is pausable\r\n    if (!this.player.options.streaming) {\r\n      this.container.addEventListener('click', this.onClick.bind(this));\r\n    }\r\n\r\n    // Hide the play button if this video immediately begins playing\r\n    if (this.options.autoplay || this.player.options.streaming) {\r\n      this.playButton.style.display = 'none';\r\n    }\r\n\r\n    // Set up the unlock audio buton for iOS devices. iOS only allows us to\r\n    // play audio after a user action has initiated playing. For autoplay or\r\n    // streaming players we set up a muted speaker icon as the button. For all\r\n    // others, we can simply use the play button.\r\n    if (this.player.audioOut && !this.player.audioOut.unlocked) {\r\n      let unlockAudioElement = this.container;\r\n\r\n      if (this.options.autoplay || this.player.options.streaming) {\r\n        this.unmuteButton = document.createElement('div');\r\n        this.unmuteButton.innerHTML = unmuteButtonTemplate({\r\n          _style\r\n        });\r\n        this.unmuteButton.classList.add(_style.unmuteButton);\r\n        this.container.appendChild(this.unmuteButton);\r\n        unlockAudioElement = this.unmuteButton;\r\n      }\r\n\r\n      this.unlockAudioBound = this.onUnlockAudio.bind(this, unlockAudioElement);\r\n      unlockAudioElement.addEventListener('touchstart', this.unlockAudioBound, false);\r\n      unlockAudioElement.addEventListener('click', this.unlockAudioBound, true);\r\n    }\r\n  };\r\n\r\n  playButtonInit() {\r\n    this.playButton.innerHTML = playButtonTemplate({\r\n      _style\r\n    });\r\n    this.playButton.classList.add(_style.playButton);\r\n    if (this.options.picMode) {\r\n      this.playButton.style.visibility = 'hidden';\r\n    }\r\n    this.container.appendChild(this.playButton);\r\n  };\r\n\r\n  onUnlockAudio(element, ev) {\r\n    if (this.unmuteButton) {\r\n      ev.preventDefault();\r\n      ev.stopPropagation();\r\n    }\r\n    this.player.audioOut.unlock(function () {\r\n      if (this.unmuteButton) {\r\n        this.unmuteButton.style.display = 'none';\r\n      }\r\n      element.removeEventListener('touchstart', this.unlockAudioBound);\r\n      element.removeEventListener('click', this.unlockAudioBound);\r\n    }.bind(this));\r\n  };\r\n\r\n  onClick() {\r\n    if (this.player.isPlaying) {\r\n      this.player.pause();\r\n    }\r\n    else {\r\n      this.player.play();\r\n    }\r\n  };\r\n\r\n  setWrapperHeight() {\r\n    this.wrapper.style.height = this.container.offsetHeight + 'px';\r\n  };\r\n\r\n  destroy() {\r\n    this.player.destroy();\r\n    this.wrapper.innerHTML = '';\r\n    window.removeEventListener('resize', this.setWrapperHeight);\r\n  };\r\n};\r\n\r\nlet\r\n  addStyles = (element, styles) => {\r\n    for (let name in styles) {\r\n      element.style[name] = styles[name];\r\n    }\r\n  }\r\n\r\n  , isString = (str) => {\r\n    return (typeof str === 'string') && str.constructor === String;\r\n  }\r\n;\r\n\r\n","import JSMpeg from '../';\r\n\r\nlet WebAudioOut = function(options) {\r\n\tthis.context = WebAudioOut.CachedContext =\r\n\t\tWebAudioOut.CachedContext ||\r\n\t\tnew (window.AudioContext || window.webkitAudioContext)();\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.destination = this.gain;\r\n\r\n\t// Keep track of the number of connections to this AudioContext, so we\r\n\t// can safely close() it when we're the only one connected to it.\r\n\tthis.gain.connect(this.context.destination);\r\n\tthis.context._connections = (this.context._connections || 0) + 1;\r\n\t\r\n\tthis.startTime = 0;\r\n\tthis.buffer = null;\r\n\tthis.wallclockStartTime = 0;\r\n\tthis.volume = 1;\r\n\tthis.enabled = true;\r\n\r\n\tthis.unlocked = !WebAudioOut.NeedsUnlocking();\r\n\t\r\n\tObject.defineProperty(this, 'enqueuedTime', {get: this.getEnqueuedTime});\r\n};\r\n\r\nWebAudioOut.prototype.destroy = function() {\r\n\tthis.gain.disconnect();\r\n\tthis.context._connections--;\r\n\r\n\tif (this.context._connections === 0) {\r\n\t\tthis.context.close();\r\n\t\tWebAudioOut.CachedContext = null;\r\n\t}\r\n};\r\n\r\nWebAudioOut.prototype.play = function(sampleRate, left, right) {\r\n\tif (!this.enabled) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// If the context is not unlocked yet, we simply advance the start time\r\n\t// to \"fake\" actually playing audio. This will keep the video in sync.\r\n\tif (!this.unlocked) {\r\n\t\tvar ts = JSMpeg.Now()\r\n\t\tif (this.wallclockStartTime < ts) {\r\n\t\t\tthis.wallclockStartTime = ts;\r\n\t\t}\r\n\t\tthis.wallclockStartTime += left.length / sampleRate;\r\n\t\treturn;\r\n\t}\r\n\r\n\r\n\tthis.gain.gain.value = this.volume;\r\n\r\n\tvar buffer = this.context.createBuffer(2, left.length, sampleRate);\r\n\tbuffer.getChannelData(0).set(left);\r\n\tbuffer.getChannelData(1).set(right);\r\n\r\n\tvar source = this.context.createBufferSource();\r\n\tsource.buffer = buffer;\r\n\tsource.connect(this.destination);\r\n\r\n\tvar now = this.context.currentTime;\r\n\tvar duration = buffer.duration;\r\n\tif (this.startTime < now) {\r\n\t\tthis.startTime = now;\r\n\t\tthis.wallclockStartTime = JSMpeg.Now();\r\n\t}\r\n\r\n\tsource.start(this.startTime);\r\n\tthis.startTime += duration;\r\n\tthis.wallclockStartTime += duration;\r\n};\r\n\r\nWebAudioOut.prototype.stop = function() {\r\n\t// Meh; there seems to be no simple way to get a list of currently\r\n\t// active source nodes from the Audio Context, and maintaining this\r\n\t// list ourselfs would be a pain, so we just set the gain to 0\r\n\t// to cut off all enqueued audio instantly.\r\n\tthis.gain.gain.value = 0;\r\n};\r\n\r\nWebAudioOut.prototype.getEnqueuedTime = function() {\r\n\t// The AudioContext.currentTime is only updated every so often, so if we\r\n\t// want to get exact timing, we need to rely on the system time.\r\n\treturn Math.max(this.wallclockStartTime - JSMpeg.Now(), 0)\r\n};\r\n\r\nWebAudioOut.prototype.resetEnqueuedTime = function() {\r\n\tthis.startTime = this.context.currentTime;\r\n\tthis.wallclockStartTime = JSMpeg.Now();\r\n};\r\n\r\nWebAudioOut.prototype.unlock = function(callback) {\r\n\tif (this.unlocked) {\r\n\t\tif (callback) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\tthis.unlockCallback = callback;\r\n\t\r\n\t// Create empty buffer and play it\r\n\tvar buffer = this.context.createBuffer(1, 1, 22050);\r\n\tvar source = this.context.createBufferSource();\r\n\tsource.buffer = buffer;\r\n\tsource.connect(this.destination);\r\n\r\n  // polyfill source.start(0);\r\n  if (source.start) {\r\n    source.start(0);\r\n  }\r\n  else {\r\n    source.noteOn(0);\r\n  }\r\n\r\n\tsetTimeout(this.checkIfUnlocked.bind(this, source, 0), 0);\r\n};\r\n\r\nWebAudioOut.prototype.checkIfUnlocked = function(source, attempt) {\r\n\tif (\r\n\t\tsource.playbackState === source.PLAYING_STATE || \r\n\t\tsource.playbackState === source.FINISHED_STATE\r\n\t) {\r\n\t\tthis.unlocked = true;\r\n\t\tif (this.unlockCallback) {\r\n\t\t\tthis.unlockCallback();\r\n\t\t\tthis.unlockCallback = null;\t\r\n\t\t}\r\n\t}\r\n\telse if (attempt < 10) {\r\n\t\t// Jeez, what a shit show. Thanks iOS!\r\n\t\tsetTimeout(this.checkIfUnlocked.bind(this, source, attempt+1), 100);\r\n\t}\r\n};\r\n\r\nWebAudioOut.NeedsUnlocking = function() {\r\n\treturn /iPhone|iPad|iPod/i.test(navigator.userAgent);\r\n};\r\n\r\nWebAudioOut.IsSupported = function() {\r\n\treturn (window.AudioContext || window.webkitAudioContext);\r\n};\r\n\r\nWebAudioOut.CachedContext = null;\r\n\r\nexport default WebAudioOut;\r\n\r\n","let WebGLRenderer = function(options) {\r\n\tthis.canvas = options.canvas || document.createElement('canvas');\r\n\tthis.width = this.canvas.width;\r\n\tthis.height = this.canvas.height;\r\n\tthis.enabled = true;\r\n\r\n\tvar contextCreateOptions = {\r\n\t\tpreserveDrawingBuffer: !!options.preserveDrawingBuffer,\r\n\t\talpha: false,\r\n\t\tdepth: false,\r\n\t\tstencil: false,\r\n\t\tantialias: false\r\n\t};\r\n\r\n\tthis.gl = \r\n\t\tthis.canvas.getContext('webgl', contextCreateOptions) || \r\n\t\tthis.canvas.getContext('experimental-webgl', contextCreateOptions);\r\n\r\n\tif (!this.gl) {\r\n\t\tthrow new Error('Failed to get WebGL Context');\r\n\t}\r\n\r\n\tvar gl = this.gl;\r\n\tvar vertexAttr = null;\r\n\r\n\t// Init buffers\r\n\tthis.vertexBuffer = gl.createBuffer();\r\n\tvar vertexCoords = new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]);\r\n\tgl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\r\n\tgl.bufferData(gl.ARRAY_BUFFER, vertexCoords, gl.STATIC_DRAW);\r\n\r\n\t// Setup the main YCrCbToRGBA shader\r\n\tthis.program = this.createProgram(\r\n\t\tWebGLRenderer.SHADER.VERTEX_IDENTITY,\r\n\t\tWebGLRenderer.SHADER.FRAGMENT_YCRCB_TO_RGBA\r\n\t);\r\n\tvertexAttr = gl.getAttribLocation(this.program, 'vertex');\r\n\tgl.enableVertexAttribArray(vertexAttr);\r\n\tgl.vertexAttribPointer(vertexAttr, 2, gl.FLOAT, false, 0, 0);\r\n\r\n\tthis.textureY = this.createTexture(0, 'textureY');\r\n\tthis.textureCb = this.createTexture(1, 'textureCb');\r\n\tthis.textureCr = this.createTexture(2, 'textureCr');\r\n\r\n\r\n\t// Setup the loading animation shader\r\n\tthis.loadingProgram = this.createProgram(\r\n\t\tWebGLRenderer.SHADER.VERTEX_IDENTITY,\r\n\t\tWebGLRenderer.SHADER.FRAGMENT_LOADING\r\n\t);\r\n\tvertexAttr = gl.getAttribLocation(this.loadingProgram, 'vertex');\r\n\tgl.enableVertexAttribArray(vertexAttr);\r\n\tgl.vertexAttribPointer(vertexAttr, 2, gl.FLOAT, false, 0, 0);\r\n\r\n\tthis.shouldCreateUnclampedViews = !this.allowsClampedTextureData();\r\n};\r\n\r\nWebGLRenderer.prototype.destroy = function() {\r\n\tvar gl = this.gl;\r\n\t\r\n\tgl.deleteTexture(this.textureY);\r\n\tgl.deleteTexture(this.textureCb);\r\n\tgl.deleteTexture(this.textureCr);\r\n\r\n\tgl.deleteProgram(this.program);\r\n\tgl.deleteProgram(this.loadingProgram);\r\n\r\n\tgl.deleteBuffer(this.vertexBuffer);\r\n};\r\n\r\nWebGLRenderer.prototype.resize = function(width, height) {\r\n\tthis.width = width|0;\r\n\tthis.height = height|0;\r\n\r\n\tthis.canvas.width = this.width;\r\n\tthis.canvas.height = this.height;\r\n\r\n\tthis.gl.useProgram(this.program);\r\n\tthis.gl.viewport(0, 0, this.width, this.height);\r\n};\r\n\r\nWebGLRenderer.prototype.createTexture = function(index, name) {\r\n\tvar gl = this.gl;\r\n\tvar texture = gl.createTexture();\r\n\r\n\tgl.bindTexture(gl.TEXTURE_2D, texture);\r\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n\tgl.uniform1i(gl.getUniformLocation(this.program, name), index);\r\n\r\n\treturn texture;\r\n};\r\n\r\nWebGLRenderer.prototype.createProgram = function(vsh, fsh) {\r\n\tvar gl = this.gl;\r\n\tvar program = gl.createProgram();\r\n\r\n\tgl.attachShader(program, this.compileShader(gl.VERTEX_SHADER, vsh));\r\n\tgl.attachShader(program, this.compileShader(gl.FRAGMENT_SHADER, fsh));\r\n\tgl.linkProgram(program);\r\n\tgl.useProgram(program);\r\n\r\n\treturn program;\r\n};\r\n\r\nWebGLRenderer.prototype.compileShader = function(type, source) {\r\n\tvar gl = this.gl;\r\n\tvar shader = gl.createShader(type);\r\n\tgl.shaderSource(shader, source);\r\n\tgl.compileShader(shader);\r\n\r\n\tif (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n\t\tthrow new Error(gl.getShaderInfoLog(shader));\r\n\t}\r\n\r\n\treturn shader;\r\n};\r\n\r\nWebGLRenderer.prototype.allowsClampedTextureData = function() {\r\n\tvar gl = this.gl;\r\n\tvar texture = gl.createTexture();\r\n\r\n\tgl.bindTexture(gl.TEXTURE_2D, texture);\r\n\tgl.texImage2D(\r\n\t\tgl.TEXTURE_2D, 0, gl.LUMINANCE, 1, 1, 0,\r\n\t\tgl.LUMINANCE, gl.UNSIGNED_BYTE, new Uint8ClampedArray([0])\r\n\t);\r\n\treturn (gl.getError() === 0);\r\n};\r\n\r\nWebGLRenderer.prototype.renderProgress = function(progress) {\r\n\tvar gl = this.gl;\r\n\r\n\tgl.useProgram(this.loadingProgram);\r\n\r\n\tvar loc = gl.getUniformLocation(this.loadingProgram, 'progress');\r\n\tgl.uniform1f(loc, progress);\r\n\t\r\n\tgl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\r\n};\r\n\r\nWebGLRenderer.prototype.render = function(y, cb, cr) {\r\n\tif (!this.enabled) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar gl = this.gl;\r\n\tvar w = ((this.width + 15) >> 4) << 4,\r\n\t\th = this.height,\r\n\t\tw2 = w >> 1,\r\n\t\th2 = h >> 1;\r\n\r\n\t// In some browsers WebGL doesn't like Uint8ClampedArrays (this is a bug\r\n\t// and should be fixed soon-ish), so we have to create a Uint8Array view \r\n\t// for each plane.\r\n\tif (this.shouldCreateUnclampedViews) {\r\n\t\ty = new Uint8Array(y.buffer),\r\n\t\tcb = new Uint8Array(cb.buffer),\r\n\t\tcr = new Uint8Array(cr.buffer);\t\r\n\t}\r\n\r\n\tgl.useProgram(this.program);\r\n\r\n\tthis.updateTexture(gl.TEXTURE0, this.textureY, w, h, y);\r\n\tthis.updateTexture(gl.TEXTURE1, this.textureCb, w2, h2, cb);\r\n\tthis.updateTexture(gl.TEXTURE2, this.textureCr, w2, h2, cr);\r\n\r\n\tgl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\r\n};\r\n\r\nWebGLRenderer.prototype.updateTexture = function(unit, texture, w, h, data) {\r\n\tvar gl = this.gl;\r\n\tgl.activeTexture(unit);\r\n\tgl.bindTexture(gl.TEXTURE_2D, texture);\r\n\tgl.texImage2D(\r\n\t\tgl.TEXTURE_2D, 0, gl.LUMINANCE, w, h, 0, \r\n\t\tgl.LUMINANCE, gl.UNSIGNED_BYTE, data\r\n\t);\r\n}\r\n\r\nWebGLRenderer.IsSupported = function() {\r\n\ttry {\r\n\t\tif (!window.WebGLRenderingContext) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar canvas = document.createElement('canvas'); \r\n\t\treturn !!(\r\n\t\t\tcanvas.getContext('webgl') || \r\n\t\t\tcanvas.getContext('experimental-webgl')\r\n\t\t);\r\n\t}\r\n\tcatch (err) {\r\n\t\treturn false;\r\n\t} \r\n};\r\n\r\nWebGLRenderer.SHADER = {\r\n\tFRAGMENT_YCRCB_TO_RGBA: [\r\n\t\t'precision mediump float;',\r\n\t\t'uniform sampler2D textureY;',\r\n\t\t'uniform sampler2D textureCb;',\r\n\t\t'uniform sampler2D textureCr;',\r\n\t\t'varying vec2 texCoord;',\r\n\r\n\t\t'mat4 rec601 = mat4(',\r\n\t\t\t'1.16438,  0.00000,  1.59603, -0.87079,',\r\n\t\t\t'1.16438, -0.39176, -0.81297,  0.52959,',\r\n\t\t\t'1.16438,  2.01723,  0.00000, -1.08139,',\r\n\t\t\t'0, 0, 0, 1',\r\n\t\t');',\r\n\r\n\t\t'void main() {',\r\n\t\t\t'float y = texture2D(textureY, texCoord).r;',\r\n\t\t\t'float cb = texture2D(textureCb, texCoord).r;',\r\n\t\t\t'float cr = texture2D(textureCr, texCoord).r;',\r\n\r\n\t\t\t'gl_FragColor = vec4(y, cr, cb, 1.0) * rec601;',\r\n\t\t'}'\r\n\t].join('\\n'),\r\n\r\n\tFRAGMENT_LOADING: [\r\n\t\t'precision mediump float;',\r\n\t\t'uniform float progress;',\r\n\t\t'varying vec2 texCoord;',\r\n\r\n\t\t'void main() {',\r\n\t\t\t'float c = ceil(progress-(1.0-texCoord.y));',\r\n\t\t\t'gl_FragColor = vec4(c,c,c,1);',\r\n\t\t'}'\r\n\t].join('\\n'),\r\n\r\n\tVERTEX_IDENTITY: [\r\n\t\t'attribute vec2 vertex;',\r\n\t\t'varying vec2 texCoord;',\r\n\r\n\t\t'void main() {',\r\n\t\t\t'texCoord = vertex;',\r\n\t\t\t'gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);',\r\n\t\t'}'\r\n\t].join('\\n')\r\n};\r\n\r\nexport default WebGLRenderer;\r\n","let WSSource = function(url, options) {\n\tthis.url = url;\n\tthis.options = options;\n\tthis.socket = null;\t\n\n\tthis.callbacks = {connect: [], data: []};\n\tthis.destination = null;\n\n\tthis.reconnectInterval = options.reconnectInterval !== undefined\n\t\t? options.reconnectInterval\n\t\t: 5;\n\tthis.shouldAttemptReconnect = !!this.reconnectInterval;\n\n\tthis.completed = false;\n\tthis.established = false;\n\tthis.progress = 0;\n\n\tthis.reconnectTimeoutId = 0;\n};\n\nWSSource.prototype.connect = function(destination) {\n\tthis.destination = destination;\n};\n\nWSSource.prototype.destroy = function() {\n\tclearTimeout(this.reconnectTimeoutId);\n\tthis.shouldAttemptReconnect = false;\n\tthis.socket.close();\n};\n\nWSSource.prototype.start = function() {\n\tthis.shouldAttemptReconnect = !!this.reconnectInterval;\n\tthis.progress = 0;\n\tthis.established = false;\n\t\n\tthis.socket = new WebSocket(this.url, this.options.protocols || null);\n\tthis.socket.binaryType = 'arraybuffer';\n\tthis.socket.onmessage = this.onMessage.bind(this);\n\tthis.socket.onopen = this.onOpen.bind(this);\n\tthis.socket.onerror = this.onClose.bind(this);\n\tthis.socket.onclose = this.onClose.bind(this);\n};\n\nWSSource.prototype.resume = function(secondsHeadroom) {\n\t// Nothing to do here\n};\n\nWSSource.prototype.onOpen = function() {\n\tthis.progress = 1;\n\tthis.established = true;\n};\n\nWSSource.prototype.onClose = function() {\n\tif (this.shouldAttemptReconnect) {\n\t\tclearTimeout(this.reconnectTimeoutId);\n\t\tthis.reconnectTimeoutId = setTimeout(function(){\n\t\t\tthis.start();\t\n\t\t}.bind(this), this.reconnectInterval*1000);\n\t}\n};\n\nWSSource.prototype.onMessage = function(ev) {\n\tif (this.destination) {\n\t\tthis.destination.write(ev.data);\n\t}\n};\n\nexport default WSSource;\n\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/sass-loader/lib/loader.js??ref--5-2!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/sass-loader/lib/loader.js??ref--5-2!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/sass-loader/lib/loader.js??ref--5-2!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var pug = require(\"!../../node_modules/pug-runtime/index.js\");\n\nfunction template(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;var locals_for_with = (locals || {});(function (_style) {pug_html = pug_html + \"\\u003Csvg\" + (pug.attr(\"class\", pug.classes([_style.playButtonSvg], [true]), false, true)+\" viewBox=\\\"0 0 64 64\\\"\") + \"\\u003E\\u003Cpath d=\\\"M26,45.5L44,32L26,18.6v27V45.5L26,45.5z M32,2C15.4,2,2,15.5,2,32c0,16.6,13.4,30,30,30c16.6,0,30-13.4,30-30 C62,15.4,48.5,2,32,2L32,2z M32,56c-9.7,0-18.5-5.9-22.2-14.8C6.1,32.2,8.1,21.9,15,15c6.9-6.9,17.2-8.9,26.2-5.2 C50.1,13.5,56,22.3,56,32C56,45.3,45.2,56,32,56L32,56z\\\"\\u003E\\u003C\\u002Fpath\\u003E\\u003C\\u002Fsvg\\u003E\";}.call(this,\"_style\" in locals_for_with?locals_for_with._style:typeof _style!==\"undefined\"?_style:undefined));;return pug_html;};\nmodule.exports = template;","var pug = require(\"!../../node_modules/pug-runtime/index.js\");\n\nfunction template(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;var locals_for_with = (locals || {});(function (_style) {pug_html = pug_html + \"\\u003Csvg\" + (pug.attr(\"class\", pug.classes([_style.unmuteButtonSvg], [true]), false, true)+\" viewBox=\\\"0 0 64 64\\\"\") + \"\\u003E\\u003Cpath d=\\\"M58.3,45.5l-4.8-4.3c1.4-2.9,2.2-6.2,2.2-9.6c0-11.1-8.2-20.3-18.9-21.9V3.3C50.9,4.9,62,16.9,62,31.6 C62,36.6,60.6,41.4,58.3,45.5L58.3,45.5z M30.4,5.6v15.2l-8.3-7.3L30.4,5.6L30.4,5.6z M36.7,19.9c4.6,1.9,7.9,6.4,7.9,11.7 c0,0.6-0.1,1.1-0.1,1.7l-7.8-6.9V19.9L36.7,19.9z M57.5,60.7l-7.1-6.3c-3.9,2.9-8.6,4.8-13.7,5.4v-6.4c3.2-0.5,6.2-1.7,8.8-3.4 l-8.1-7.2c-0.2,0.1-0.5,0.3-0.7,0.4v-1l-6.3-5.6v20.2L15.4,42.6H2V20.5h10.2l-9.7-8.6l4.2-4.7L61.7,56L57.5,60.7L57.5,60.7z\\\"\\u003E\\u003C\\u002Fpath\\u003E\\u003C\\u002Fsvg\\u003E\";}.call(this,\"_style\" in locals_for_with?locals_for_with._style:typeof _style!==\"undefined\"?_style:undefined));;return pug_html;};\nmodule.exports = template;","/* (ignored) */"],"sourceRoot":""}